question,answer
What does Basic protocol flow description mean?,"draftmandatory

This NIP defines the basic protocol that should be implemented by everybody. New NIPs may add new optional (or mandatory) fields and messages and features to the structures and flows described here."
What does Events and signatures mean?,"Each user has a keypair. Signatures, public key, and encodings are done according to theSchnorr signatures standard for the curvesecp256k1.

The only object type that exists is theevent, which has the following format on the wire:

yaml
{
""id"": <32-bytes lowercase hex-encoded sha256 of the serialized event data>,
""pubkey"": <32-bytes lowercase hex-encoded public key of the event creator>,
""created_at"": <unix timestamp in seconds>,
""kind"": <integer between 0 and 65535>,
""tags"": [
[<arbitrary string>...],
// ...
],
""content"": <arbitrary string>,
""sig"": <64-bytes lowercase hex of the signature of the sha256 hash of the serialized event data, which is the same as the ""id"" field>
}

To obtain theevent.id, wesha256the serialized event. The serialization is done over the UTF-8 JSON-serialized string (which is described below) of the following structure:

[
0,
<pubkey, as a lowercase hex string>,
<created_at, as a number>,
<kind, as a number>,
<tags, as an array of arrays of non-null strings>,
<content, as a string>
]

To prevent implementation differences from creating a different event ID for the same event, the following rules MUST be followed while serializing:
- UTF-8 should be used for encoding.
- Whitespace, line breaks or other unnecessary formatting should not be included in the output JSON.
- The following characters in the content field must be escaped as shown, and all other characters must be included verbatim:
- A line break (0x0A), use\n- A double quote (0x22), use\""- A backslash (0x5C), use\\- A carriage return (0x0D), use\r- A tab character (0x09), use\t- A backspace, (0x08), use\b- A form feed, (0x0C), use\f"
What does Tags mean?,"Each tag is an array of one or more strings, with some conventions around them. Take a look at the example below:

jsonc
{
""tags"": [
[""e"", ""5c83da77af1dec6d7289834998ad7aafbd9e2191396d75ec3cc27f5a77226f36"", ""wss://nostr.example.com""],
[""p"", ""f7234bd4c1394dda46d09f35bd384dd30cc552ad5541990f98844fb06676e9ca""],
[""a"", ""30023:f7234bd4c1394dda46d09f35bd384dd30cc552ad5541990f98844fb06676e9ca:abcd"", ""wss://nostr.example.com""],
[""alt"", ""reply""],
// ...
],
// ...
}

The first element of the tag array is referred to as the tagnameorkeyand the second as the tagvalue. So we can safely say that the event above has anetag set to""5c83da77af1dec6d7289834998ad7aafbd9e2191396d75ec3cc27f5a77226f36"", analttag set to""reply""and so on. All elements after the second do not have a conventional name.

This NIP defines 3 standard tags that can be used across all event kinds with the same meaning. They are as follows:

- Theetag, used to refer to an event:[""e"", <32-bytes lowercase hex of the id of another event>, <recommended relay URL, optional>, <32-bytes lowercase hex of the author's pubkey, optional>]
- Theptag, used to refer to another user:[""p"", <32-bytes lowercase hex of a pubkey>, <recommended relay URL, optional>]
- Theatag, used to refer to an addressable or replaceable eventfor an addressable event:[""a"", ""<kind integer>:<32-bytes lowercase hex of a pubkey>:<d tag value>"", <recommended relay URL, optional>]for a normal replaceable event:[""a"", ""<kind integer>:<32-bytes lowercase hex of a pubkey>:"", <recommended relay URL, optional>](note: include the trailing colon)
- for an addressable event:[""a"", ""<kind integer>:<32-bytes lowercase hex of a pubkey>:<d tag value>"", <recommended relay URL, optional>]
- for a normal replaceable event:[""a"", ""<kind integer>:<32-bytes lowercase hex of a pubkey>:"", <recommended relay URL, optional>](note: include the trailing colon)

As a convention, all single-letter (only english alphabet letters: a-z, A-Z) key tags are expected to be indexed by relays, such that it is possible, for example, to query or subscribe to events that reference the event""5c83da77af1dec6d7289834998ad7aafbd9e2191396d75ec3cc27f5a77226f36""by using the{""#e"": [""5c83da77af1dec6d7289834998ad7aafbd9e2191396d75ec3cc27f5a77226f36""]}filter. Only the first value in any given tag is indexed."
What does Kinds mean?,"Kinds specify how clients should interpret the meaning of each event and the other fields of each event (e.g. an""r""tag may have a meaning in an event of kind 1 and an entirely different meaning in an event of kind 10002). Each NIP may define the meaning of a set of kinds that weren't defined elsewhere.NIP-10, for instance, specifies thekind:1text note for social media applications.

This NIP defines one basic kind:

- 0:user metadata: thecontentis set to a stringified JSON object{name: <nickname or full name>, about: <short bio>, picture: <url of the image>}describing the user who created the event.Extra metadata fieldsmay be set. A relay may delete older events once it gets a new one for the same pubkey.

And also a convention for kind ranges that allow for easier experimentation and flexibility of relay implementation:

- for kindnsuch that1000 <= n < 10000 || 4 <= n < 45 || n == 1 || n == 2, events areregular, which means they're all expected to be stored by relays.
- for kindnsuch that10000 <= n < 20000 || n == 0 || n == 3, events arereplaceable, which means that, for each combination ofpubkeyandkind, only the latest event MUST be stored by relays, older versions MAY be discarded.
- for kindnsuch that20000 <= n < 30000, events areephemeral, which means they are not expected to be stored by relays.
- for kindnsuch that30000 <= n < 40000, events areaddressableby theirkind,pubkeyanddtag value -- which means that, for each combination ofkind,pubkeyand thedtag value, only the latest event MUST be stored by relays, older versions MAY be discarded.

In case of replaceable events with the same timestamp, the event with the lowest id (first in lexical order) should be retained, and the other discarded.

When answering toREQmessages for replaceable events such as{""kinds"":[0],""authors"":[<hex-key>]}, even if the relay has more than one version stored, it SHOULD return just the latest one.

These are just conventions and relay implementations may differ."
What does Communication between clients and relays mean?,Relays expose a websocket endpoint to which clients can connect. Clients SHOULD open a single websocket connection to each relay and use it for all their subscriptions. Relays MAY limit number of connections from specific IP/client/etc.
What does From client to relay: sending events and creating subscriptions mean?,"Clients can send 3 types of messages, which must be JSON arrays, according to the following patterns:

- [""EVENT"", <event JSON as defined above>], used to publish events.
- [""REQ"", <subscription_id>, <filters1>, <filters2>, ...], used to request events and subscribe to new updates.
- [""CLOSE"", <subscription_id>], used to stop previous subscriptions.

<subscription_id>is an arbitrary, non-empty string of max length 64 chars. It represents a subscription per connection. Relays MUST manage<subscription_id>s independently for each WebSocket connection.<subscription_id>s are not guaranteed to be globally unique.

<filtersX>is a JSON object that determines what events will be sent in that subscription, it can have the following attributes:

yaml
{
""ids"": <a list of event ids>,
""authors"": <a list of lowercase pubkeys, the pubkey of an event must be one of these>,
""kinds"": <a list of a kind numbers>,
""#<single-letter (a-zA-Z)>"": <a list of tag values, for #e — a list of event ids, for #p — a list of pubkeys, etc.>,
""since"": <an integer unix timestamp in seconds. Events must have a created_at >= to this to pass>,
""until"": <an integer unix timestamp in seconds. Events must have a created_at <= to this to pass>,
""limit"": <maximum number of events relays SHOULD return in the initial query>
}

Upon receiving aREQmessage, the relay SHOULD return events that match the filter. Any new events it receives SHOULD be sent to that same websocket until the connection is closed, aCLOSEevent is received with the same<subscription_id>, or a newREQis sent using the same<subscription_id>(in which case a new subscription is created, replacing the old one).

Filter attributes containing lists (ids,authors,kindsand tag filters like#e) are JSON arrays with one or more values. At least one of the arrays' values must match the relevant field in an event for the condition to be considered a match. For scalar event attributes such asauthorsandkind, the attribute from the event must be contained in the filter list. In the case of tag attributes such as#e, for which an event may have multiple values, the event and filter condition values must have at least one item in common.

Theids,authors,#eand#pfilter lists MUST contain exact 64-character lowercase hex values.

Thesinceanduntilproperties can be used to specify the time range of events returned in the subscription. If a filter includes thesinceproperty, events withcreated_atgreater than or equal tosinceare considered to match the filter. Theuntilproperty is similar except thatcreated_atmust be less than or equal tountil. In short, an event matches a filter ifsince <= created_at <= untilholds.

All conditions of a filter that are specified must match for an event for it to pass the filter, i.e., multiple conditions are interpreted as&&conditions.

AREQmessage may contain multiple filters. In this case, events that match any of the filters are to be returned, i.e., multiple filters are to be interpreted as||conditions.

Thelimitproperty of a filter is only valid for the initial query and MUST be ignored afterwards. Whenlimit: nis present it is assumed that the events returned in the initial query will be the lastnevents ordered by thecreated_at. Newer events should appear first, and in the case of ties the event with the lowest id (first in lexical order) should be first. Relays SHOULD use thelimitvalue to guide how many events are returned in the initial response. Returning fewer events is acceptable, but returning (much) more should be avoided to prevent overwhelming clients."
What does From relay to client: sending events and notices mean?,"Relays can send 5 types of messages, which must also be JSON arrays, according to the following patterns:

- [""EVENT"", <subscription_id>, <event JSON as defined above>], used to send events requested by clients.
- [""OK"", <event_id>, <true|false>, <message>], used to indicate acceptance or denial of anEVENTmessage.
- [""EOSE"", <subscription_id>], used to indicate theend of stored eventsand the beginning of events newly received in real-time.
- [""CLOSED"", <subscription_id>, <message>], used to indicate that a subscription was ended on the server side.
- [""NOTICE"", <message>], used to send human-readable error messages or other things to clients.

This NIP defines no rules for howNOTICEmessages should be sent or treated.

- EVENTmessages MUST be sent only with a subscription ID related to a subscription previously initiated by the client (using theREQmessage above).
- OKmessages MUST be sent in response toEVENTmessages received from clients, they must have the 3rd parameter set totruewhen an event has been accepted by the relay,falseotherwise. The 4th parameter MUST always be present, but MAY be an empty string when the 3rd istrue, otherwise it MUST be a string formed by a machine-readable single-word prefix followed by a:and then a human-readable message. Some examples:
- [""OK"", ""b1a649ebe8..."", true, """"]
- [""OK"", ""b1a649ebe8..."", true, ""pow: difficulty 25>=24""]
- [""OK"", ""b1a649ebe8..."", true, ""duplicate: already have this event""]
- [""OK"", ""b1a649ebe8..."", false, ""blocked: you are banned from posting here""]
- [""OK"", ""b1a649ebe8..."", false, ""blocked: please register your pubkey at https://my-expensive-relay.example.com""]
- [""OK"", ""b1a649ebe8..."", false, ""rate-limited: slow down there chief""]
- [""OK"", ""b1a649ebe8..."", false, ""invalid: event creation date is too far off from the current time""]
- [""OK"", ""b1a649ebe8..."", false, ""pow: difficulty 26 is less than 30""]
- [""OK"", ""b1a649ebe8..."", false, ""restricted: not allowed to write.""]
- [""OK"", ""b1a649ebe8..."", false, ""error: could not connect to the database""]
- CLOSEDmessages MUST be sent in response to aREQwhen the relay refuses to fulfill it. It can also be sent when a relay decides to kill a subscription on its side before a client has disconnected or sent aCLOSE. This message uses the same pattern ofOKmessages with the machine-readable prefix and human-readable message. Some examples:
- [""CLOSED"", ""sub1"", ""unsupported: filter contains unknown elements""]
- [""CLOSED"", ""sub1"", ""error: could not connect to the database""]
- [""CLOSED"", ""sub1"", ""error: shutting down idle subscription""]
- The standardized machine-readable prefixes forOKandCLOSEDare:duplicate,pow,blocked,rate-limited,invalid,restricted, anderrorfor when none of that fits."
What does Follow List mean?,"finaloptional

A special event with kind3, meaning ""follow list"" is defined as having a list ofptags, one for each of the followed/known profiles one is following.

Each tag entry should contain the key for the profile, a relay URL where events from that key can be found (can be set to an empty string if not needed), and a local name (or ""petname"") for that profile (can also be set to an empty string or not provided), i.e.,[""p"", <32-bytes hex key>, <main relay URL>, <petname>].

The.contentis not used.

For example:

jsonc
{
""kind"": 3,
""tags"": [
[""p"", ""91cf9..4e5ca"", ""wss://alicerelay.com/"", ""alice""],
[""p"", ""14aeb..8dad4"", ""wss://bobrelay.com/nostr"", ""bob""],
[""p"", ""612ae..e610f"", ""ws://carolrelay.com/ws"", ""carol""]
],
""content"": """",
// other fields...
}

Every new following list that gets published overwrites the past ones, so it should contain all entries. Relays and clients SHOULD delete past following lists as soon as they receive a new one.

Whenever new follows are added to an existing list, clients SHOULD append them to the end of the list, so they are stored in chronological order."
What does Follow list backup mean?,"If one believes a relay will store their events for sufficient time, they can use this kind-3 event to backup their following list and recover on a different device."
What does Profile discovery and context augmentation mean?,A client may rely on the kind-3 event to display a list of followed people by profiles one is browsing; make lists of suggestions on who to follow based on the follow lists of other people one might be following or browsing; or show the data in other contexts.
What does Relay sharing mean?,"A client may publish a follow list with good relays for each of their follows so other clients may use these to update their internal relay lists if needed, increasing censorship-resistance."
What does Petname scheme mean?,"The data from these follow lists can be used by clients to construct local""petname""tables derived from other people's follow lists. This alleviates the need for global human-readable names. For example:

A user has an internal follow list that says

json
[
[""p"", ""21df6d143fb96c2ec9d63726bf9edc71"", """", ""erin""]
]

And receives two follow lists, one from21df6d143fb96c2ec9d63726bf9edc71that says

json
[
[""p"", ""a8bb3d884d5d90b413d9891fe4c4e46d"", """", ""david""]
]

and another froma8bb3d884d5d90b413d9891fe4c4e46dthat says

json
[
[""p"", ""f57f54057d2a7af0efecc8b0b66f5708"", """", ""frank""]
]

When the user sees21df6d143fb96c2ec9d63726bf9edc71the client can showerininstead;
When the user seesa8bb3d884d5d90b413d9891fe4c4e46dthe client can showdavid.erininstead;
When the user seesf57f54057d2a7af0efecc8b0b66f5708the client can showfrank.david.erininstead."
What does OpenTimestamps Attestations for Events mean?,"draftoptional

This NIP defines an event withkind:1040that can contain anOpenTimestampsproof for any other event:

json
{
""kind"": 1040
""tags"": [
[""e"", <event-id>, <relay-url>],
[""alt"", ""opentimestamps attestation""]
],
""content"": <base64-encoded OTS file data>
}

- The OpenTimestamps proof MUST prove the referencedeevent id as its digest.
- ThecontentMUST be the full content of an.otsfile containing at least one Bitcoin attestation. This file SHOULD contain asingleBitcoin attestation (as not more than one valid attestation is necessary and less bytes is better than more) and no reference to ""pending"" attestations since they are useless in this context."
What does Example OpenTimestamps proof verification flow mean?,"Usingnak,jqandots:

```bash
~> nak req -i e71c6ea722987debdb60f81f9ea4f604b5ac0664120dd64fb9d23abc4ec7c323 wss://nostr-pub.wellorder.net | jq -r .content | ots verify"
What does Encrypted Direct Message mean?,"finalunrecommendedoptional

A special event with kind4, meaning ""encrypted direct message"". It is supposed to have the following attributes:

contentMUST be equal to the base64-encoded, aes-256-cbc encrypted string of anything a user wants to write, encrypted using a shared cipher generated by combining the recipient's public-key with the sender's private-key; this appended by the base64-encoded initialization vector as if it was a querystring parameter named ""iv"". The format is the following:""content"": ""<encrypted_text>?iv=<initialization_vector>"".

tagsMUST contain an entry identifying the receiver of the message (such that relays may naturally forward this event to them), in the form[""p"", ""<pubkey, as a hex string>""].

tagsMAY contain an entry identifying the previous message in a conversation or a message we are explicitly replying to (such that contextual, more organized conversations may happen), in the form[""e"", ""<event_id>""].

Note: By default in thelibsecp256k1ECDH implementation, the secret is the SHA256 hash of the shared point (both X and Y coordinates). In Nostr, only the X coordinate of the shared point is used as the secret and it is NOT hashed. If using libsecp256k1, a custom function that copies the X coordinate must be passed as thehashfpargument insecp256k1_ecdh. Seehere.

Code sample for generating such an event in JavaScript:

```js
import crypto from 'crypto'
import * as secp from '@noble/secp256k1'

let sharedPoint = secp.getSharedSecret(ourPrivateKey, '02' + theirPublicKey)
let sharedX = sharedPoint.slice(1, 33)

let iv = crypto.randomFillSync(new Uint8Array(16))
var cipher = crypto.createCipheriv(
'aes-256-cbc',
Buffer.from(sharedX),
iv
)
let encryptedMessage = cipher.update(text, 'utf8', 'base64')
encryptedMessage += cipher.final('base64')
let ivBase64 = Buffer.from(iv.buffer).toString('base64')

let event = {
pubkey: ourPubKey,
created_at: Math.floor(Date.now() / 1000),
kind: 4,
tags: [['p', theirPublicKey]],
content: encryptedMessage + '?iv=' + ivBase64
}
```"
What does Security Warning mean?,"This standard does not go anywhere near what is considered the state-of-the-art in encrypted communication between peers, and it leaks metadata in the events, therefore it must not be used for anything you really need to keep secret, and only with relays that useAUTHto restrict who can fetch yourkind:4events."
What does Client Implementation Warning mean?,"Clientsshould notsearch and replace public key or note references from the.content. If processed like a regular text note (where@npub...is replaced with#[0]with a[""p"", ""...""]tag) the tags are leaked and the mentioned user will receive the message in their inbox."
What does Mapping Nostr keys to DNS-based internet identifiers mean?,"finaloptional

On events of kind0(user metadata) one can specify the key""nip05""with aninternet identifier(an email-like address) as the value. Although there is a link to a very liberal ""internet identifier"" specification above, NIP-05 assumes the<local-part>part will be restricted to the charactersa-z0-9-_., case-insensitive.

Upon seeing that, the client splits the identifier into<local-part>and<domain>and use these values to make a GET request tohttps://<domain>/.well-known/nostr.json?name=<local-part>.

The result should be a JSON document object with a key""names""that should then be a mapping of names to hex formatted public keys. If the public key for the given<name>matches thepubkeyfrom theuser metadataevent, the client then concludes that the given pubkey can indeed be referenced by its identifier."
What does Example mean?,"If a client sees an event like this:

jsonc
{
""pubkey"": ""b0635d6a9851d3aed0cd6c495b282167acf761729078d975fc341b22650b07b9"",
""kind"": 0,
""content"": ""{\""name\"": \""bob\"", \""nip05\"": \""bob@example.com\""}""
// other fields...
}

It will make a GET request tohttps://example.com/.well-known/nostr.json?name=boband get back a response that will look like

json
{
""names"": {
""bob"": ""b0635d6a9851d3aed0cd6c495b282167acf761729078d975fc341b22650b07b9""
}
}

or with therecommended""relays""attribute:

json
{
""names"": {
""bob"": ""b0635d6a9851d3aed0cd6c495b282167acf761729078d975fc341b22650b07b9""
},
""relays"": {
""b0635d6a9851d3aed0cd6c495b282167acf761729078d975fc341b22650b07b9"": [ ""wss://relay.example.com"", ""wss://relay2.example.com"" ]
}
}

If the pubkey matches the one given in""names""(as in the example above) that means the association is right and the""nip05""identifier is valid and can be displayed.

The recommended""relays""attribute may contain an object with public keys as properties and arrays of relay URLs as values. When present, that can be used to help clients learn in which relays the specific user may be found. Web servers which serve/.well-known/nostr.jsonfiles dynamically based on the query string SHOULD also serve the relays data for any name they serve in the same reply when that is available."
What does Finding users from their NIP-05 identifier mean?,"A client may implement support for finding users' public keys frominternet identifiers, the flow is the same as above, but reversed: first the client fetches thewell-knownURL and from there it gets the public key of the user, then it tries to fetch the kind0event for that user and check if it has a matching""nip05""."
"What does Identification, not verification mean?","The NIP-05 is not intended toverifya user, but only toidentifythem, for the purpose of facilitating the exchange of a contact or their search.Exceptions are people who own (e.g., a company) or are connected (e.g., a project) to a well-known domain, who can exploit NIP-05 as an attestation of their relationship with it, and thus to the organization behind it, thereby gaining an element of trust."
What does User discovery implementation suggestion mean?,"A client can use this to allow users to search other profiles. If a client has a search box or something like that, a user may be able to type ""bob@example.com"" there and the client would recognize that and do the proper queries to obtain a pubkey and suggest that to the user."
"What does Clients must always follow public keys, not NIP-05 addresses mean?","For example, if after finding thatbob@bob.comhas the public keyabc...def, the user clicks a button to follow that profile, the client must keep a primary reference toabc...def, notbob@bob.com. If, for any reason, the addresshttps://bob.com/.well-known/nostr.json?name=bobstarts returning the public key1d2...e3fat any time in the future, the client must not replaceabc...defin his list of followed profiles for the user (but it should stop displaying ""bob@bob.com"" for that user, as that will have become an invalid""nip05""property)."
What does Public keys must be in hex format mean?,"Keys must be returned in hex format. Keys in NIP-19npubformat are only meant to be used for display in client UIs, not in this NIP."
What does Showing just the domain as an identifier mean?,"Clients may treat the identifier_@domainas the ""root"" identifier, and choose to display it as just the<domain>. For example, if Bob ownsbob.com, he may not want an identifier likebob@bob.comas that is redundant. Instead, Bob can use the identifier_@bob.comand expect Nostr clients to show and treat that as justbob.comfor all purposes."
What does Reasoning for the/.well-known/nostr.json?name=<local-part>format mean?,"By adding the<local-part>as a query string instead of as part of the path, the protocol can support both dynamic servers that can generate JSON on-demand and static servers with a JSON file in it that may contain multiple names."
What does Allowing access from JavaScript apps mean?,"JavaScript Nostr apps may be restricted by browserCORSpolicies that prevent them from accessing/.well-known/nostr.jsonon the user's domain. When CORS prevents JS from loading a resource, the JS program sees it as a network failure identical to the resource not existing, so it is not possible for a pure-JS app to tell the user for certain that the failure was caused by a CORS issue. JS Nostr apps that see network failures requesting/.well-known/nostr.jsonfiles may want to recommend to users that they check the CORS policy of their servers, e.g.:

bash
$ curl -sI https://example.com/.well-known/nostr.json?name=bob | grep -i ^Access-Control
Access-Control-Allow-Origin: *

Users should ensure that their/.well-known/nostr.jsonis served with the HTTP headerAccess-Control-Allow-Origin: *to ensure it can be validated by pure JS apps running in modern browsers."
What does Security Constraints mean?,"The/.well-known/nostr.jsonendpoint MUST NOT return any HTTP redirects.

Fetchers MUST ignore any HTTP redirects given by the/.well-known/nostr.jsonendpoint."
What does Basic key derivation from mnemonic seed phrase mean?,"draftoptional

BIP39is used to generate mnemonic seed words and derive a binary seed from them.

BIP32is used to derive the pathm/44'/1237'/<account>'/0/0(according to the Nostr entry onSLIP44).

A basic client can simply use anaccountof0to derive a single key. For more advanced use-cases you can incrementaccount, allowing generation of practically infinite keys from the 5-level path with hardened derivation.

Other types of clients can still get fancy and use other derivation paths for their own other purposes."
What does Test vectors mean?,"mnemonic: leader monkey parrot ring guide accident before fence cannon height naive bean\
private key (hex): 7f7ff03d123792d6ac594bfa67bf6d0c0ab55b6b1fdb6249303fe861f1ccba9a\
nsec: nsec10allq0gjx7fddtzef0ax00mdps9t2kmtrldkyjfs8l5xruwvh2dq0lhhkp\
public key (hex): 17162c921dc4d2518f9a101db33695df1afb56ab82f5ff3e5da6eec3ca5cd917\
npub: npub1zutzeysacnf9rru6zqwmxd54mud0k44tst6l70ja5mhv8jjumytsd2x7nu

mnemonic: what bleak badge arrange retreat wolf trade produce cricket blur garlic valid proud rude strong choose busy staff weather area salt hollow arm fade\
private key (hex): c15d739894c81a2fcfd3a2df85a0d2c0dbc47a280d092799f144d73d7ae78add\
nsec: nsec1c9wh8xy5eqdzln7n5t0ctgxjcrdug73gp5yj0x03gntn67h83twssdfhel\
public key (hex): d41b22899549e1f3d335a31002cfd382174006e166d3e658e3a5eecdb6463573\
npub: npub16sdj9zv4f8sl85e45vgq9n7nsgt5qphpvmf7vk8r5hhvmdjxx4es8rq74h"
What does window.nostrcapability for web browsers mean?,"draftoptional

Thewindow.nostrobject may be made available by web browsers or extensions and websites or web-apps may make use of it after checking its availability.

That object must define the following methods:

async window.nostr.getPublicKey(): string // returns a public key as hex
async window.nostr.signEvent(event: { created_at: number, kind: number, tags: string[][], content: string }): Event // takes an event object, adds `id`, `pubkey` and `sig` and returns it

Aside from these two basic above, the following functions can also be implemented optionally:async window.nostr.nip04.encrypt(pubkey, plaintext): string // returns ciphertext and iv as specified in nip-04 (deprecated)
async window.nostr.nip04.decrypt(pubkey, ciphertext): string // takes ciphertext and iv as specified in nip-04 (deprecated)
async window.nostr.nip44.encrypt(pubkey, plaintext): string // returns ciphertext as specified in nip-44
async window.nostr.nip44.decrypt(pubkey, ciphertext): string // takes ciphertext as specified in nip-44"
What does Recommendation to Extension Authors mean?,"To make sure that thewindow.nostris available to nostr clients on page load, the authors who create Chromium and Firefox extensions should load their scripts by specifying""run_at"": ""document_end""in the extension's manifest."
What does Implementation mean?,See https://github.com/aljazceru/awesome-nostr#nip-07-browser-extensions.
What does Handling Mentions mean?,"finalunrecommendedoptional

This document standardizes the treatment given by clients of inline mentions of other events and pubkeys inside the content oftext_notes.

Clients that want to allow tagged mentions they MUST show an autocomplete component or something analogous to that whenever the user starts typing a special key (for example, ""@"") or presses some button to include a mention etc -- or these clients can come up with other ways to unambiguously differentiate between mentions and normal text.

Once a mention is identified, for example, the pubkey27866e9d854c78ae625b867eefdfa9580434bc3e675be08d2acb526610d96fbe, the client MUST add that pubkey to the.tagswith the tagp, then replace its textual reference (inside.content) with the notation#[index]in which ""index"" is equal to the 0-based index of the related tag in the tags array.

The same process applies for mentioning event IDs.

A client that receives atext_noteevent with such#[index]mentions in its.contentCAN do a search-and-replace using the actual contents from the.tagsarray with the actual pubkey or event ID that is mentioned, doing any desired context augmentation (for example, linking to the pubkey or showing a preview of the mentioned event contents) it wants in the process.

Where#[index]has anindexthat is outside the range of the tags array or points to a tag that is not aneorptag or a tag otherwise declared to support this notation, the client MUST NOT perform such replacement or augmentation, but instead display it as normal text."
What does Event Deletion Request mean?,"draftoptional

A special event with kind5, meaning ""deletion request"" is defined as having a list of one or moreeoratags, each referencing an event the author is requesting to be deleted. Deletion requests SHOULD include aktag for the kind of each event being requested for deletion.

The event'scontentfield MAY contain a text note describing the reason for the deletion request.

For example:

jsonc
{
""kind"": 5,
""pubkey"": <32-bytes hex-encoded public key of the event creator>,
""tags"": [
[""e"", ""dcd59..464a2""],
[""e"", ""968c5..ad7a4""],
[""a"", ""<kind>:<pubkey>:<d-identifier>""],
[""k"", ""1""],
[""k"", ""30023""]
],
""content"": ""these posts were published by accident"",
// other fields...
}

Relays SHOULD delete or stop publishing any referenced events that have an identicalpubkeyas the deletion request.  Clients SHOULD hide or otherwise indicate a deletion request status for referenced events.

Relays SHOULD continue to publish/share the deletion request events indefinitely, as clients may already have the event that's intended to be deleted. Additionally, clients SHOULD broadcast deletion request events to other relays which don't have it.

When anatag is used, relays SHOULD delete all versions of the replaceable event up to thecreated_attimestamp of the deletion request event."
What does Client Usage mean?,"Clients MAY choose to fully hide any events that are referenced by valid deletion request events.  This includes text notes, direct messages, or other yet-to-be defined event kinds.  Alternatively, they MAY show the event along with an icon or other indication that the author has ""disowned"" the event.  Thecontentfield MAY also be used to replace the deleted events' own content, although a user interface should clearly indicate that this is a deletion request reason, not the original content.

A client MUST validate that each eventpubkeyreferenced in theetag of the deletion request is identical to the deletion requestpubkey, before hiding or deleting any event.  Relays can not, in general, perform this validation and should not be treated as authoritative.

Clients display the deletion request event itself in any way they choose, e.g., not at all, or with a prominent notice.

Clients MAY choose to inform the user that their request for deletion does not guarantee deletion because it is impossible to delete events from all relays and clients."
What does Relay Usage mean?,"Relays MAY validate that a deletion request event only references events that have the samepubkeyas the deletion request itself, however this is not required since relays may not have knowledge of all referenced events."
What does Deletion Request of a Deletion Request mean?,"Publishing a deletion request event against a deletion request has no effect.  Clients and relays are not obliged to support ""unrequest deletion"" functionality."
What does Text Notes and Threads mean?,"draftoptional

This NIP defineskind:1as a simple plaintext note."
What does Abstract mean?,"The.contentproperty contains some human-readable text.

etags can be used to define note thread roots and replies. They SHOULD be sorted by the reply stack from root to the direct parent.

qtags MAY be used when citing events in the.contentwithNIP-21.

json
[""q"", ""<event-id> or <event-address>"", ""<relay-url>"", ""<pubkey-if-a-regular-event>""]

Authors of theeandqtags SHOULD be added asptags to notify of a new reply or quote.

Markup languages such as markdown and HTML SHOULD NOT be used."
"What does Marked ""e"" tags (PREFERRED) mean?","Kind 1 events withetags are replies to other kind 1 events. Kind 1 replies MUST NOT be used to reply to other kinds, useNIP-22instead.

[""e"", <event-id>, <relay-url>, <marker>, <pubkey>]

Where:

- <event-id>is the id of the event being referenced.
- <relay-url>is the URL of a recommended relay associated with the reference. Clients SHOULD add a valid<relay-url>field, but may instead leave it as"""".
- <marker>is optional and if present is one of""reply"",""root"".
- <pubkey>is optional, SHOULD be the pubkey of the author of the referenced event

Those marked with""reply""denote the id of the reply event being responded to.  Those marked with""root""denote the root id of the reply thread being responded to. For top level replies (those replying directly to the root event), only the""root""marker should be used.

A direct reply to the root of a thread should have a single marked ""e"" tag of type ""root"".

<pubkey>SHOULD be the pubkey of the author of theetagged event, this is used in the outbox model to search for that event from the authors write relays where relay hints did not resolve the event."
"What does The ""p"" tag mean?","Used in a text event contains a list of pubkeys used to record who is involved in a reply thread.

When replying to a text event E the reply event's ""p"" tags should contain all of E's ""p"" tags as well as the""pubkey""of the event being replied to.

Example:  Given a text event authored bya1with ""p"" tags [p1,p2,p3] then the ""p"" tags of the reply should be [a1,p1,p2,p3]
in no particular order."
"What does Deprecated Positional ""e"" tags mean?","This scheme is not in common use anymore and is here just to keep backward compatibility with older events on the network.

Positionaletags are deprecated because they create ambiguities that are difficult, or impossible to resolve when an event references another but is not a reply.

They use simpleetags without any marker.

[""e"", <event-id>, <relay-url>]as per NIP-01.

Where:

- <event-id>is the id of the event being referenced.
- <relay-url>is the URL of a recommended relay associated with the reference.  Many clients treat this field as optional.

The positions of the ""e"" tags within the event denote specific meanings as follows:

- No ""e"" tag:This event is not a reply to, nor does it refer to, any other event.
- One ""e"" tag:[""e"", <id>]: The id of the event to which this event is a reply.
- Two ""e"" tags:[""e"", <root-id>],[""e"", <reply-id>]<root-id>is the id of the event at the root of the reply chain.<reply-id>is the id of the article to which this event is a reply.
- Many ""e"" tags:[""e"", <root-id>][""e"", <mention-id>], ...,[""e"", <reply-id>]There may be any number of<mention-ids>.  These are the ids of events which may, or may not be in the reply chain.
They are citing from this event.root-idandreply-idare as above."
What does Relay Information Document mean?,"draftoptional

Relays may provide server metadata to clients to inform them of capabilities, administrative contacts, and various server attributes.  This is made available as a JSON document over HTTP, on the same URI as the relay's websocket.

When a relay receives an HTTP(s) request with anAcceptheader ofapplication/nostr+jsonto a URI supporting WebSocket upgrades, they SHOULD return a document with the following structure.

```json
{
""name"":,
""description"":,
""banner"":,
""icon"":,
""pubkey"":,
""contact"":,
""supported_nips"":,
""software"":,
""version"":""privacy_policy"":,
""terms_of_service"":,

}
```

Any field may be omitted, and clients MUST ignore any additional fields they do not understand. Relays MUST accept CORS requests by sendingAccess-Control-Allow-Origin,Access-Control-Allow-Headers, andAccess-Control-Allow-Methodsheaders."
What does Name mean?,"A relay may select anamefor use in client software.  This is a string, and SHOULD be less than 30 characters to avoid client truncation."
What does Description mean?,"Detailed plain-text information about the relay may be contained in thedescriptionstring.  It is recommended that this contain no markup, formatting or line breaks for word wrapping, and simply use double newline characters to separate paragraphs.  There are no limitations on length."
What does Banner mean?,"To make nostr relay management more user friendly, an effort should be made by relay owners to communicate with non-dev non-technical nostr end users. A banner is a visual representation of the relay. It should aim to visually communicate the brand of the relay, complementing the textDescription.Here is an example bannermockup as visualized in Damus iOS relay view of the Damus relay."
What does Icon mean?,"Icon is a compact visual representation of the relay for use in UI with limited real estate such as a nostr user's relay list view. Below is an example URL pointing to an image to be used as an icon for the relay. Recommended to be squared in shape.

jsonc
{
""icon"": ""https://nostr.build/i/53866b44135a27d624e99c6165cabd76ac8f72797209700acb189fce75021f47.jpg"",
// other fields...
}"
What does Pubkey mean?,"An administrative contact may be listed with apubkey, in the same format as Nostr events (32-byte hex for asecp256k1public key).  If a contact is listed, this provides clients with a recommended address to send encrypted direct messages (SeeNIP-17) to a system administrator.  Expected uses of this address are to report abuse or illegal content, file bug reports, or request other technical assistance.

Relay operators have no obligation to respond to direct messages."
What does Contact mean?,"An alternative contact may be listed under thecontactfield as well, with the same purpose aspubkey.  Use of a Nostr public key and direct message SHOULD be preferred over this.  Contents of this field SHOULD be a URI, using schemes such asmailtoorhttpsto provide users with a means of contact."
What does Supported NIPs mean?,"As the Nostr protocol evolves, some functionality may only be available by relays that implement a specificNIP.  This field is an array of the integer identifiers ofNIPs that are implemented in the relay.  Examples would include1, for""NIP-01""and9, for""NIP-09"".  Client-sideNIPsSHOULD NOT be advertised, and can be ignored by clients."
What does Software mean?,"The relay server implementation MAY be provided in thesoftwareattribute.  If present, this MUST be a URL to the project's homepage."
What does Version mean?,The relay MAY choose to publish its software version as a string attribute.  The string format is defined by the relay implementation.  It is recommended this be a version number or commit identifier.
What does Privacy Policy mean?,"The relay owner/admin MAY choose to link to a privacy policy document, which describes how the relay utilizes user data. Data collection, data usage, data retention, monetization of data, and third party data sharing SHOULD be included."
What does Terms of Service mean?,The relay owner/admin MAY choose to link to a terms of service document.
What does Server Limitations mean?,"These are limitations imposed by the relay on clients. Your client
should expect that requests exceed thesepracticallimitations
are rejected or fail immediately.

jsonc
{
""limitation"": {
""max_message_length"": 16384,
""max_subscriptions"": 300,
""max_limit"": 5000,
""max_subid_length"": 100,
""max_event_tags"": 100,
""max_content_length"": 8196,
""min_pow_difficulty"": 30,
""auth_required"": true,
""payment_required"": true,
""restricted_writes"": true,
""created_at_lower_limit"": 31536000,
""created_at_upper_limit"": 3,
""default_limit"": 500
},
// other fields...
}

- max_message_length: the maximum number of bytes for incoming JSON that the relay
will attempt to decode and act upon. When you send large subscriptions, you will be
limited by this value. It also effectively limits the maximum size of any event. Value is
calculated from[to]after UTF-8 serialization (so some unicode characters
will cost 2-3 bytes). It is equal to the maximum size of the WebSocket message frame.
- max_subscriptions: total number of subscriptions that may be
active on a single websocket connection to this relay. Authenticated clients with a (paid) relationship to the relay
may have higher limits.
- max_subid_length: maximum length of subscription id as a string.
- max_limit: the relay server will clamp each filter'slimitvalue to this number.
This means the client won't be able to get more than this number
of events from a single subscription filter. This clamping is typically done silently
by the relay, but with this number, you can know that there are additional results
if you narrow your filter's time range or other parameters.
- max_event_tags: in any event, this is the maximum number of elements in thetagslist.
- max_content_length: maximum number of characters in thecontentfield of any event. This is a count of unicode characters. After
serializing into JSON it may be larger (in bytes), and is still
subject to themax_message_length, if defined.
- min_pow_difficulty: new events will require at least this difficulty of PoW,
based onNIP-13, or they will be rejected by this server.
- auth_required: this relay requiresNIP-42authentication
to happen before a new connection may perform any other action.
Even if set to False, authentication may be required for specific actions.
- payment_required: this relay requires payment before a new connection may perform any action.
- restricted_writes: this relay requires some kind of condition to be fulfilled to
accept events (not necessarily, but includingpayment_requiredandmin_pow_difficulty).
This should only be set totruewhen users are expected to know the relay policy before trying
to write to it -- like belonging to a special pubkey-based whitelist or writing only events of
a specific niche kind or content. Normal anti-spam heuristics, for example, do not qualify.
- created_at_lower_limit: 'created_at' lower limit
- created_at_upper_limit: 'created_at' upper limit
- default_limit: The maximum returned events if you send a filter with the limit set to 0."
What does Event Retention mean?,"There may be a cost associated with storing data forever, so relays
may wish to state retention times. The values stated here are defaults
for unauthenticated users and visitors. Paid users would likely have
other policies.

Retention times are given in seconds, withnullindicating infinity.
If zero is provided, this means the event will not be stored at
all, and preferably an error will be provided when those are received.

jsonc
{
""retention"": [
{""kinds"": [0, 1, [5, 7], [40, 49]], ""time"": 3600},
{""kinds"": [[40000, 49999]], ""time"": 100},
{""kinds"": [[30000, 39999]], ""count"": 1000},
{""time"": 3600, ""count"": 10000}
],
// other fields...
}

retentionis a list of specifications: each will apply to either all kinds, or
a subset of kinds. Ranges may be specified for the kind field as a tuple of inclusive
start and end values. Events of indicated kind (or all) are then limited to acountand/or time period.

It is possible to effectively blacklist Nostr-based protocols that rely on
a specifickindnumber, by giving a retention time of zero for thosekindvalues.
While that is unfortunate, it does allow clients to discover servers that will
support their protocol quickly via a single HTTP fetch.

There is no need to specify retention times forephemeral eventssince they are not retained."
What does Content Limitations mean?,"Some relays may be governed by the arbitrary laws of a nation state. This
may limit what content can be stored in clear-text on those relays. All
clients are encouraged to use encryption to work around this limitation.

It is not possible to describe the limitations of each country's laws
and policies which themselves are typically vague and constantly shifting.

Therefore, this field allows the relay operator to indicate which
countries' laws might end up being enforced on them, and then
indirectly on their users' content.

Users should be able to avoid relays in countries they don't like,
and/or select relays in more favorable zones. Exposing this
flexibility is up to the client software.

jsonc
{
""relay_countries"": [ ""CA"", ""US"" ],
// other fields...
}

- relay_countries: a list of two-level ISO country codes (ISO 3166-1 alpha-2)  whose
laws and policies may affect this relay.EUmay be used for European Union countries. A*can be used for global relays.

Remember that a relay may be hosted in a country which is not the
country of the legal entities who own the relay, so it's very
likely a number of countries are involved."
What does Community Preferences mean?,"For public text notes at least, a relay may try to foster a
local community. This would encourage users to follow the global
feed on that relay, in addition to their usual individual follows.
To support this goal, relays MAY specify some of the following values.

jsonc
{
""language_tags"": [""en"", ""en-419""],
""tags"": [""sfw-only"", ""bitcoin-only"", ""anime""],
""posting_policy"": ""https://example.com/posting-policy.html"",
// other fields...
}

- language_tagsis an ordered list
ofIETF language tagsindicating
the major languages spoken on the relay. A*can be used for global relays.
- tagsis a list of limitations on the topics to be discussed.
For examplesfw-onlyindicates that only ""Safe For Work"" content
is encouraged on this relay. This relies on assumptions of what the
""work"" ""community"" feels ""safe"" talking about. In time, a common
set of tags may emerge that allow users to find relays that suit
their needs, and client software will be able to parse these tags easily.
Thebitcoin-onlytag indicates that anyaltcoin,""crypto""orblockchaincomments will be ridiculed without mercy.
- posting_policyis a link to a human-readable page which specifies the
community policies for the relay. In cases wheresfw-onlyis True, it's
important to link to a page which gets into the specifics of your posting policy.

Thedescriptionfield should be used to describe your community
goals and values, in brief. Theposting_policyis for additional
detail and legal terms. Use thetagsfield to signify limitations
on content, or topics to be discussed, which could be machine
processed by appropriate client software."
What does Pay-to-Relay mean?,"Relays that require payments may want to expose their fee schedules.

jsonc
{
""payments_url"": ""https://my-relay/payments"",
""fees"": {
""admission"": [{ ""amount"": 1000000, ""unit"": ""msats"" }],
""subscription"": [{ ""amount"": 5000000, ""unit"": ""msats"", ""period"": 2592000 }],
""publication"": [{ ""kinds"": [4], ""amount"": 100, ""unit"": ""msats"" }],
},
// other fields...
}"
What does Examples mean?,"As of 25 March 2025 the following command provided these results:

bash
curl -H ""Accept: application/nostr+json"" https://jellyfish.land | jq

json
{
""name"": ""JellyFish"",
""description"": ""Stay Immortal!"",
""banner"": ""https://image.nostr.build/7fdefea2dec1f1ec25b8ce69362566c13b2b7f13f1726c2e4584f05f64f62496.jpg"",
""pubkey"": ""bf2bee5281149c7c350f5d12ae32f514c7864ff10805182f4178538c2c421007"",
""contact"": ""hi@dezh.tech"",
""software"": ""https://github.com/dezh-tech/immortal"",
""supported_nips"": [
1,
9,
11,
13,
17,
40,
42,
59,
62,
70
],
""version"": ""immortal - 0.0.9"",
""relay_countries"": [
""*""
],
""language_tags"": [
""*""
],
""tags"": [],
""posting_policy"": ""https://jellyfish.land/tos.txt"",
""payments_url"": ""https://jellyfish.land/relay"",
""icon"": ""https://image.nostr.build/2547e9ec4b23589e09bc7071e0806c3d4293f76284c58ff331a64bce978aaee8.jpg"",
""retention"": [],
""fees"": {
""subscription"": [
{
""amount"": 3000,
""period"": 2628003,
""unit"": ""sats""
},
{
""amount"": 8000,
""period"": 7884009,
""unit"": ""sats""
},
{
""amount"": 15000,
""period"": 15768018,
""unit"": ""sats""
},
{
""amount"": 28000,
""period"": 31536036,
""unit"": ""sats""
}
]
},
""limitation"": {
""auth_required"": false,
""max_message_length"": 70000,
""max_subid_length"": 256,
""max_subscriptions"": 350,
""min_pow_difficulty"": 0,
""payment_required"": true,
""restricted_writes"": true,
""max_event_tags"": 2000,
""max_content_length"": 70000,
""created_at_lower_limit"": 0,
""created_at_upper_limit"": 2147483647,
""default_limit"": 500,
""max_limit"": 5000
}
}"
What does Generic Tag Queries mean?,"finalmandatory

Moved toNIP-01."
What does Proof of Work mean?,"draftoptional

This NIP defines a way to generate and interpret Proof of Work for nostr notes. Proof of Work (PoW) is a way to add a proof of computational work to a note. This is a bearer proof that all relays and clients can universally validate with a small amount of code. This proof can be used as a means of spam deterrence.

difficultyis defined to be the number of leading zero bits in theNIP-01id. For example, an id of000000000e9d97a1ab09fc381030b346cdd7a142ad57e6df0b46dc9bef6c7e2dhas a difficulty of36with36leading 0 bits.

002f...is0000 0000 0010 1111...in binary, which has 10 leading zeroes. Do not forget to count leading zeroes for hex digits <=7."
What does Mining mean?,"To generate PoW for aNIP-01note, anoncetag is used:

json
{""content"": ""It's just me mining my own business"", ""tags"": [[""nonce"", ""1"", ""21""]]}

When mining, the second entry to the nonce tag is updated, and then the id is recalculated (seeNIP-01). If the id has the desired number of leading zero bits, the note has been mined. It is recommended to update thecreated_atas well during this process.

The third entry to the nonce tagSHOULDcontain the target difficulty. This allows clients to protect against situations where bulk spammers targeting a lower difficulty get lucky and match a higher difficulty. For example, if you require 40 bits to reply to your thread and see a committed target of 30, you can safely reject it even if the note has 40 bits difficulty. Without a committed target difficulty you could not reject it. Committing to a target difficulty is something all honest miners should be ok with, and clientsMAYreject a note matching a target difficulty if it is missing a difficulty commitment."
What does Example mined note mean?,"json
{
""id"": ""000006d8c378af1779d2feebc7603a125d99eca0ccf1085959b307f64e5dd358"",
""pubkey"": ""a48380f4cfcc1ad5378294fcac36439770f9c878dd880ffa94bb74ea54a6f243"",
""created_at"": 1651794653,
""kind"": 1,
""tags"": [
[""nonce"", ""776797"", ""20""]
],
""content"": ""It's just me mining my own business"",
""sig"": ""284622fc0a3f4f1303455d5175f7ba962a3300d136085b9566801bc2e0699de0c7e31e44c81fb40ad9049173742e904713c3594a1da0fc5d2382a25c11aba977""
}"
What does Validating mean?,"Here is some reference C code for calculating the difficulty (aka number of leading zero bits) in a nostr event id:

```c
int zero_bits(unsigned char b)
{
int n = 0;

```
if (b == 0)
return 8;

while (b >>= 1)
n++;

return 7-n;
```

}

/find the number of leading zero bits in a hash/
int count_leading_zero_bits(unsigned char *hash)
{
int bits, total, i;
for (i = 0, total = 0; i < 32; i++) {
bits = zero_bits(hash[i]);
total += bits;
if (bits != 8)
break;
}
return total;
}
```

Here is some JavaScript code for doing the same thing:

```javascript
// hex should be a hexadecimal string (with no 0x prefix)
function countLeadingZeroes(hex) {
let count = 0;

for (let i = 0; i < hex.length; i++) {
const nibble = parseInt(hex[i], 16);
if (nibble === 0) {
count += 4;
} else {
count += Math.clz32(nibble) - 28;
break;
}
}

return count;
}
```"
What does Delegated Proof of Work mean?,"Since theNIP-01note id does not commit to any signature, PoW can be outsourced to PoW providers, perhaps for a fee. This provides a way for clients to get their messages out to PoW-restricted relays without having to do any work themselves, which is useful for energy-constrained devices like mobile phones."
What does Subject tag in Text events mean?,"draftoptional

This NIP defines the use of the ""subject"" tag in text (kind: 1) events.
(implemented in more-speech)

json
[""subject"": <string>]

Browsers often display threaded lists of messages.  The contents of the subject tag can be used in such lists, instead of the more ad hoc approach of using the first few words of the message.  This is very similar to the way email browsers display lists of incoming emails by subject rather than by contents.

When replying to a message with a subject, clients SHOULD replicate the subject tag.  Clients MAY adorn the subject to denote
that it is a reply.  e.g. by prepending ""Re:"".

Subjects should generally be shorter than 80 chars.  Long subjects will likely be trimmed by clients."
What does Nostr Marketplace mean?,"draftoptional

Based onDiagon-Alley.

Implemented inNostrMarketandPlebeian Market."
What does Terms mean?,"- merchant- seller of products with NOSTR key-pair
- customer- buyer of products with NOSTR key-pair
- product- item for sale by themerchant
- stall- list of products controlled bymerchant(amerchantcan have multiple stalls)
- marketplace- clientside software for searchingstallsand purchasingproducts"
What does Merchant admin mean?,"Where themerchantcreates, updates and deletesstallsandproducts, as well as where they manage sales, payments and communication withcustomers.

Themerchantadmin software can be purely clientside, but forconvenienceand uptime, implementations will likely have a server client listening for NOSTR events."
What does Marketplace mean?,"Marketplacesoftware should be entirely clientside, either as a stand-alone app, or as a purely frontend webpage. Acustomersubscribes to different merchant NOSTR public keys, and thosemerchantsstallsandproductsbecome listed and searchable. The marketplace client is like any other ecommerce site, with basket and checkout.Marketplacesmay also wish to include acustomersupport area for direct message communication withmerchants."
What does Merchantpublishing/updating products (event) mean?,"A merchant can publish these events:
| Kind      |                    | Description                                                                                                     |
| --------- | ------------------ | --------------------------------------------------------------------------------------------------------------- |
|0|set_meta| The merchant description (similar with anynostrpublic key).                                                 |
|30017|set_stall| Create or update a stall.                                                                                       |
|30018|set_product| Create or update a product.                                                                                     |
|4|direct_message| Communicate with the customer. The messages can be plain-text or JSON.                                          |
|5|delete| Delete a product or a stall.                                                                                    |"
What does Event30017: Create or update a stall. mean?,"Event Content

json
{
""id"": <string, id generated by the merchant. Sequential IDs (`0`, `1`, `2`...) are discouraged>,
""name"": <string, stall name>,
""description"": <string (optional), stall description>,
""currency"": <string, currency used>,
""shipping"": [
{
""id"": <string, id of the shipping zone, generated by the merchant>,
""name"": <string (optional), zone name>,
""cost"": <float, base cost for shipping. The currency is defined at the stall level>,
""regions"": [<string, regions included in this zone>]
}
]
}

Fields that are not self-explanatory:
-shipping:
- an array with possible shipping zones for this stall.
- the customer MUST choose exactly one of those shipping zones.
- shipping to different zones can have different costs. For some goods (digital for example) the cost can be zero.
- theidis an internal value used by the merchant. This value must be sent back as the customer selection.
- each shipping zone contains the base cost for orders made to that shipping zone, but a specific shipping cost per
product can also be specified if the shipping cost for that product is higher than what's specified by the base cost.

Event Tags

jsonc
{
""tags"": [[""d"", <string, id of stall]],
// other fields...
}- thedtag is required, its value MUST be the same as the stallid."
What does Event30018: Create or update a product mean?,"Event Content

json
{
""id"": <string, id generated by the merchant (sequential ids are discouraged)>,
""stall_id"": <string, id of the stall to which this product belong to>,
""name"": <string, product name>,
""description"": <string (optional), product description>,
""images"": <[string], array of image URLs, optional>,
""currency"": <string, currency used>,
""price"": <float, cost of product>,
""quantity"": <int or null, available items>,
""specs"": [
[<string, spec key>, <string, spec value>]
],
""shipping"": [
{
""id"": <string, id of the shipping zone (must match one of the zones defined for the stall)>,
""cost"": <float, extra cost for shipping. The currency is defined at the stall level>
}
]
}

Fields that are not self-explanatory:
-quantitycan be null in the case of items with unlimited availability, like digital items, or services
-specs:
- an optional array of key pair values. It allows for the Customer UI to present product specifications in a structure mode. It also allows comparison between products
- eg:[[""operating_system"", ""Android 12.0""], [""screen_size"", ""6.4 inches""], [""connector_type"", ""USB Type C""]]

```
_Open_: better to move `spec` in the `tags` section of the event?
```

- shipping:
- anoptionalarray of extra costs to be used per shipping zone, only for products that require special shipping costs to be added to the base shipping cost defined in the stall
- theidshould match the id of the shipping zone, as defined in theshippingfield of the stall
- to calculate the total cost of shipping for an order, the user will choose a shipping option during checkout, and then the client must consider this costs:thebase cost from the stallfor the chosen shipping optionthe result of multiplying the product units by theshipping costs specified in the product, if any.
- thebase cost from the stallfor the chosen shipping option
- the result of multiplying the product units by theshipping costs specified in the product, if any.

Event Tags

jsonc
""tags"": [
[""d"", <string, id of product],
[""t"", <string (optional), product category],
[""t"", <string (optional), product category],
// other fields...
],
...

- thedtag is required, its value MUST be the same as the productid.
- thettag is as searchable tag, it represents different categories that the product can be part of (food,fruits). Multiplettags can be present."
What does Checkout events mean?,"All checkout events are sent as JSON strings usingNIP-04.

Themerchantand thecustomercan exchange JSON messages that represent different actions. EachJSONmessageMUSThave atypefield indicating the what the JSON represents. Possible types:

| Message Type | Sent By  | Description         |
|--------------|----------|---------------------|
| 0            | Customer | New Order           |
| 1            | Merchant | Payment Request     |
| 2            | Merchant | Order Status Update |"
What does Step 1:customerorder (event) mean?,"The below JSON goes in content ofNIP-04.

```json
{
""id"":,
""type"": 0,
""name"":,
""address"":,
""message"":,
""contact"": {
""nostr"": <32-bytes hex of a pubkey>,
""phone"":,
""email"":},
""items"": [
{
""product_id"":,
""quantity"":}
],
""shipping_id"":}

```

Open: iscontact.nostrrequired?"
What does Step 2:merchantrequest payment (event) mean?,"Sent back from the merchant for payment. Any payment option is valid that the merchant can check.

The below JSON goes incontentofNIP-04.

payment_options/typeinclude:

- urlURL to a payment page, stripe, paypal, btcpayserver, etc
- btconchain bitcoin address
- lnbitcoin lightning invoice
- lnurlbitcoin lnurl-pay

json
{
""id"": <string, id of the order>,
""type"": 1,
""message"": <string, message to customer, optional>,
""payment_options"": [
{
""type"": <string, option type>,
""link"": <string, url, btc address, ln invoice, etc>
},
{
""type"": <string, option type>,
""link"": <string, url, btc address, ln invoice, etc>
},
{
""type"": <string, option type>,
""link"": <string, url, btc address, ln invoice, etc>
}
]
}"
What does Step 3:merchantverify payment/shipped (event) mean?,"Once payment has been received and processed.

The below JSON goes incontentofNIP-04.

json
{
""id"": <string, id of the order>,
""type"": 2,
""message"": <string, message to customer>,
""paid"": <bool: has received payment>,
""shipped"": <bool: has been shipped>,
}"
What does Customize Marketplace mean?,"Create a customized user experience using thenaddrfromNIP-19. The use ofnaddrenables easy sharing of marketplace events while incorporating a rich set of metadata. This metadata can include relays, merchant profiles, and more. Subsequently, it allows merchants to be grouped into a market, empowering the market creator to configure the marketplace's user interface and user experience, and share that marketplace. This customization can encompass elements such as market name, description, logo, banner, themes, and even color schemes, offering a tailored and unique marketplace experience."
What does Event30019: Create or update marketplace UI/UX mean?,"Event Content

jsonc
{
""name"": <string (optional), market name>,
""about"": <string (optional), market description>,
""ui"": {
""picture"": <string (optional), market logo image URL>,
""banner"": <string (optional), market logo banner URL>,
""theme"": <string (optional), market theme>,
""darkMode"": <bool, true/false>
},
""merchants"": [array of pubkeys (optional)],
// other fields...
}

This event leverages naddr to enable comprehensive customization and sharing of marketplace configurations, fostering a unique and engaging marketplace environment."
What does Event30020: Create or update a product sold as an auction mean?,"Event Content:json
{
""id"": <String, UUID generated by the merchant. Sequential IDs (`0`, `1`, `2`...) are discouraged>,
""stall_id"": <String, UUID of the stall to which this product belong to>,
""name"": <String, product name>,
""description"": <String (optional), product description>,
""images"": <[String], array of image URLs, optional>,
""starting_bid"": <int>,
""start_date"": <int (optional) UNIX timestamp, date the auction started / will start>,
""duration"": <int, number of seconds the auction will run for, excluding eventual time extensions that might happen>,
""specs"": [
[<String, spec key>, <String, spec value>]
],
""shipping"": [
{
""id"": <String, UUID of the shipping zone. Must match one of the zones defined for the stall>,
""cost"": <float, extra cost for shipping. The currency is defined at the stall level>
}
]
}

- Thestart_datecan be set to a date in the future if the auction is scheduled to start on that date, or can be omitted if the start date is unknown/hidden. If the start date is not specified, the auction will have to be edited later to set an actual date.
- The auction runs for an initial number of seconds after thestart_date, specified byduration."
What does Event1021: Bid mean?,"jsonc
{
""content"": <int, amount of sats>,
""tags"": [[""e"", <event ID of the auction to bid on>]],
// other fields...
}

Bids are simply events of kind1021with acontentfield specifying the amount, in the currency of the auction. Bids must reference an auction."
What does Event1022: Bid confirmation mean?,"Event Content:

json
{
""status"": <String, ""accepted"" | ""rejected"" | ""pending"" | ""winner"">,
""message"": <String (optional)>,
""duration_extended"": <int (optional), number of seconds>
}

Event Tags:json
""tags"": [[""e"" <event ID of the bid being confirmed>], [""e"", <event ID of the auction>]],

Bids should be confirmed by the merchant before being considered as valid by other clients. So clients should subscribe tobid confirmationevents (kind1022) for every auction that they follow, in addition to the actual bids and should check that the pubkey of the bid confirmation matches the pubkey of the merchant (in addition to checking the signature).

Thecontentfield is a JSON which includesat leastastatus.winneris how thewinning bidis replied to after the auction ends and the winning bid is picked by the merchant.

The reasons for which a bid can be marked asrejectedorpendingare up to the merchant's implementation and configuration - they could be anything from basic validation errors (amount too low) to the bidder being blacklisted or to the bidder lacking sufficienttrust, which could lead to the bid being marked aspendinguntil sufficient verification is performed. The difference between the two is thatpendingbidsmightget approved after additional steps are taken by the bidder, whereasrejectedbids can not be later approved.

An additionalmessagefield can appear in thecontentJSON to give further context as of why a bid isrejectedorpending.

Another thing that can happen is - if bids happen very close to the end date of the auction - for the merchant to decide to extend the auction duration for a few more minutes. This is done by passing aduration_extendedfield as part of a bid confirmation, which would contain a number of seconds by which the initial duration is extended. So the actual end date of an auction is alwaysstart_date + duration + (SUM(c.duration_extended) FOR c in all confirmations."
What does Customer support events mean?,"Customer support is handled over whatever communication method was specified. If communicating via nostr,NIP-04is used."
What does Additional mean?,Standard data models can be foundhere
What does Event Treatment mean?,"finalmandatory

Moved toNIP-01."
What does Private Direct Messages mean?,"draftoptional

This NIP defines an encrypted direct messaging scheme usingNIP-44encryption andNIP-59seals and gift wraps."
What does Direct Message Kind mean?,"Kind14is a chat message.ptags identify one or more receivers of the message.

jsonc
{
""id"": ""<usual hash>"",
""pubkey"": ""<sender-pubkey>"",
""created_at"": ""<current-time>"",
""kind"": 14,
""tags"": [
[""p"", ""<receiver-1-pubkey>"", ""<relay-url>""],
[""p"", ""<receiver-2-pubkey>"", ""<relay-url>""],
[""e"", ""<kind-14-id>"", ""<relay-url>""] // if this is a reply
[""subject"", ""<conversation-title>""],
// rest of tags...
],
""content"": ""<message-in-plain-text>"",
}

.contentMUST be plain text. Fieldsidandcreated_atare required.

Anetag denotes the direct parent message this post is replying to.

qtags MAY be used when citing events in the.contentwithNIP-21.

json
[""q"", ""<event-id> or <event-address>"", ""<relay-url>"", ""<pubkey-if-a-regular-event>""]

Kind14s MUST never be signed. If it is signed, the message might leak to relays and becomefully public."
What does File Message Kind mean?,"jsonc
{
""id"": ""<usual hash>"",
""pubkey"": ""<sender-pubkey>"",
""created_at"": ""<current-time>"",
""kind"": 15,
""tags"": [
[""p"", ""<receiver-1-pubkey>"", ""<relay-url>""],
[""p"", ""<receiver-2-pubkey>"", ""<relay-url>""],
[""e"", ""<kind-14-id>"", ""<relay-url>"", ""reply""], // if this is a reply
[""subject"", ""<conversation-title>""],
[""file-type"", ""<file-mime-type>""],
[""encryption-algorithm"", ""<encryption-algorithm>""],
[""decryption-key"", ""<decryption-key>""],
[""decryption-nonce"", ""<decryption-nonce>""],
[""x"", ""<the SHA-256 hexencoded string of the file>""],
// rest of tags...
],
""content"": ""<file-url>""
}

Kind15is used for sending encrypted file event messages:

- file-type: Specifies the MIME type of the attached file (e.g.,image/jpeg,audio/mpeg, etc.) before encryption.
- encryption-algorithm: Indicates the encryption algorithm used for encrypting the file. Supported algorithms:aes-gcm.
- decryption-key: The decryption key that will be used by the recipient to decrypt the file.
- decryption-nonce: The decryption nonce that will be used by the recipient to decrypt the file.
- content: The URL of the file (<file-url>).
- xcontaining the SHA-256 hexencoded string of the encrypted file.
- oxcontaining the SHA-256 hexencoded string of the file before encryption.
- size(optional) size of the encrypted file in bytes
- dim(optional) size in pixels in the form<width>x<height>
- blurhash(optional) theblurhashto show while the client is loading the file
- thumb(optional) URL of thumbnail with same aspect ratio (encrypted with the same key, nonce)
- fallback(optional) zero or more fallback file sources in caseurlfails (encrypted with the same key, nonce)

Just like kind14, kind15s MUST never be signed."
What does Chat Rooms mean?,"The set ofpubkey+ptags defines a chat room. If a newptag is added or a current one is removed, a new room is created with a clean message history.

Clients SHOULD render messages of the same room in a continuous thread.

An optionalsubjecttag defines the current name/topic of the conversation. Any member can change the topic by simply submitting a newsubjectto an existingpubkey+ptags room. There is no need to sendsubjectin every message. The newestsubjectin the chat room is the subject of the conversation."
What does Encrypting mean?,"FollowingNIP-59, theunsignedkind:14&kind:15chat messages must be sealed (kind:13) and then gift-wrapped (kind:1059) to each receiver and the sender individually.

js
{
""id"": ""<usual hash>"",
""pubkey"": randomPublicKey,
""created_at"": randomTimeUpTo2DaysInThePast(),
""kind"": 1059, // gift wrap
""tags"": [
[""p"", receiverPublicKey, ""<relay-url>""] // receiver
],
""content"": nip44Encrypt(
{
""id"": ""<usual hash>"",
""pubkey"": senderPublicKey,
""created_at"": randomTimeUpTo2DaysInThePast(),
""kind"": 13, // seal
""tags"": [], // no tags
""content"": nip44Encrypt(unsignedKind14, senderPrivateKey, receiverPublicKey),
""sig"": ""<signed by senderPrivateKey>""
},
randomPrivateKey, receiverPublicKey
),
""sig"": ""<signed by randomPrivateKey>""
}

The encryption algorithm MUST use the latest version ofNIP-44.

Clients MUST verify if pubkey of thekind:13is the same pubkey on thekind:14, otherwise any sender can impersonate others by simply changing the pubkey onkind:14.

Clients SHOULD randomizecreated_atin up to two days in the past in both the seal and the gift wrap to make sure grouping bycreated_atdoesn't reveal any metadata.

The gift wrap'sptag can be the receiver's main pubkey or an alias key created to receive DMs without exposing the receiver's identity.

Clients CAN offer disappearing messages by setting anexpirationtag in the gift wrap of each receiver or by not generating a gift wrap to the sender's public key"
What does Publishing mean?,"Kind10050indicates the user's preferred relays to receive DMs. The event MUST include a list ofrelaytags with relay URIs.

jsonc
{
""kind"": 10050,
""tags"": [
[""relay"", ""wss://inbox.nostr.wine""],
[""relay"", ""wss://myrelay.nostr1.com""],
],
""content"": """",
// other fields...
}

Clients SHOULD publish kind14events to the10050-listed relays. If that is not found that indicates the user is not ready to receive messages under this NIP and clients shouldn't try."
What does Relays mean?,"It's advisable that relays do not servekind:1059to clients other than the ones tagged in them.

It's advisable that users choose relays that conform to these practices.

Clients SHOULD guide users to keepkind:10050lists small (1-3 relays) and SHOULD spread it to as many relays as viable."
What does Benefits & Limitations mean?,"This NIP offers the following privacy and security features:

- No Metadata Leak: Participant identities, each message's real date and time, event kinds, and other event tags are all hidden from the public. Senders and receivers cannot be linked with public information alone.
- No Public Group Identifiers: There is no public central queue, channel or otherwise converging identifier to correlate or count all messages in the same group.
- No Moderation: There are no group admins: no invitations or bans.
- No Shared Secrets: No secret must be known to all members that can leak or be mistakenly shared
- Fully Recoverable: Messages can be fully recoverable by any client with the user's private key
- Optional Forward Secrecy: Users and clients can opt-in for ""disappearing messages"".
- Uses Public Relays: Messages can flow through public relays without loss of privacy. Private relays can increase privacy further, but they are not required.
- Cold Storage: Users can unilaterally opt-in to sharing their messages with a separate key that is exclusive for DM backup and recovery.

The main limitation of this approach is having to send a separate encrypted event to each receiver. Group chats with more than 100 participants should find a more suitable messaging scheme."
What does Reposts mean?,"draftoptional

A repost is akind 6event that is used to signal to followers
that akind 1text note is worth reading.

Thecontentof a repost event isthe stringified JSON of the reposted note. It MAY also be empty, but that is not recommended.
Reposts ofNIP-70-protected events SHOULD always have an emptycontent.

The repost event MUST include anetag with theidof the note that is
being reposted. That tag MUST include a relay URL as its third entry
to indicate where it can be fetched.

The repost SHOULD include aptag with thepubkeyof the event being
reposted."
What does Quote Reposts mean?,"Quote reposts arekind 1events with an embeddedqtag of the note being
quote reposted. Theqtag ensures quote reposts are not pulled and included
as replies in threads. It also allows you to easily pull and count all of the
quotes for a post.

qtags should follow the same conventions as NIP 10etags, with the exception
of themarkargument.

[""q"", <event-id>, <relay-url>, <pubkey>]

Quote reposts MUST include theNIP-21nevent,note, ornaddrof the
event in the content."
What does Generic Reposts mean?,"Sincekind 6reposts are reserved forkind 1contents, we usekind 16as a ""generic repost"", that can include any kind of event inside other thankind 1.

kind 16reposts SHOULD contain aktag with the stringified kind number
of the reposted event as its value."
What does bech32-encoded entities mean?,"draftoptional

This NIP standardizes bech32-formatted strings that can be used to display keys, ids and other information in clients. These formats are not meant to be used anywhere in the core protocol, they are only meant for displaying to users, copy-pasting, sharing, rendering QR codes and inputting data.

It is recommended that ids and keys are stored in either hex or binary format, since these formats are closer to what must actually be used the core protocol."
What does Bare keys and ids mean?,"To prevent confusion and mixing between private keys, public keys and event ids, which are all 32 byte strings. bech32-(not-m) encoding with different prefixes can be used for each of these entities.

These are the possible bech32 prefixes:

- npub: public keys
- nsec: private keys
- note: note ids

Example: the hex public key3bf0c63fcb93463407af97a5e5ee64fa883d107ef9e558472c4eb9aaaefa459dtranslates tonpub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6.

The bech32 encodings of keys and ids are not meant to be used inside the standard NIP-01 event formats or inside the filters, they're meant for human-friendlier display and input only. Clients should still accept keys in both hex and npub format for now, and convert internally."
What does Shareable identifiers with extra metadata mean?,"When sharing a profile or an event, an app may decide to include relay information and other metadata such that other apps can locate and display these entities more easily.

For these events, the contents are a binary-encoded list ofTLV(type-length-value), withTandLbeing 1 byte each (uint8, i.e. a number in the range of 0-255), andVbeing a sequence of bytes of the size indicated byL.

These are the possible bech32 prefixes withTLV:

- nprofile: a nostr profile
- nevent: a nostr event
- naddr: a nostraddressable eventcoordinate
- nrelay: a nostr relay (deprecated)

These possible standardizedTLVtypes are indicated here:

- 0:special
- depends on the bech32 prefix:fornprofileit will be the 32 bytes of the profile public keyforneventit will be the 32 bytes of the event idfornaddr, it is the identifier (the""d""tag) of the event being referenced. For normal replaceable events use an empty string.
- fornprofileit will be the 32 bytes of the profile public key
- forneventit will be the 32 bytes of the event id
- fornaddr, it is the identifier (the""d""tag) of the event being referenced. For normal replaceable events use an empty string.
- 1:relay
- fornprofile,neventandnaddr,optionally, a relay in which the entity (profile or event) is more likely to be found, encoded as ascii
- this may be included multiple times
- 2:author
- fornaddr, the 32 bytes of the pubkey of the event
- fornevent,optionally, the 32 bytes of the pubkey of the event
- 3:kind
- fornaddr, the 32-bit unsigned integer of the kind, big-endian
- fornevent,optionally, the 32-bit unsigned integer of the kind, big-endian"
What does Notes mean?,"- npubkeys MUST NOT be used in NIP-01 events or in NIP-05 JSON responses, only the hex format is supported there.
- When decoding a bech32-formatted string, TLVs that are not recognized or supported should be ignored, rather than causing an error."
What does Command Results mean?,"finalmandatory

Moved toNIP-01."
What does nostr:URI scheme mean?,"draftoptional

This NIP standardizes the usage of a common URI scheme for maximum interoperability and openness in the network.

The scheme isnostr:.

The identifiers that come after are expected to be the same as those defined inNIP-19(exceptnsec)."
What does Linking HTML pages to Nostr entities mean?,"<link>tags withrel=""alternate""can be used to associate webpages to Nostr events, in cases where the same content is served via the two mediums (for example, a web server that exposes Markdown articles both as HTML pages and as `kind:30023' events served under itself as a relay or through some other relay). For example:

<head>
<link rel=""alternate"" href=""nostr:naddr1qqyrzwrxvc6ngvfkqyghwumn8ghj7enfv96x5ctx9e3k7mgzyqalp33lewf5vdq847t6te0wvnags0gs0mu72kz8938tn24wlfze6qcyqqq823cph95ag"" />
</head>

Likewise,<link>tags withrel=""me""orrel=""author""can be used to assign authorship of webpages to Nostr profiles. For example:

<head>
<link rel=""me"" href=""nostr:nprofile1qyxhwumn8ghj7mn0wvhxcmmvqyd8wumn8ghj7un9d3shjtnhv4ehgetjde38gcewvdhk6qpq80cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwswpnfsn"" />
</head>"
What does Comment mean?,"draftoptional

A comment is a threading note always scoped to a root event or anI-tag.

It useskind:1111with plaintext.content(no HTML, Markdown, or other formatting).

Comments MUST point to the root scope using uppercase tag names (e.g.K,E,AorI)
and MUST point to the parent item with lowercase ones (e.g.k,e,aori).

Comments MUST point to the authors when one is available (i.e. tagging a nostr event).Pfor the root scope
andpfor the author of the parent item.

```jsonc
{
""kind"": 1111,
""content"": """",
""tags"": [
// root scope: event addresses, event ids, or I-tags.
["""", """", """", """"],
// the root item kind
[""K"", """"],

```
// pubkey of the author of the root scope event
[""P"", ""<root-pubkey>"", ""relay-url-hint""],

// parent item: event addresses, event ids, or i-tags.
[""<a, e, i>"", ""<address, id or i-value>"", ""<relay or web page hint>"", ""<parent event's pubkey, if an e tag>""],
// parent item kind
[""k"", ""<parent comment kind>""],

// parent item pubkey
[""p"", ""<parent-pubkey>"", ""relay-url-hint""]
```

]
// other fields
}
```

TagsKandkMUST be present to define the event kind of the root and the parent items.

Ianditags create scopes for hashtags, geohashes, URLs, and other external identifiers.

The possible values foritags – andktags, when related to an extenal identity – are listed onNIP-73.
Their uppercase versions use the same type of values but relate to the root item instead of the parent one.

qtags MAY be used when citing events in the.contentwithNIP-21.

json
[""q"", ""<event-id> or <event-address>"", ""<relay-url>"", ""<pubkey-if-a-regular-event>""]

ptags SHOULD be used when mentioning pubkeys in the.contentwithNIP-21.

Comments MUST NOT be used to reply to kind 1 notes.NIP-10should instead be followed."
What does Long-form Content mean?,"draftoptional

This NIP defineskind:30023(anaddressable event) for long-form text content, generally referred to as ""articles"" or ""blog posts"".kind:30024has the same structure askind:30023and is used to save long form drafts.

""Social"" clients that deal primarily withkind:1notes should not be expected to implement this NIP."
What does Format mean?,"The.contentof these events should be a string text in Markdown syntax. To maximize compatibility and readability between different clients and devices, any client that is creating long form notes:

- MUST NOT hard line-break paragraphs of text, such as arbitrary line breaks at 80 column boundaries.
- MUST NOT support adding HTML to Markdown."
What does Metadata mean?,"For the date of the last update the.created_atfield should be used, for ""tags""/""hashtags"" (i.e. topics about which the event might be of relevance) thettag should be used.

Other metadata fields can be added as tags to the event as necessary. Here we standardize 4 that may be useful, although they remain strictly optional:

- ""title"", for the article title
- ""image"", for a URL pointing to an image to be shown along with the title
- ""summary"", for the article summary
- ""published_at"", for the timestamp in unix seconds (stringified) of the first time the article was published"
What does Editability mean?,"These articles are meant to be editable, so they should include adtag with an identifier for the article. Clients should take care to only publish and read these events from relays that implement that. If they don't do that they should also take care to hide old versions of the same article they may receive."
What does Linking mean?,The article may be linked to using theNIP-19naddrcode along with theatag.
What does References mean?,"References to other Nostr notes, articles or profiles must be made according toNIP-27, i.e. by usingNIP-21nostr:...links and optionally adding tags for these (see example below)."
What does Example Event mean?,"json
{
""kind"": 30023,
""created_at"": 1675642635,
""content"": ""Lorem [ipsum][nostr:nevent1qqst8cujky046negxgwwm5ynqwn53t8aqjr6afd8g59nfqwxpdhylpcpzamhxue69uhhyetvv9ujuetcv9khqmr99e3k7mg8arnc9] dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\nRead more at nostr:naddr1qqzkjurnw4ksz9thwden5te0wfjkccte9ehx7um5wghx7un8qgs2d90kkcq3nk2jry62dyf50k0h36rhpdtd594my40w9pkal876jxgrqsqqqa28pccpzu."",
""tags"": [
[""d"", ""lorem-ipsum""],
[""title"", ""Lorem Ipsum""],
[""published_at"", ""1296962229""],
[""t"", ""placeholder""],
[""e"", ""b3e392b11f5d4f28321cedd09303a748acfd0487aea5a7450b3481c60b6e4f87"", ""wss://relay.example.com""],
[""a"", ""30023:a695f6b60119d9521934a691347d9f78e8770b56da16bb255ee286ddf9fda919:ipsum"", ""wss://relay.nostr.org""]
],
""pubkey"": ""..."",
""id"": ""...""
}"
What does Replies & Comments mean?,Replies tokind 30023MUST useNIP-22kind 1111comments.
What does Extra metadata fields and tags mean?,"draftoptional

This NIP keeps track of extra optional fields that can added to events which are not defined anywhere else but have becomede factostandards and other minor implementation possibilities that do not deserve their own NIP and do not have a place in other NIPs."
What does kind 0 mean?,"These are extra fields not specified in NIP-01 that may be present in the stringified JSON of metadata events:

- display_name: an alternative, bigger name with richer characters thanname.nameshould always be set regardless of the presence ofdisplay_namein the metadata.
- website: a web URL related in any way to the event author.
- banner: an URL to a wide (~1024x768) picture to be optionally displayed in the background of a profile screen.
- bot: a boolean to clarify that the content is entirely or partially the result of automation, such as with chatbots or newsfeeds.
- birthday: an object representing the author's birth date. The format is { ""year"": number, ""month"": number, ""day"": number }. Each field MAY be omitted."
What does Deprecated fields mean?,"These are fields that should be ignored or removed when found in the wild:

- displayName: usedisplay_nameinstead.
- username: usenameinstead."
What does kind 3 mean?,These are extra fields not specified in NIP-02 that may be present in the stringified JSON of follow events:
What does tags mean?,"These tags may be present in multiple event kinds. Whenever a different meaning is not specified by some more specific NIP, they have the following meanings:

- r: a web URL the event is referring to in some way.
- i: an external id the event is referring to in some way - seeNIP-73.
- title: name ofNIP-51sets,NIP-52calendar event,NIP-53live event orNIP-99listing.
- t: a hashtag. The value MUST be a lowercase string."
What does Reactions mean?,"draftoptional

A reaction is akind 7event that is used to indicate user reactions to other events. A
reaction'scontentfield MUST include user-generated-content indicating the value of the
reaction (conventionally+,-, or an emoji).

A reaction withcontentset to+or an empty string MUST be interpreted as a ""like"" or ""upvote"".
A reaction withcontentset to-MUST be interpreted as a ""dislike"" or ""downvote"".

A reaction withcontentset to an emoji orNIP-30custom emoji SHOULD NOT be interpreted
as a ""like"" or ""dislike"". Clients MAY instead display this emoji reaction on the post."
What does Reactions to a website mean?,"If the target of the reaction is a website, the reaction MUST be akind 17event and MUST include anrtag with the website's URL.

jsonc
{
""kind"": 17,
""content"": ""⭐"",
""tags"": [
[""r"", ""https://example.com/""]
],
// other fields...
}

URLs SHOULD benormalized, so that reactions to the same website are not omitted from queries.
A fragment MAY be attached to the URL, to react to a section of the page.
It should be noted that a URL with a fragment is not considered to be the same URL as the original."
What does Custom Emoji Reaction mean?,"The client may specify a custom emoji (NIP-30):shortcode:in the
reaction content. The client should refer to the emoji tag and render the
content as an emoji if shortcode is specified.

jsonc
{
""kind"": 7,
""content"": "":soapbox:"",
""tags"": [
[""emoji"", ""soapbox"", ""https://gleasonator.com/emoji/Gleasonator/soapbox.png""]
],
// other fields...
}

The content can be set only one:shortcode:. And emoji tag should be one."
What does Delegated Event Signing mean?,"draftoptional

This NIP defines how events can be delegated so that they can be signed by other keypairs.

Another application of this proposal is to abstract away the use of the 'root' keypairs when interacting with clients. For example, a user could generate new keypairs for each client they wish to use and authorize those keypairs to generate events on behalf of their root pubkey, where the root keypair is stored in cold storage."
What does Introducing the 'delegation' tag mean?,"This NIP introduces a new tag:delegationwhich is formatted as follows:

json
[
""delegation"",
<pubkey of the delegator>,
<conditions query string>,
<delegation token: 64-byte Schnorr signature of the sha256 hash of the delegation string>
]"
What does Delegation Token mean?,"Thedelegation tokenshould be a 64-byte Schnorr signature of the sha256 hash of the following string:

nostr:delegation:<pubkey of publisher (delegatee)>:<conditions query string>"
What does Conditions Query String mean?,"The following fields and operators are supported in the above query string:

Fields:
1.kind-Operators:
-=${KIND_NUMBER}- delegatee may only sign events of this kind
2.created_at-Operators:
-<${TIMESTAMP}- delegatee may only sign events createdbeforethe specified timestamp
->${TIMESTAMP}- delegatee may only sign events createdafterthe specified timestamp

In order to create a single condition, you must use a supported field and operator. Multiple conditions can be used in a single query string, including on the same field. Conditions must be combined with&.

For example, the following condition strings are valid:

- kind=1&created_at<1675721813
- kind=0&kind=1&created_at>1675721813
- kind=1&created_at>1674777689&created_at<1675721813

For the vast majority of use-cases, it is advisable that:
1. Query strings should include acreated_ataftercondition reflecting the current time, to prevent the delegatee from publishing historic notes on the delegator's behalf.
2. Query strings should include acreated_atbeforecondition that is not empty and is not some extremely distant time in the future. If delegations are not limited in time scope, they expose similar security risks to simply using the root key for authentication."
What does Delegator: mean?,"privkey: ee35e8bb71131c02c1d7e73231daa48e9953d329a4b701f7133c8f46dd21139c
pubkey:  8e0d3d3eb2881ec137a11debe736a9086715a8c8beeeda615780064d68bc25dd"
What does Delegatee: mean?,"privkey: 777e4f60b4aa87937e13acc84f7abcc3c93cc035cb4c1e9f7a9086dd78fffce1
pubkey:  477318cfb5427b9cfc66a9fa376150c1ddbc62115ae27cef72417eb959691396
```

Delegation string to grant note publishing authorization to the delegatee (477318cf) from now, for the next 30 days, given the current timestamp is1674834236.json
nostr:delegation:477318cfb5427b9cfc66a9fa376150c1ddbc62115ae27cef72417eb959691396:kind=1&created_at>1674834236&created_at<1677426236

The delegator (8e0d3d3e) then signs a SHA256 hash of the above delegation string, the result of which is the delegation token:6f44d7fe4f1c09f3954640fb58bd12bae8bb8ff4120853c4693106c82e920e2b898f1f9ba9bd65449a987c39c0423426ab7b53910c0c6abfb41b30bc16e5f524

The delegatee (477318cf) can now construct an event on behalf of the delegator (8e0d3d3e). The delegatee then signs the event with its own private key and publishes.json
{
""id"": ""e93c6095c3db1c31d15ac771f8fc5fb672f6e52cd25505099f62cd055523224f"",
""pubkey"": ""477318cfb5427b9cfc66a9fa376150c1ddbc62115ae27cef72417eb959691396"",
""created_at"": 1677426298,
""kind"": 1,
""tags"": [
[
""delegation"",
""8e0d3d3eb2881ec137a11debe736a9086715a8c8beeeda615780064d68bc25dd"",
""kind=1&created_at>1674834236&created_at<1677426236"",
""6f44d7fe4f1c09f3954640fb58bd12bae8bb8ff4120853c4693106c82e920e2b898f1f9ba9bd65449a987c39c0423426ab7b53910c0c6abfb41b30bc16e5f524""
]
],
""content"": ""Hello, world!"",
""sig"": ""633db60e2e7082c13a47a6b19d663d45b2a2ebdeaf0b4c35ef83be2738030c54fc7fd56d139652937cdca875ee61b51904a1d0d0588a6acd6168d7be2909d693""
}

The event should be considered a valid delegation if the conditions are satisfied (kind=1,created_at>1674834236andcreated_at<1677426236in this example) and, upon validation of the delegation token, are found to be unchanged from the conditions in the original delegation string.

Clients should display the delegated note as if it was published directly by the delegator (8e0d3d3e)."
What does Relay & Client Support mean?,"Relays should answer requests such as[""REQ"", """", {""authors"": [""A""]}]by querying both thepubkeyand delegation tags[1]value.

Relays SHOULD allow the delegator (8e0d3d3e) to delete the events published by the delegatee (477318cf)."
What does Text Note References mean?,"draftoptional

This document standardizes the treatment given by clients of inline references of other events and profiles inside the.contentof any event that has readable text in its.content(such as kinds 1 and 30023).

When creating an event, clients should include mentions to other profiles and to other events in the middle of the.contentusingNIP-21codes, such asnostr:nprofile1qqsw3dy8cpu...6x2argwghx6egsqstvg.

IncludingNIP-18's quote tags ([""q"", ""<event-id> or <event-address>"", ""<relay-url>"", ""<pubkey-if-a-regular-event>""]) for each reference is optional, clients should do it whenever they want the profile being mentioned to be notified of the mention, or when they want the referenced event to recognize their mention as a reply.

A reader client that receives an event with suchnostr:...mentions in its.contentcan do any desired context augmentation (for example, linking to the profile or showing a preview of the mentioned event contents) it wants in the process. If turning such mentions into links, they could become internal links,NIP-21links or direct links to web clients that will handle these references."
What does Example of a profile mention process mean?,"Suppose Bob is writing a note in a client that has search-and-autocomplete functionality for users that is triggered when they write the character@.

As Bob types""hello @mat""the client will prompt him to autocomplete withmattn's profile, showing a picture and name.

Bob presses ""enter"" and now he sees his typed note as""hello @mattn"",@mattnis highlighted, indicating that it is a mention. Internally, however, the event looks like this:

json
{
""content"": ""hello nostr:nprofile1qqszclxx9f5haga8sfjjrulaxncvkfekj097t6f3pu65f86rvg49ehqj6f9dh"",
""created_at"": 1679790774,
""id"": ""f39e9b451a73d62abc5016cffdd294b1a904e2f34536a208874fe5e22bbd47cf"",
""kind"": 1,
""pubkey"": ""79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"",
""sig"": ""f8c8bab1b90cc3d2ae1ad999e6af8af449ad8bb4edf64807386493163e29162b5852a796a8f474d6b1001cddbaac0de4392838574f5366f03cc94cf5dfb43f4d"",
""tags"": [
[
""p"",
""2c7cc62a697ea3a7826521f3fd34f0cb273693cbe5e9310f35449f43622a5cdc""
]
]
}

(Alternatively, the mention could have been anostr:npub1...URL.)

After Bob publishes this event and Carol sees it, her client will initially display the.contentas it is, but later it will parse the.contentand see that there is anostr:URL in there, decode it, extract the public key from it (and possibly relay hints), fetch that profile from its internal database or relays, then replace the full URL with the name@mattn, with a link to the internal page view for that profile."
What does Verbose and probably unnecessary considerations mean?,"- The example above was very concrete, but it doesn't mean all clients have to implement the same flow. There could be clients that do not support autocomplete at all, so they just allow users to paste rawNIP-19codes into the body of text, then prefix these withnostr:before publishing the event.
- The flow for referencing other events is similar: a user could paste anote1...ornevent1...code and the client will turn that into anostr:note1...ornostr:nevent1...URL. Then upon reading such references the client may show the referenced note in a preview box or something like that -- or nothing at all.
- Other display procedures can be employed: for example, if a client that is designed for dealing with onlykind:1text notes sees, for example, akind:30023nostr:naddr1...URL reference in the.content, it can, for example, decide to turn that into a link to some hardcoded webapp capable of displaying such events.
- Clients may give the user the option to include or not include tags for mentioned events or profiles. If someone wants to mentionmattnwithout notifying them, but still have a nice augmentable/clickable link to their profile inside their note, they can instruct their client tonotcreate a[""p"", ...]tag for that specific mention.
- In the same way, if someone wants to reference another note but their reference is not meant to show up along other replies to that same note, their client can choose to not include a corresponding[""e"", ...]tag for any givennostr:nevent1...URL inside.content. Clients may decide to expose these advanced functionalities to users or be more opinionated about things."
What does Public Chat mean?,"draftoptional

This NIP defines new event kinds for public chat channels, channel messages, and basic client-side moderation.

It reserves five event kinds (40-44) for immediate use:

- 40 - channel create
- 41 - channel metadata
- 42 - channel message
- 43 - hide message
- 44 - mute user

Client-centric moderation gives client developers discretion over what types of content they want included in their apps, while imposing no additional requirements on relays."
What does Kind 40: Create channel mean?,"Create a public chat channel.

In the channel creationcontentfield, Client SHOULD include basic channel metadata (name,about,pictureandrelaysas specified in kind 41).

jsonc
{
""content"": ""{\""name\"": \""Demo Channel\"", \""about\"": \""A test channel.\"", \""picture\"": \""https://placekitten.com/200/200\"", \""relays\"": [\""wss://nos.lol\"", \""wss://nostr.mom\""]}"",
// other fields...
}"
What does Kind 41: Set channel metadata mean?,"Update a channel's public metadata.

Kind 41 is used to update the metadata without modifying the event id for the channel. Only the most recent kind 41 peretag value MAY be available.

Clients SHOULD ignore kind 41s from pubkeys other than the kind 40 pubkey.

Clients SHOULD support basic metadata fields:

- name- string - Channel name
- about- string - Channel description
- picture- string - URL of channel picture
- relays- array - List of relays to download and broadcast events to

Clients MAY add additional metadata fields.

Clients SHOULD useNIP-10marked ""e"" tags to recommend a relay.

It is also possible to set the category name using the ""t"" tag. This category name can be searched and filtered.

jsonc
{
""content"": ""{\""name\"": \""Updated Demo Channel\"", \""about\"": \""Updating a test channel.\"", \""picture\"": \""https://placekitten.com/201/201\"", \""relays\"": [\""wss://nos.lol\"", \""wss://nostr.mom\""]}"",
""tags"": [
[""e"", <channel_create_event_id>, <relay-url>, ""root""],
[""t"", <category_name-1>],
[""t"", <category_name-2>],
[""t"", <category_name-3>],
],
// other fields...
}"
What does Kind 42: Create channel message mean?,"Send a text message to a channel.

Clients SHOULD useNIP-10marked ""e"" tags to recommend a relay and specify whether it is a reply or root message.

Clients SHOULD appendNIP-10""p"" tags to replies.

Root message:

jsonc
{
""content"": <string>,
""tags"": [[""e"", <kind_40_event_id>, <relay-url>, ""root""]],
// other fields...
}

Reply to another message:

jsonc
{
""content"": <string>,
""tags"": [
[""e"", <kind_40_event_id>, <relay-url>, ""root""],
[""e"", <kind_42_event_id>, <relay-url>, ""reply""],
[""p"", <pubkey>, <relay-url>],
// rest of tags...
],
// other fields...
}"
What does Kind 43: Hide message mean?,"User no longer wants to see a certain message.

Thecontentmay optionally include metadata such as areason.

Clients SHOULD hide event 42s shown to a given user, if there is an event 43 from that user matching the event 42id.

Clients MAY hide event 42s for other users other than the user who sent the event 43.

(For example, if three users 'hide' an event giving a reason that includes the word 'pornography', a Nostr client that is an iOS app may choose to hide that message for all iOS clients.)

jsonc
{
""content"": ""{\""reason\"": \""Dick pic\""}"",
""tags"": [[""e"", <kind_42_event_id>]],
// other fields...
}"
What does Kind 44: Mute user mean?,"User no longer wants to see messages from another user.

Thecontentmay optionally include metadata such as areason.

Clients SHOULD hide event 42s shown to a given user, if there is an event 44 from that user matching the event 42pubkey.

Clients MAY hide event 42s for users other than the user who sent the event 44.

jsonc
{
""content"": ""{\""reason\"": \""Posting dick pics\""}"",
""tags"": [[""p"", <pubkey>]],
// other fields...
}"
What does Relay recommendations mean?,"Clients SHOULD use the relay URLs of the metadata events.

Clients MAY use any relay URL. For example, if a relay hosting the original kind 40 event for a channel goes offline, clients could instead fetch channel data from a backup relay, or a relay that clients trust more than the original relay."
What does Motivation mean?,"If we're solving censorship-resistant communication for social media, we may as well solve it also for Telegram-style messaging.

We can bring the global conversation out from walled gardens into a true public square open to all."
What does Additional info mean?,"- Chat demo PR with fiatjaf+jb55 comments
- Conversation about NIP16"
What does Relay-based Groups mean?,"draftoptional

This NIP defines a standard for groups that are only writable by a closed set of users. They can be public for reading by external users or not.

Groups are identified by a random string of any length that serves as anid.

There is no way to create a group, what happens is just that relays (most likely when asked by users) will create rules around some specific ids so these ids can serve as an actual group, henceforth messages sent to that group will be subject to these rules.

Normally a group will originally belong to one specific relay, but the community may choose to move the group to other relays or even fork the group so it exists in different forms -- still using the sameid-- across different relays."
What does Relay-generated events mean?,"Relays are supposed to generate the events that describe group metadata and group admins. These areaddressableevents signed by the relay keypair directly, with the groupidas thedtag."
What does Group identifier mean?,"A group may be identified by a string in the format<host>'<group-id>. For example, a group withidabcdefhosted at the relaywss://groups.nostr.comwould be identified by the stringgroups.nostr.com'abcdef.

Group identifiers must be strings restricted to the charactersa-z0-9-_, and SHOULD be random in order to avoid name collisions.

When encountering just the<host>without the'<group-id>, clients MAY infer_as the group id, which is a special top-level group dedicated to relay-local discussions."
What does Thehtag mean?,"Events sent by users to groups (chat messages, text notes, moderation events etc) MUST have anhtag with the value set to the groupid."
What does Timeline references mean?,"In order to not be used out of context, events sent to these groups may contain references to previous events seen from the same relay in theprevioustag. The choice of which previous events to pick belongs to the clients. The references are to be made using the first 8 characters (4 bytes) of any event in the last 50 events seen by the user in the relay, excluding events by themselves. There can be any number of references (including zero), but it's recommended that clients include at least 3 and that relays enforce this.

This is a hack to prevent messages from being broadcasted to external relays that have forks of one group out of context. Relays are expected to reject any events that contain timeline references to events not found in their own database. Clients should also check these to keep relays honest about them."
What does Late publication mean?,Relays should prevent late publication (messages published now with a timestamp from days or even hours ago) unless they are open to receive a group forked or moved from another relay.
What does Group management mean?,"Groups can have any number of users with elevated access. These users are identified by role labels which are arbitrarily defined by the relays (see also the description ofkind:39003). What each role is capable of not defined in this NIP either, it's a relay policy that can vary. Roles can be assigned by other users (as long as they have the capability to add roles) by publishing akind:9000event with that user's pubkey in aptag and the roles afterwards (even if the user is already a group member akind:9000can be issued and the user roles must just be updated).

The roles supported by the group as to having some special privilege assigned to them should be accessible on the eventkind:39003, but the relay may also accept other role names, arbitrarily defined by clients, and just not do anything with them.

Users with any roles that have any privilege can be consideredadminsin a broad sense and be returned in thekind:39001event for a group."
What does Unmanaged groups mean?,"Unmanaged groups are impromptu groups that can be used in any public relay unaware of NIP-29 specifics. They piggyback on relays' natural white/blacklists (or lack of) but aside from that are not actively managed and won't have any admins, group state or metadata events.

Inunmanagedgroups, everybody is considered to be a member.

Unmanaged groups can transition to managed groups, in that case the relay master key just has to publish moderation events setting the state of all groups and start enforcing the rules they choose to."
What does Event definitions mean?,These are the events expected to be found in NIP-29 groups.
What does Normal user-created events mean?,"Groups may accept any event kind, including chats, threads, long-form articles, calendar, livestreams, market announcements and so on. These should be as defined in their respective NIPs, with the addition of thehtag."
What does User-related group management events mean?,"These are events that can be sent by users to manage their situation in a group, they also require thehtag.

- join request(kind:9021)

Any user can send a kind9021event to the relay in order to request admission to the group. Relays MUST reject the request if the user has not been added to the group. The accompanying error message SHOULD explain whether the rejection is final, if the request is pending review, or if some other special handling is relevant (e.g. if payment is required). If a user is already a member, the event MUST be rejected withduplicate:as the error message prefix.

json
{
""kind"": 9021,
""content"": ""optional reason"",
""tags"": [
[""h"", ""<group-id>""],
[""code"", ""<optional-invite-code>""]
]
}

The optionalcodetag may be used by the relay to preauthorize acceptances inclosedgroups, together with thekind:9009create-invitemoderation event.

- leave request(kind:9022)

Any user can send one of these events to the relay in order to be automatically removed from the group. The relay will automatically issue akind:9001in response removing this user.

json
{
""kind"": 9022,
""content"": ""optional reason"",
""tags"": [
[""h"", ""<group-id>""]
]
}"
What does Group state -- or moderation mean?,"These are events expected to be sent by the relay master key or by group admins -- and relays should reject them if they don't come from an authorized admin. They also require thehtag.

- moderation events(kinds:9000-9020) (optional)

Clients can send these events to a relay in order to accomplish a moderation action. Relays must check if the pubkey sending the event is capable of performing the given action based on its role and the relay's internal policy (see also the description ofkind:39003).

jsonc
{
""kind"": 90xx,
""content"": ""optional reason"",
""tags"": [
[""h"", ""<group-id>""],
[""previous"", /*...*/]
]
}

Each moderation action uses a different kind and requires different arguments, which are given as tags. These are defined in the following table:

| kind | name                | tags                                           |
| ---  | ---                 | ---                                            |
| 9000 |put-user|pwith pubkey hex and optional roles         |
| 9001 |remove-user|pwith pubkey hex                            |
| 9002 |edit-metadata| fields fromkind:39000to be modified        |
| 9005 |delete-event|ewith event id hex                          |
| 9007 |create-group|                                                |
| 9008 |delete-group|                                                |
| 9009 |create-invite|                                                |

It's expected that the group state (of who is an allowed member or not, who is an admin and with which permission or not, what are the group name and picture etc) can be fully reconstructed from the canonical sequence of these events."
What does Group metadata events mean?,"These events contain the group id in adtag instead of thehtag. They MUST be created by the relay master key only and a single instance of each (or none) should exist at all times for each group. They are merely informative but should reflect the latest group state (as it was changed by moderation events over time).

- group metadata(kind:39000) (optional)

This event defines the metadata for the group -- basically how clients should display it. It must be generated and signed by the relay in which is found. Relays shouldn't accept these events if they're signed by anyone else.

If the group is forked and hosted in multiple relays, there will be multiple versions of this event in each different relay and so on.

When this event is not found, clients may still connect to the group, but treat it as having a different status,unmanaged,

jsonc
{
""kind"": 39000,
""content"": """",
""tags"": [
[""d"", ""<group-id>""],
[""name"", ""Pizza Lovers""],
[""picture"", ""https://pizza.com/pizza.png""],
[""about"", ""a group for people who love pizza""],
[""public""], // or [""private""]
[""open""] // or [""closed""]
]
// other fields...
}

name,pictureandaboutare basic metadata for the group for display purposes.publicsignals the group can bereadby anyone, whileprivatesignals that only AUTHed users can read.opensignals that anyone can request to join and the request will be automatically granted, whileclosedsignals that members must be pre-approved or that requests to join will be manually handled.

- group admins(kind:39001) (optional)

Each admin is listed along with one or more roles. These roles SHOULD have a correspondence with the roles supported by the relay, as advertised by thekind:39003event.

jsonc
{
""kind"": 39001,
""content"": ""list of admins for the pizza lovers group"",
""tags"": [
[""d"", ""<group-id>""],
[""p"", ""<pubkey1-as-hex>"", ""ceo""],
[""p"", ""<pubkey2-as-hex>"", ""secretary"", ""gardener""],
// other pubkeys...
],
// other fields...
}

- group members(kind:39002) (optional)

It's a list of pubkeys that are members of the group. Relays might choose to not to publish this information, to restrict what pubkeys can fetch it or to only display a subset of the members in it.

Clients should not assume this will always be present or that it will contain a full list of members.

jsonc
{
""kind"": 39002,
""content"": ""list of members for the pizza lovers group"",
""tags"": [
[""d"", ""<group-id>""],
[""p"", ""<admin1>""],
[""p"", ""<member-pubkey1>""],
[""p"", ""<member-pubkey2>""],
// other pubkeys...
],
// other fields...
}

- group roles(kind:39003) (optional)

This is an event that MAY be published by the relay informing users and clients about what are the roles supported by this relay according to its internal logic.

For example, a relay may choose to support the roles""admin""and""moderator"", in which the""admin""will be allowed to edit the group metadata, delete messages and remove users from the group, while the""moderator""can only delete messages (or the relay may choose to call these roles""ceo""and""secretary""instead, the exact role name is not relevant).

The process through which the relay decides what roles to support and how to handle moderation events internally based on them is specific to each relay and not specified here.

jsonc
{
""kind"": 39003,
""content"": ""list of roles supported by this group"",
""tags"": [
[""d"", ""<group-id>""],
[""role"", ""<role-name>"", ""<optional-description>""],
[""role"", ""<role-name>"", ""<optional-description>""],
// other roles...
],
// other fields...
}"
What does Checking your own membership in a group mean?,"The latest of eitherkind:9000orkind:9001events present in a group should tell a user that they are currently members of the group or if they were removed. In case none of these exist the user is assumed to not be a member of the group -- unless the group isunmanaged, in which case the user is assumed to be a member."
What does Adding yourself to a group mean?,"When a group isopen, anyone can send akind:9021event to it in order to be added, then expect akind:9000event to be emitted confirming that the user was added. The same happens withclosedgroups, except in that case a user may only send akind:9021if it has an invite code."
What does Storing your list of groups mean?,A definition forkind:10009was included inNIP-51that allows clients to store the list of groups a user wants to remember being in.
What does Usingunmanagedrelays mean?,"To prevent event leakage, when usingunmanagedrelays, clients should include theNIP-70-tag, as just theprevioustag won't be checked by otherunmanagedrelays.

Groups MAY be named without relay support by adding anameto the corresponding tag in a user'skind 10009group list."
What does Custom Emoji mean?,"draftoptional

Custom emoji may be added tokind 0,kind 1,kind 7(NIP-25) andkind 30315(NIP-38) events by including one or more""emoji""tags, in the form:

[""emoji"", <shortcode>, <image-url>]

Where:

- <shortcode>is a name given for the emoji, which MUST be comprised of only alphanumeric characters and underscores.
- <image-url>is a URL to the corresponding image file of the emoji.

For each emoji tag, clients should parse emoji shortcodes (aka ""emojify"") like:shortcode:in the event to display custom emoji.

Clients may allow users to add custom emoji to an event by including:shortcode:identifier in the event, and adding the relevant""emoji""tags."
What does Kind 0 events mean?,"In kind 0 events, thenameandaboutfields should be emojified.

json
{
""kind"": 0,
""content"": ""{\""name\"":\""Alex Gleason :soapbox:\""}"",
""tags"": [
[""emoji"", ""soapbox"", ""https://gleasonator.com/emoji/Gleasonator/soapbox.png""]
],
""pubkey"": ""79c2cae114ea28a981e7559b4fe7854a473521a8d22a66bbab9fa248eb820ff6"",
""created_at"": 1682790000
}"
What does Kind 1 events mean?,"In kind 1 events, thecontentshould be emojified.

json
{
""kind"": 1,
""content"": ""Hello :gleasonator: 😂 :ablobcatrainbow: :disputed: yolo"",
""tags"": [
[""emoji"", ""ablobcatrainbow"", ""https://gleasonator.com/emoji/blobcat/ablobcatrainbow.png""],
[""emoji"", ""disputed"", ""https://gleasonator.com/emoji/Fun/disputed.png""],
[""emoji"", ""gleasonator"", ""https://gleasonator.com/emoji/Gleasonator/gleasonator.png""]
],
""pubkey"": ""79c2cae114ea28a981e7559b4fe7854a473521a8d22a66bbab9fa248eb820ff6"",
""created_at"": 1682630000
}"
What does Kind 7 events mean?,"In kind 7 events, thecontentshould be emojified.

json
{
""kind"": 7,
""content"": "":dezh:"",
""tags"": [
[""emoji"", ""dezh"", ""https://raw.githubusercontent.com/dezh-tech/brand-assets/main/dezh/logo/black-normal.svg""]
],
""pubkey"": ""79c2cae114ea28a981e7559b4fe7854a473521a8d22a66bbab9fa248eb820ff6"",
""created_at"": 1682630000
}"
What does Dealing with unknown event kinds mean?,"draftoptional

When creating a new custom event kind that is part of a custom protocol and isn't meant to be read as text (likekind:1), clients should use analttag to write a short human-readable plaintext summary of what that event is about.

The intent is that social clients, used to display onlykind:1notes, can still show something in case a custom event pops up in their timelines. The content of thealttag should provide enough context for a user that doesn't know anything about this event kind to understand what it is.

These clients that only knowkind:1are not expected to ask relays for events of different kinds, but users could still reference these weird events on their notes, and without proper context these could be nonsensical notes. Having the fallback text makes that situation much better -- even if only for making the user aware that they should try to view that custom event elsewhere.

kind:1-centric clients can make interacting with these event kinds more functional by supportingNIP-89."
What does Labeling mean?,"draftoptional

This NIP defines two new indexable tags to label events and a new event kind (kind:1985) to attach those labels to existing events. This supports several use cases, including distributed moderation, collection management, license assignment, and content classification.

New Tags:

- Ldenotes a label namespace
- ldenotes a label"
What does Label Namespace Tag mean?,"AnLtag can be any string, but publishers SHOULD ensure they are unambiguous by using a well-defined namespace
(such as an ISO standard) or reverse domain name notation.

Ltags are RECOMMENDED in order to support searching by namespace rather than by a specific tag. The specialugc(""user generated content"") namespace MAY be used when the label content is provided by an end user.

Ltags starting with#indicate that the label target should be associated with the label's value.
This is a way of attaching standard nostr tags to events, pubkeys, relays, urls, etc."
What does Label Tag mean?,"Anltag's value can be any string. If using anLtag,ltags MUST include a mark matching anLtag value in the same event. If noLtag is included, a mark SHOULD still be included. If none is
included,ugcis implied."
What does Label Target mean?,"The label event MUST include one or more tags representing the object or objects being
labeled:e,p,a,r, orttags. This allows for labeling of events, people, relays,
or topics respectively. As with NIP-01, a relay hint SHOULD be included when usingeandptags."
What does Content mean?,"Labels should be short, meaningful strings. Longer discussions, such as for an
explanation of why something was labeled the way it was, should go in the event'scontentfield."
What does Self-Reporting mean?,"landLtags MAY be added to other event kinds to support self-reporting. For events
with a kind other than 1985, labels refer to the event itself."
What does Example events mean?,"A suggestion that multiple pubkeys be associated with thepermiestopic.

jsonc
{
""kind"": 1985,
""tags"": [
[""L"", ""#t""],
[""l"", ""permies"", ""#t""],
[""p"", <pubkey1>, <relay_url>],
[""p"", <pubkey2>, <relay_url>]
],
// other fields...
}

A report flagging violence toward a human being as defined by ontology.example.com.

jsonc
{
""kind"": 1985,
""tags"": [
[""L"", ""com.example.ontology""],
[""l"", ""VI-hum"", ""com.example.ontology""],
[""p"", <pubkey1>, <relay_url>],
[""p"", <pubkey2>, <relay_url>]
],
// other fields...
}

A moderation suggestion for a chat event.

jsonc
{
""kind"": 1985,
""tags"": [
[""L"", ""nip28.moderation""],
[""l"", ""approve"", ""nip28.moderation""],
[""e"", <kind40_event_id>, <relay_url>]
],
// other fields...
}

Assignment of a license to an event.

jsonc
{
""kind"": 1985,
""tags"": [
[""L"", ""license""],
[""l"", ""MIT"", ""license""],
[""e"", <event_id>, <relay_url>]
],
// other fields...
}

Publishers can self-label by addingltags to their own non-1985 events. In this case, the kind 1 event's author
is labeling their note as being related to Milan, Italy using ISO 3166-2.

jsonc
{
""kind"": 1,
""tags"": [
[""L"", ""ISO-3166-2""],
[""l"", ""IT-MI"", ""ISO-3166-2""]
],
""content"": ""It's beautiful here in Milan!"",
// other fields...
}

Author is labeling their note language as English using ISO-639-1.

jsonc
{
""kind"": 1,
""tags"": [
[""L"", ""ISO-639-1""],
[""l"", ""en"", ""ISO-639-1""]
],
""content"": ""English text"",
// other fields...
}"
What does Other Notes mean?,"When using this NIP to bulk-label many targets at once, events may be requested for deletion usingNIP-09and a replacement
may be published. We have opted not to use addressable/replaceable events for this due to the
complexity in coming up with a standarddtag. In order to avoid ambiguity when querying,
publishers SHOULD limit labeling events to a single namespace.

Before creating a vocabulary, explore how your use case may have already been designed and
imitate that design if possible. Reverse domain name notation is encouraged to avoid
namespace clashes, but for the sake of interoperability all namespaces should be
considered open for public use, and not proprietary. In other words, if there is a
namespace that fits your use case, use it even if it points to someone else's domain name.

Vocabularies MAY choose to fully qualify all labels within a namespace (for example,[""l"", ""com.example.vocabulary:my-label""]). This may be preferred when defining more
formal vocabularies that should not be confused with another namespace when querying
without anLtag. For these vocabularies, all labels SHOULD include the namespace
(rather than mixing qualified and unqualified labels).

A good heuristic for whether a use case fits this NIP is whether labels would ever be unique.
For example, many events might be labeled with a particular place, topic, or pubkey, but labels
with specific values like ""John Doe"" or ""3.18743"" are not labels, they are values, and should
be handled in some other way."
What does Appendix: Known Ontologies mean?,"Below is a non-exhaustive list of ontologies currently in widespread use.

- social ontology categories"
What does Parameterized Replaceable Events mean?,"finalmandatory

Renamed to ""Addressable events"" and moved toNIP-01."
What does gitstuff mean?,"draftoptional

This NIP defines all the ways code collaboration using and adjacent togitcan be done using Nostr."
What does Repository announcements mean?,"Git repositories are hosted in Git-enabled servers, but their existence can be announced using Nostr events, as well as their willingness to receive patches, bug reports and comments in general.

jsonc
{
""kind"": 30617,
""content"": """",
""tags"": [
[""d"", ""<repo-id>""], // usually kebab-case short name
[""name"", ""<human-readable project name>""],
[""description"", ""brief human-readable project description>""],
[""web"", ""<url for browsing>"", ...], // a webpage url, if the git server being used provides such a thing
[""clone"", ""<url for git-cloning>"", ...], // a url to be given to `git clone` so anyone can clone it
[""relays"", ""<relay-url>"", ...], // relays that this repository will monitor for patches and issues
[""r"", ""<earliest-unique-commit-id>"", ""euc""],
[""maintainers"", ""<other-recognized-maintainer>"", ...],
[""t"", ""<arbitrary string>""], // hashtags labelling the repository
]
}

The tagsweb,clone,relays,maintainerscan have multiple values.

Thertag annotated with the""euc""marker should be the commit ID of the earliest unique commit of this repo, made to identify it among forks and group it with other repositories hosted elsewhere that may represent essentially the same project. In most cases it will be the root commit of a repository. In case of a permanent fork between two projects, then the first commit after the fork should be used.

Exceptd, all tags are optional."
What does Repository state announcements mean?,"An optional source of truth for the state of branches and tags in a repository.

jsonc
{
""kind"": 30618,
""content"": """",
""tags"": [
[""d"", ""<repo-id>""], // matches the identifier in the coresponding repository announcement
[""refs/<heads|tags>/<branch-or-tag-name>"",""<commit-id>""]
[""HEAD"", ""ref: refs/heads/<branch-name>""]
]
}

Therefstag may appear multiple times, or none.

If norefstags are present, the author is no longer tracking repository state using this event. This approach enables the author to restart tracking state at a later time unlikeNIP-09deletion requests.

Therefstag can be optionally extended to enable clients to identify how many commits ahead a ref is:

jsonc
{
""tags"": [
[""refs/<heads|tags>/<branch-or-tag-name>"", ""<commit-id>"", ""<shorthand-parent-commit-id>"", ""<shorthand-grandparent>"", ...],
]
}"
What does Patches mean?,"Patches can be sent by anyone to any repository. Patches to a specific repository SHOULD be sent to the relays specified in that repository's announcement event's""relays""tag. Patch events SHOULD include anatag pointing to that repository's announcement address.

Patches in a patch set SHOULD include a NIP-10ereplytag pointing to the previous patch.

The first patch revision in a patch revision SHOULD include a NIP-10ereplyto the original root patch.

```jsonc
{
""kind"": 1617,
""content"": """", // contents of""tags"": [
[""a"", ""30617::""],
[""r"", """"] // so clients can subscribe to all patches sent to a local git repo
[""p"", """"],
[""p"", """"], // optionally send the patch to another user to bring it to their attention

```
[""t"", ""root""], // omitted for additional patches in a series
// for the first patch in a revision
[""t"", ""root-revision""],

// optional tags for when it is desirable that the merged patch has a stable commit id
// these fields are necessary for ensuring that the commit resulting from applying a patch
// has the same id as it had in the proposer's machine -- all these tags can be omitted
// if the maintainer doesn't care about these things
[""commit"", ""<current-commit-id>""],
[""r"", ""<current-commit-id>""] // so clients can find existing patches for a specific commit
[""parent-commit"", ""<parent-commit-id>""],
[""commit-pgp-sig"", ""-----BEGIN PGP SIGNATURE-----...""], // empty string for unsigned commit
[""committer"", ""<name>"", ""<email>"", ""<timestamp>"", ""<timezone offset in minutes>""],
```

]
}
```

The first patch in a series MAY be a cover letter in the format produced bygit format-patch."
What does Issues mean?,"Issues are Markdown text that is just human-readable conversational threads related to the repository: bug reports, feature requests, questions or comments of any kind. Like patches, these SHOULD be sent to the relays specified in that repository's announcement event's""relays""tag.

Issues may have asubjecttag, which clients can utilize to display a header. Additionally, one or morettags may be included to provide labels for the issue.

json
{
""kind"": 1621,
""content"": ""<markdown text>"",
""tags"": [
[""a"", ""30617:<base-repo-owner-pubkey>:<base-repo-id>""],
[""p"", ""<repository-owner>""]
[""subject"", ""<issue-subject>""]
[""t"", ""<issue-label>""]
[""t"", ""<another-issue-label>""]
]
}"
What does Replies mean?,Replies to either akind:1621issueor akind:1617patchevent should followNIP-22 comment.
What does Status mean?,"Root Patches and Issues have a Status that defaults to 'Open' and can be set by issuing Status events.

```jsonc
{
""kind"": 1630, // Open
""kind"": 1631, // Applied / Merged for Patches; Resolved for Issues
""kind"": 1632, // Closed
""kind"": 1633, // Draft
""content"": """",
""tags"": [
[""e"", """", """", ""root""],
[""e"", """", """", ""reply""], // for when revisions applied
[""p"", """"],
[""p"", """"],
[""p"", """"],

```
// optional for improved subscription filter efficiency
[""a"", ""30617:<base-repo-owner-pubkey>:<base-repo-id>"", ""<relay-url>""],
[""r"", ""<earliest-unique-commit-id-of-repo>""]

// optional for `1631` status
[""e"", ""<applied-or-merged-patch-event-id>"", """", ""mention""], // for each
// when merged
[""merge-commit"", ""<merge-commit-id>""]
[""r"", ""<merge-commit-id>""]
// when applied
[""applied-as-commits"", ""<commit-id-in-master-branch>"", ...]
[""r"", ""<applied-commit-id>""] // for each
```

]
}
```

The Status event with the largest created_at date is valid.

The Status of a patch-revision defaults to either that of the root-patch, or1632(Closed) if the root-patch's Status is1631and the patch-revision isn't tagged in the1631event."
What does Possible things to be added later mean?,"- ""branch merge"" kind (specifying a URL from where to fetch the branch to be merged)
- inline file comments kind (we probably need one for patches and a different one for merged files)"
What does Torrents mean?,"draftoptional

This NIP defined a newkind 2003which is a Torrent.

kind 2003is a simple torrent index where there is enough information to search for content and construct the magnet link. No torrent files exist on nostr."
What does Tag prefixes mean?,"Tag prefixes are used to label the content with references, ie.[""i"", ""imdb:1234""]

- tcat: A comma separated text category path, ie.[""i"", ""tcat:video,movie,4k""], this should also match thenewznabcategory in a best effort approach.
- newznab: The category ID fromnewznab
- tmdb:The movie databaseid.
- ttvdb:TV databaseid.
- imdb:IMDBid.
- mal:MyAnimeListid.
- anilist:AniListid.

A second level prefix should be included where the database supports multiple media types.
-tmdb:movie:693134maps tothemoviedb.org/movie/693134-ttvdb:movie:290272maps tothetvdb.com/movies/dune-part-two-mal:anime:9253maps tomyanimelist.net/anime/9253-mal:manga:17517maps tomyanimelist.net/manga/17517

In some cases the url mapping isnt direct, mapping the url in general is out of scope for this NIP, the section above is only a guide so that implementers have enough information to succsesfully map the url if they wish.

json
{
""kind"": 2003,
""content"": ""<long-description-pre-formatted>"",
""tags"": [
[""title"", ""<torrent-title>""],
[""x"", ""<bittorrent-info-hash>""],
[""file"", ""<file-name>"", ""<file-size-in-bytes>""],
[""file"", ""<file-name>"", ""<file-size-in-bytes>""],
[""tracker"", ""udp://mytacker.com:1337""],
[""tracker"", ""http://1337-tracker.net/announce""],
[""i"", ""tcat:video,movie,4k""],
[""i"", ""newznab:2045""],
[""i"", ""imdb:tt15239678""],
[""i"", ""tmdb:movie:693134""],
[""i"", ""ttvdb:movie:290272""],
[""t"", ""movie""],
[""t"", ""4k""],
]
}"
What does Torrent Comments mean?,"A torrent comment is akind 2004event which is used to reply to a torrent event.

This event works exactly like akind 1and should followNIP-10for tagging."
What does Implementations mean?,"- dtan.xyz
- nostrudel.ninja"
What does Sensitive Content / Content Warning mean?,"draftoptional

Thecontent-warningtag enables users to specify if the event's content needs to be approved by readers to be shown.
Clients can hide the content until the user acts on it.

landLtags MAY be also be used as defined inNIP-32with thecontent-warningor other namespace to support
further qualification and querying."
What does Spec mean?,"tag: content-warning
options:
- [reason]: optional"
What does Draft Events mean?,"draftoptional

This NIP defines kind31234as a private wrap for drafts of any other event kind.

The draft event is JSON-stringified,NIP44-encryptedto the signer's public key and placed inside the.contentof the event.

An additionalktag identifies the kind of the draft event.

js
{
""kind"": 31234,
""tags"": [
[""d"", ""<identifier>""],
[""k"", ""<kind of the draft event>""],
[""e"", ""<anchor event event id>"", ""<relay-url>""],
[""a"", ""<anchor event address>"", ""<relay-url>""],
],
""content"": nip44Encrypt(JSON.stringify(draft_event)),
// other fields
}

A blanked.contentmeans this draft has been deleted by a client but relays still have the event.

Tagseandaidentify one or more anchor events, such as parent events on replies."
What does Relay List for Private Content mean?,"Kind10013indicates the user's preferred relays to store private events like Drafts. The event MUST include a list ofrelayURLs in private tags. Private tags are JSON Stringified, NIP-44-encrypted to the signer's keys and placed inside the .content of the event.

js
{
""kind"": 10013,
""tags"": [],
""content"": nip44Encrypt(JSON.stringify([
[""relay"", ""wss://myrelay.mydomain.com""]
]))
//...other fields
}

Relays listed in this event SHOULD be authed and only allow downloads to events signed by the authed user.

Clients SHOULD publish kind10013events to the author'sNIP-65writerelays."
What does User Statuses mean?,draftoptional
What does Live Statuses mean?,"A special event withkind:30315""User Status"" is defined as anoptionally expiringaddressable event, where thedtag represents the status type:

For example:

json
{
""kind"": 30315,
""content"": ""Sign up for nostrasia!"",
""tags"": [
[""d"", ""general""],
[""r"", ""https://nostr.world""]
],
}

json
{
""kind"": 30315,
""content"": ""Intergalatic - Beastie Boys"",
""tags"": [
[""d"", ""music""],
[""r"", ""spotify:search:Intergalatic%20-%20Beastie%20Boys""],
[""expiration"", ""1692845589""]
],
}

Two common status types are defined:generalandmusic.generalrepresent general statuses: ""Working"", ""Hiking"", etc.

musicstatus events are for live streaming what you are currently listening to. The expiry of themusicstatus should be when the track will stop playing.

Any other status types can be used but they are not defined by this NIP.

The status MAY include anr,p,eoratag linking to a URL, profile, note, or addressable event.

ThecontentMAY include emoji(s), orNIP-30custom emoji(s). If thecontentis an empty string then the client should clear the status."
What does Client behavior mean?,Clients MAY display this next to the username on posts or profiles to provide live user status information.
What does Use Cases mean?,"- Calendar nostr apps that update your general status when you're in a meeting
- Nostr Nests that update your general status with a link to the nest when you join
- Nostr music streaming services that update your music status when you're listening
- Podcasting apps that update your music status when you're listening to a podcast, with a link for others to listen as well
- Clients can use the system media player to update playing music status"
What does External Identities in Profiles mean?,draftoptional
What does itag on a metadata event mean?,"A new optionalitag is introduced forkind 0metadata event defined inNIP-01:

jsonc
{
""id"": <id>,
""pubkey"": <pubkey>,
""tags"": [
[""i"", ""github:semisol"", ""9721ce4ee4fceb91c9711ca2a6c9a5ab""],
[""i"", ""twitter:semisol_public"", ""1619358434134196225""],
[""i"", ""mastodon:bitcoinhackers.org/@semisol"", ""109775066355589974""]
[""i"", ""telegram:1087295469"", ""nostrdirectory/770""]
],
// other fields...
}

Anitag will have two parameters, which are defined as the following:
1.platform:identity: This is the platform name (for examplegithub) and the identity on that platform (for examplesemisol) joined together with:.
2.proof: String or object that points to the proof of owning this identity.

Clients SHOULD process anyitags with more than 2 values for future extensibility.
Identity provider names SHOULD only includea-z,0-9and the characters._-/and MUST NOT include:.
Identity names SHOULD be normalized if possible by replacing uppercase letters with lowercase letters, and if there are multiple aliases for an entity the primary one should be used."
What does github mean?,"Identity: A GitHub username.

Proof: A GitHub Gist ID. This Gist should be created by<identity>with a single file that has the textVerifying that I control the following Nostr public key: <npub encoded public key>.
This can be located athttps://gist.github.com/<identity>/<proof>."
What does twitter mean?,"Identity: A Twitter username.

Proof: A Tweet ID. The tweet should be posted by<identity>and have the textVerifying my account on nostr My Public Key: ""<npub encoded public key>"".
This can be located athttps://twitter.com/<identity>/status/<proof>."
What does mastodon mean?,"Identity: A Mastodon instance and username in the format<instance>/@<username>.

Proof: A Mastodon post ID. This post should be published by<username>@<instance>and have the textVerifying that I control the following Nostr public key: ""<npub encoded public key>"".
This can be located athttps://<identity>/<proof>."
What does telegram mean?,"Identity: A Telegram user ID.

Proof: A string in the format<ref>/<id>which points to a message published in the public channel or group with name<ref>and message ID<id>. This message should be sent by user ID<identity>and have the textVerifying that I control the following Nostr public key: ""<npub encoded public key>"".
This can be located athttps://t.me/<proof>."
What does Expiration Timestamp mean?,"draftoptional

Theexpirationtag enables users to specify a unix timestamp at which the message SHOULD be considered expired (by relays and clients) and SHOULD be deleted by relays."
What does Client Behavior mean?,"Clients SHOULD use thesupported_nipsfield to learn if a relay supports this NIP. Clients SHOULD NOT send expiration events to relays that do not support this NIP.

Clients SHOULD ignore events that have expired."
What does Relay Behavior mean?,"Relays MAY NOT delete expired messages immediately on expiration and MAY persist them indefinitely.
Relays SHOULD NOT send expired events to clients, even if they are stored.
Relays SHOULD drop any events that are published to them if they are expired.
An expiration timestamp does not affect storage of ephemeral events."
What does Suggested Use Cases mean?,"- Temporary announcements - This tag can be used to make temporary announcements. For example, an event organizer could use this tag to post announcements about an upcoming event.
- Limited-time offers - This tag can be used by businesses to make limited-time offers that expire after a certain amount of time. For example, a business could use this tag to make a special offer that is only available for a limited time."
What does Warning mean?,"The events could be downloaded by third parties as they are publicly accessible all the time on the relays.
So don't consider expiring messages as a security feature for your conversations or other uses."
What does Authentication of clients to relays mean?,"draftoptional

This NIP defines a way for clients to authenticate to relays by signing an ephemeral event."
What does New client-relay protocol messages mean?,"This NIP defines a new message,AUTH, which relays CAN send when they support authentication and clients can send to relays when they want to authenticate. When sent by relays the message has the following form:

[""AUTH"", <challenge-string>]

And, when sent by clients, the following form:

[""AUTH"", <signed-event-json>]

AUTHmessages sent by clients MUST be answered with anOKmessage, like anyEVENTmessage."
What does Canonical authentication event mean?,"The signed event is an ephemeral event not meant to be published or queried, it must be ofkind: 22242and it should have at least two tags, one for the relay URL and one for the challenge string as received from the relay. Relays MUST excludekind: 22242events from being broadcasted to any client.created_atshould be the current time. Example:

jsonc
{
""kind"": 22242,
""tags"": [
[""relay"", ""wss://relay.example.com/""],
[""challenge"", ""challengestringhere""]
],
// other fields...
}"
What does OKandCLOSEDmachine-readable prefixes mean?,"This NIP defines two new prefixes that can be used inOK(in response to event writes by clients) andCLOSED(in response to rejected subscriptions by clients):

- ""auth-required: ""- for when a client has not performedAUTHand the relay requires that to fulfill the query or write the event.
- ""restricted: ""- for when a client has already performedAUTHbut the key used to perform it is still not allowed by the relay or is exceeding its authorization."
What does Protocol flow mean?,At any moment the relay may send anAUTHmessage to the client containing a challenge. The challenge is valid for the duration of the connection or until another challenge is sent by the relay. The client MAY decide to send itsAUTHevent at any point and the authenticated session is valid afterwards for the duration of the connection.
What does auth-requiredin response to aREQmessage mean?,"Given that a relay is likely to require clients to perform authentication only for certain jobs, like answering aREQor accepting anEVENTwrite, these are some expected common flows:

relay: [""AUTH"", ""<challenge>""]
client: [""REQ"", ""sub_1"", {""kinds"": [4]}]
relay: [""CLOSED"", ""sub_1"", ""auth-required: we can't serve DMs to unauthenticated users""]
client: [""AUTH"", {""id"": ""abcdef..."", ...}]
relay: [""OK"", ""abcdef..."", true, """"]
client: [""REQ"", ""sub_1"", {""kinds"": [4]}]
relay: [""EVENT"", ""sub_1"", {...}]
relay: [""EVENT"", ""sub_1"", {...}]
relay: [""EVENT"", ""sub_1"", {...}]
relay: [""EVENT"", ""sub_1"", {...}]
...

In this case, theAUTHmessage from the relay could be sent right as the client connects or it can be sent immediately before theCLOSEDis sent. The only requirement is thatthe client must have a stored challenge associated with that relayso it can act upon that in response to theauth-requiredCLOSEDmessage."
What does auth-requiredin response to anEVENTmessage mean?,"The same flow is valid for when a client wants to write anEVENTto the relay, except now the relay sends back anOKmessage instead of aCLOSEDmessage:

relay: [""AUTH"", ""<challenge>""]
client: [""EVENT"", {""id"": ""012345..."", ...}]
relay: [""OK"", ""012345..."", false, ""auth-required: we only accept events from registered users""]
client: [""AUTH"", {""id"": ""abcdef..."", ...}]
relay: [""OK"", ""abcdef..."", true, """"]
client: [""EVENT"", {""id"": ""012345..."", ...}]
relay: [""OK"", ""012345..."", true, """"]"
What does Signed Event Verification mean?,"To verifyAUTHmessages, relays must ensure:

- that thekindis22242;
- that the eventcreated_atis close (e.g. within ~10 minutes) of the current time;
- that the""challenge""tag matches the challenge sent before;
- that the""relay""tag matches the relay URL:URL normalization techniques can be applied. For most cases just checking if the domain name is correct should be enough.
- URL normalization techniques can be applied. For most cases just checking if the domain name is correct should be enough."
What does Encrypted Payloads (Versioned) mean?,"optional

The NIP introduces a new data format for keypair-based encryption. This NIP is versioned
to allow multiple algorithm choices to exist simultaneously. This format may be used for
many things, but MUST be used in the context of a signed event as described in NIP-01.

Note: this format DOES NOT define anykinds related to a new direct messaging standard,
only the encryption required to define one. It SHOULD NOT be used as a drop-in replacement
for NIP-04 payloads."
What does Versions mean?,"Currently defined encryption algorithms:

- 0x00- Reserved
- 0x01- Deprecated and undefined
- 0x02- secp256k1 ECDH, HKDF, padding, ChaCha20, HMAC-SHA256, base64"
What does Limitations mean?,"Every nostr user has their own public key, which solves key distribution problems present
in other solutions. However, nostr's relay-based architecture makes it difficult to implement
more robust private messaging protocols with things like metadata hiding, forward secrecy,
and post compromise secrecy.

The goal of this NIP is to have asimpleway to encrypt payloads used in the context of a signed
event. When applying this NIP to any use case, it's important to keep in mind your users' threat
model and this NIP's limitations. For high-risk situations, users should chat in specialized E2EE
messaging software and limit use of nostr to exchanging contacts.

On its own, messages sent using this scheme have a number of important shortcomings:

- No deniability: it is possible to prove an event was signed by a particular key
- No forward secrecy: when a key is compromised, it is possible to decrypt all previous conversations
- No post-compromise security: when a key is compromised, it is possible to decrypt all future conversations
- No post-quantum security: a powerful quantum computer would be able to decrypt the messages
- IP address leak: user IP may be seen by relays and all intermediaries between user and relay
- Date leak:created_atis public, since it is a part of NIP-01 event
- Limited message size leak: padding only partially obscures true message length
- No attachments: they are not supported

Lack of forward secrecy may be partially mitigated by only sending messages to trusted relays, and asking
relays to delete stored messages after a certain duration has elapsed."
What does Version 2 mean?,"NIP-44 version 2 has the following design characteristics:

- Payloads are authenticated using a MAC before signing rather than afterwards because events are assumed
to be signed as specified in NIP-01. The outer signature serves to authenticate the full payload, and MUST
be validated before decrypting.
- ChaCha is used instead of AES because it's faster and hasbetter security against multi-key attacks.
- ChaCha is used instead of XChaCha because XChaCha has not been standardized. Also, xChaCha's improved collision
resistance of nonces isn't necessary since every message has a new (key, nonce) pair.
- HMAC-SHA256 is used instead of Poly1305 because polynomial MACs are much easier to forge.
- SHA256 is used instead of SHA3 or BLAKE because it is already used in nostr. Also BLAKE's speed advantage
is smaller in non-parallel environments.
- A custom padding scheme is used instead of padmé because it provides better leakage reduction for small messages.
- Base64 encoding is used instead of another encoding algorithm because it is widely available, and is already used in nostr."
What does Encryption mean?,"- Calculate a conversation key
- Execute ECDH (scalar multiplication) of public key B by private key A
Outputshared_xmust be unhashed, 32-byte encoded x coordinate of the shared point
- Use HKDF-extract with sha256,IKM=shared_xandsalt=utf8_encode('nip44-v2')
- HKDF output will be aconversation_keybetween two users.
- It is always the same, when key roles are swapped:conv(a, B) == conv(b, A)
- Generate a random 32-byte nonce
- Always useCSPRNG
- Don't generate a nonce from message content
- Don't re-use the same nonce between messages: doing so would make them decryptable,
but won't leak the long-term key
- Calculate message keys
- The keys are generated fromconversation_keyandnonce. Validate that both are 32 bytes long
- Use HKDF-expand, with sha256,PRK=conversation_key,info=nonceandL=76
- Slice 76-byte HKDF output into:chacha_key(bytes 0..32),chacha_nonce(bytes 32..44),hmac_key(bytes 44..76)
- Add padding
- Content must be encoded from UTF-8 into byte array
- Validate plaintext length. Minimum is 1 byte, maximum is 65535 bytes
- Padding format is:[plaintext_length: u16][plaintext][zero_bytes]
- Padding algorithm is related to powers-of-two, with min padded msg size of 32 bytes
- Plaintext length is encoded in big-endian as first 2 bytes of the padded blob
- Encrypt padded content
- Use ChaCha20, with key and nonce from step 3
- Calculate MAC (message authentication code)
- AAD (additional authenticated data) is used - instead of calculating MAC on ciphertext,
it's calculated over a concatenation ofnonceandciphertext
- Validate that AAD (nonce) is 32 bytes
- Base64-encode (with padding) params usingconcat(version, nonce, ciphertext, mac)

Encrypted payloads MUST be included in an event's payload, hashed, and signed as defined in NIP 01, using schnorr
signature scheme over secp256k1."
What does Decryption mean?,"Before decryption, the event's pubkey and signature MUST be validated as defined in NIP 01. The public key MUST be
a valid non-zero secp256k1 curve point, and the signature must be valid secp256k1 schnorr signature. For exact
validation rules, refer to BIP-340.

- Check if first payload's character is#
- #is an optional future-proof flag that means non-base64 encoding is used
- The#is not present in base64 alphabet, but, instead of throwingbase64 is invalid,
implementations MUST indicate that the encryption version is not yet supported
- Decode base64
- Base64 is decoded intoversion, nonce, ciphertext, mac
- If the version is unknown, implementations must indicate that the encryption version is not supported
- Validate length of base64 message to prevent DoS on base64 decoder: it can be in range from 132 to 87472 chars
- Validate length of decoded message to verify output of the decoder: it can be in range from 99 to 65603 bytes
- Calculate conversation key
- See step 1 ofencryption
- Calculate message keys
- See step 3 ofencryption
- Calculate MAC (message authentication code) with AAD and compare
- Stop and throw an error if MAC doesn't match the decoded one from step 2
- Use constant-time comparison algorithm
- Decrypt ciphertext
- Use ChaCha20 with key and nonce from step 3
- Remove padding
- Read the first two BE bytes of plaintext that correspond to plaintext length
- Verify that the length of sliced plaintext matches the value of the two BE bytes
- Verify that calculated padding from step 3 of theencryptionprocess matches the actual padding"
What does Details mean?,"- Cryptographic methods
- secure_random_bytes(length)fetches randomness from CSPRNG.
- hkdf(IKM, salt, info, L)represents HKDF(RFC 5869)with SHA256 hash function comprised of methodshkdf_extract(IKM, salt)andhkdf_expand(OKM, info, L).
- chacha20(key, nonce, data)is ChaCha20(RFC 8439)with
starting counter set to 0.
- hmac_sha256(key, message)is HMAC(RFC 2104).
- secp256k1_ecdh(priv_a, pub_b)is multiplication of point B by scalar a (a ⋅ B), defined inBIP340.
The operation produces a shared point, and we encode the shared point's 32-byte x coordinate, using methodbytes(P)from BIP340. Private and public keys must be validated as per BIP340: pubkey must be a valid,
on-curve point, and private key must be a scalar in range[1, secp256k1_order - 1].
NIP44 doesn't do hashing of the output: keep this in mind, because some libraries hash it using sha256.
As an example, in libsecp256k1, unhashed version is available insecp256k1_ec_pubkey_tweak_mul
- Operators
- x[i:j], wherexis a byte array andi, j <= 0returns a(j - i)-byte array with a copy of thei-th byte (inclusive) to thej-th byte (exclusive) ofx.
- Constantsc:
- min_plaintext_sizeis 1. 1 byte msg is padded to 32 bytes.
- max_plaintext_sizeis 65535 (64kB - 1). It is padded to 65536 bytes.
- Functions
- base64_encode(string)andbase64_decode(bytes)are Base64 (RFC 4648, with padding)
- concatrefers to byte array concatenation
- is_equal_ct(a, b)is constant-time equality check of 2 byte arrays
- utf8_encode(string)andutf8_decode(bytes)transform string to byte array and back
- write_u8(number)restricts number to values 0..255 and encodes into Big-Endian uint8 byte array
- write_u16_be(number)restricts number to values 0..65535 and encodes into Big-Endian uint16 byte array
- zeros(length)creates byte array of lengthlength >= 0, filled with zeros
- floor(number)andlog2(number)are well-known mathematical methods"
What does Implementation pseudocode mean?,"The following is a collection of python-like pseudocode functions which implement the above primitives,
intended to guide implementers. A collection of implementations in different languages is available at https://github.com/paulmillr/nip44.

```py"
What does Calculates length of the padded byte array. mean?,"def calc_padded_len(unpadded_len):
next_power = 1 << (floor(log2(unpadded_len - 1))) + 1
if next_power <= 256:
chunk = 32
else:
chunk = next_power / 8
if unpadded_len <= 32:
return 32
else:
return chunk * (floor((len - 1) / chunk) + 1)"
What does Converts unpadded plaintext to padded bytearray mean?,"def pad(plaintext):
unpadded = utf8_encode(plaintext)
unpadded_len = len(plaintext)
if (unpadded_len < c.min_plaintext_size or
unpadded_len > c.max_plaintext_size): raise Exception('invalid plaintext length')
prefix = write_u16_be(unpadded_len)
suffix = zeros(calc_padded_len(unpadded_len) - unpadded_len)
return concat(prefix, unpadded, suffix)"
What does Converts padded bytearray to unpadded plaintext mean?,"def unpad(padded):
unpadded_len = read_uint16_be(padded[0:2])
unpadded = padded[2:2+unpadded_len]
if (unpadded_len == 0 or
len(unpadded) != unpadded_len or
len(padded) != 2 + calc_padded_len(unpadded_len)): raise Exception('invalid padding')
return utf8_decode(unpadded)"
What does compressed payload (base64): 132b to 87472b mean?,"def decode_payload(payload):
plen = len(payload)
if plen == 0 or payload[0] == '#': raise Exception('unknown version')
if plen < 132 or plen > 87472: raise Exception('invalid payload size')
data = base64_decode(payload)
dlen = len(d)
if dlen < 99 or dlen > 65603: raise Exception('invalid data size');
vers = data[0]
if vers != 2: raise Exception('unknown version ' + vers)
nonce = data[1:33]
ciphertext = data[33:dlen - 32]
mac = data[dlen - 32:dlen]
return (nonce, ciphertext, mac)

def hmac_aad(key, message, aad):
if len(aad) != 32: raise Exception('AAD associated data must be 32 bytes');
return hmac(sha256, key, concat(aad, message));"
"What does Calculates long-term key between users A and B:get_key(Apriv, Bpub) == get_key(Bpriv, Apub) mean?","def get_conversation_key(private_key_a, public_key_b):
shared_x = secp256k1_ecdh(private_key_a, public_key_b)
return hkdf_extract(IKM=shared_x, salt=utf8_encode('nip44-v2'))"
What does Calculates unique per-message key mean?,"def get_message_keys(conversation_key, nonce):
if len(conversation_key) != 32: raise Exception('invalid conversation_key length')
if len(nonce) != 32: raise Exception('invalid nonce length')
keys = hkdf_expand(OKM=conversation_key, info=nonce, L=76)
chacha_key = keys[0:32]
chacha_nonce = keys[32:44]
hmac_key = keys[44:76]
return (chacha_key, chacha_nonce, hmac_key)

def encrypt(plaintext, conversation_key, nonce):
(chacha_key, chacha_nonce, hmac_key) = get_message_keys(conversation_key, nonce)
padded = pad(plaintext)
ciphertext = chacha20(key=chacha_key, nonce=chacha_nonce, data=padded)
mac = hmac_aad(key=hmac_key, message=ciphertext, aad=nonce)
return base64_encode(concat(write_u8(2), nonce, ciphertext, mac))

def decrypt(payload, conversation_key):
(nonce, ciphertext, mac) = decode_payload(payload)
(chacha_key, chacha_nonce, hmac_key) = get_message_keys(conversation_key, nonce)
calculated_mac = hmac_aad(key=hmac_key, message=ciphertext, aad=nonce)
if not is_equal_ct(calculated_mac, mac): raise Exception('invalid MAC')
padded_plaintext = chacha20(key=chacha_key, nonce=chacha_nonce, data=ciphertext)
return unpad(padded_plaintext)"
"What does 'hello world' == decrypt(payload, conversation_key) mean?",```
What does Audit mean?,"The v2 of the standard was audited byCure53in December 2023.
Check outaudit-2023.12.pdfandauditor's website."
What does Tests and code mean?,"A collection of implementations in different languages is available at https://github.com/paulmillr/nip44.

We publish extensive test vectors. Instead of having it in the document directly, a sha256 checksum of vectors is provided:

```
269ed0f69e4c192512cc779e78c555090cebc7c785b609e338a62afc3ce25040  nip44.vectors.json
```

Example of a test vector from the file:

json
{
""sec1"": ""0000000000000000000000000000000000000000000000000000000000000001"",
""sec2"": ""0000000000000000000000000000000000000000000000000000000000000002"",
""conversation_key"": ""c41c775356fd92eadc63ff5a0dc1da211b268cbea22316767095b2871ea1412d"",
""nonce"": ""0000000000000000000000000000000000000000000000000000000000000001"",
""plaintext"": ""a"",
""payload"": ""AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABee0G5VSK0/9YypIObAtDKfYEAjD35uVkHyB0F4DwrcNaCXlCWZKaArsGrY6M9wnuTMxWfp1RTN9Xga8no+kF5Vsb""
}

The file also contains intermediate values. A quick guidance with regards to its usage:

- valid.get_conversation_key: calculate conversation_key from secret key sec1 and public key pub2
- valid.get_message_keys: calculate chacha_key, chacha_nonce, hmac_key from conversation_key and nonce
- valid.calc_padded_len: take unpadded length (first value), calculate padded length (second value)
- valid.encrypt_decrypt: emulate real conversation. Calculate pub2 from sec2, verify conversation_key from (sec1, pub2), encrypt, verify payload, then calculate pub1 from sec1, verify conversation_key from (sec2, pub1), decrypt, verify plaintext.
- valid.encrypt_decrypt_long_msg: same as previous step, but instead of a full plaintext and payload, their checksum is provided.
- invalid.encrypt_msg_lengths
- invalid.get_conversation_key: calculating conversation_key must throw an error
- invalid.decrypt: decrypting message content must throw an error"
What does Event Counts mean?,"draftoptional

Relays may support the verbCOUNT, which provides a mechanism for obtaining event counts."
What does Filters and return values mean?,"This NIP defines the verbCOUNT, which accepts a subscription id and filters as specified inNIP 01for the verbREQ. Multiple filters are OR'd together and aggregated into a single count result.

[""COUNT"", <subscription_id>, <filters JSON>...]

Counts are returned using aCOUNTresponse in the form{""count"": <integer>}. Relays may use probabilistic counts to reduce compute requirements.
In case a relay uses probabilistic counts, it MAY indicate it in the response withapproximatekey i.e.{""count"": <integer>, ""approximate"": <true|false>}.

[""COUNT"", <subscription_id>, {""count"": <integer>}]

Whenever the relay decides to refuse to fulfill theCOUNTrequest, it MUST return aCLOSEDmessage."
What does Followers count mean?,"[""COUNT"", <subscription_id>, {""kinds"": [3], ""#p"": [<pubkey>]}]
[""COUNT"", <subscription_id>, {""count"": 238}]"
What does Count posts and reactions mean?,"[""COUNT"", <subscription_id>, {""kinds"": [1, 7], ""authors"": [<pubkey>]}]
[""COUNT"", <subscription_id>, {""count"": 5}]"
What does Count posts approximately mean?,"[""COUNT"", <subscription_id>, {""kinds"": [1]}]
[""COUNT"", <subscription_id>, {""count"": 93412452, ""approximate"": true}]"
What does Relay refuses to count mean?,"[""COUNT"", <subscription_id>, {""kinds"": [4], ""authors"": [<pubkey>], ""#p"": [<pubkey>]}]
[""CLOSED"", <subscription_id>, ""auth-required: cannot count other people's DMs""]"
What does Changes mean?,"remote-signer-keyis introduced, passed in bunker url, clients must differentiate betweenremote-signer-pubkeyanduser-pubkey, must callget_public_keyafter connect, nip05 login is removed, create_account moved to another NIP."
What does Rationale mean?,"Private keys should be exposed to as few systems - apps, operating systems, devices - as possible as each system adds to the attack surface.

This NIP describes a method for 2-way communication between a remote signer and a Nostr client. The remote signer could be, for example, a hardware device dedicated to signing Nostr events, while the client is a normal Nostr client."
What does Terminology mean?,"- user: A person that is trying to use Nostr.
- client: A user-facing application thatuseris looking at and clicking buttons in. This application will send requests toremote-signer.
- remote-signer: A daemon or server running somewhere that will answer requests fromclient, also known as ""bunker"".
- client-keypair/pubkey: The keys generated byclient. Used to encrypt content and communicate withremote-signer.
- remote-signer-keypair/pubkey: The keys used byremote-signerto encrypt content and communicate withclient. This keypair MAY be same asuser-keypair, but not necessarily.
- user-keypair/pubkey: The actual keys representinguser(that will be used to sign events in response tosign_eventrequests, for example). Theremote-signergenerally has control over these keys.

All pubkeys specified in this NIP are in hex format."
What does Overview mean?,"- clientgeneratesclient-keypair. This keypair doesn't need to be communicated tousersince it's largely disposable.clientmight choose to store it locally and they should delete it on logout;
- A connection is established (see below),remote-signerlearnsclient-pubkey,clientlearnsremote-signer-pubkey.
- clientusesclient-keypairto send requests toremote-signerbyp-tagging and encrypting toremote-signer-pubkey;
- remote-signerresponds toclientbyp-tagging and encrypting to theclient-pubkey.
- clientrequestsget_public_keyto learnuser-pubkey."
What does Initiating a connection mean?,There are two ways to initiate a connection:
What does Direct connection initiated byremote-signer mean?,"remote-signerprovides connection token in the form:

bunker://<remote-signer-pubkey>?relay=<wss://relay-to-connect-on>&relay=<wss://another-relay-to-connect-on>&secret=<optional-secret-value>

userpasses this token toclient, which then sendsconnectrequest toremote-signervia the specified relays. Optional secret can be used for single successfully established connection only,remote-signerSHOULD ignore new attempts to establish connection with old secret."
What does Direct connection initiated by theclient mean?,"clientprovides a connection token usingnostrconnect://as the protocol, andclient-pubkeyas the origin. Additional information should be passed as query parameters:

- relay(required) - one or more relay urls on which theclientis listening for responses from theremote-signer.
- secret(required) - a short random string that theremote-signershould return as theresultfield of its response.
- perms(optional) - a comma-separated list of permissions theclientis requesting be approved by theremote-signer
- name(optional) - the name of theclientapplication
- url(optional) - the canonical url of theclientapplication
- image(optional) - a small image representing theclientapplication

Here's an example:

nostrconnect://83f3b2ae6aa368e8275397b9c26cf550101d63ebaab900d19dd4a4429f5ad8f5?relay=wss%3A%2F%2Frelay1.example.com&perms=nip44_encrypt%2Cnip44_decrypt%2Csign_event%3A13%2Csign_event%3A14%2Csign_event%3A1059&name=My+Client&secret=0s8j2djs&relay=wss%3A%2F%2Frelay2.example2.com

userpasses this token toremote-signer, which then sendsconnectresponseevent to theclient-pubkeyvia the specified relays. Client discoversremote-signer-pubkeyfrom connect response author.secretvalue MUST be provided to avoid connection spoofing,clientMUST validate thesecretreturned byconnectresponse."
What does Request Eventskind: 24133 mean?,"jsonc
{
""kind"": 24133,
""pubkey"": <local_keypair_pubkey>,
""content"": <nip44(<request>)>,
""tags"": [[""p"", <remote-signer-pubkey>]],
}

Thecontentfield is a JSON-RPC-like message that isNIP-44encrypted and has the following structure:

jsonc
{
""id"": <random_string>,
""method"": <method_name>,
""params"": [array_of_strings]
}

- idis a random string that is a request ID. This same ID will be sent back in the response payload.
- methodis the name of the method/command (detailed below).
- paramsis a positional array of string parameters."
What does Methods/Commands mean?,"Each of the following are methods that theclientsends to theremote-signer.

| Command                  | Params                                                                        | Result                                                                 |
| ------------------------ | -------------------------------------------------                             | ---------------------------------------------------------------------- |
|connect|[<remote-signer-pubkey>, <optional_secret>, <optional_requested_permissions>]| ""ack"" OR<required-secret-value>|
|sign_event|[<{kind, content, tags, created_at}>]|json_stringified(<signed_event>)|
|ping|[]| ""pong""                                                                 |
|get_public_key|[]|<user-pubkey>|
|nip04_encrypt|[<third_party_pubkey>, <plaintext_to_encrypt>]|<nip04_ciphertext>|
|nip04_decrypt|[<third_party_pubkey>, <nip04_ciphertext_to_decrypt>]|<plaintext>|
|nip44_encrypt|[<third_party_pubkey>, <plaintext_to_encrypt>]|<nip44_ciphertext>|
|nip44_decrypt|[<third_party_pubkey>, <nip44_ciphertext_to_decrypt>]|<plaintext>|"
What does Requested permissions mean?,"Theconnectmethod may be provided withoptional_requested_permissionsfor user convenience. The permissions are a comma-separated list ofmethod[:params], i.e.nip44_encrypt,sign_event:4meaning permissions to callnip44_encryptand to callsign_eventwithkind:4. Optional parameter forsign_eventis the kind number, parameters for other methods are to be defined later. Same permission format may be used forpermsfield ofmetadatainnostrconnect://string."
What does Response Eventskind:24133 mean?,"json
{
""id"": <id>,
""kind"": 24133,
""pubkey"": <remote-signer-pubkey>,
""content"": <nip44(<response>)>,
""tags"": [[""p"", <client-pubkey>]],
""created_at"": <unix timestamp in seconds>
}

Thecontentfield is a JSON-RPC-like message that isNIP-44encrypted and has the following structure:

json
{
""id"": <request_id>,
""result"": <results_string>,
""error"": <optional_error_string>
}

- idis the request ID that this response is for.
- resultsis a string of the result of the call (this can be either a string or a JSON stringified object)
- error,optionally, it is an error in string form, if any. Its presence indicates an error with the request."
What does Example flow for signing an event mean?,"- remote-signer-pubkeyisfa984bd7dbb282f07e16e7ae87b26a2a7b9b90b7246a44771f0cf5ae58018f52
- user-pubkeyis alsofa984bd7dbb282f07e16e7ae87b26a2a7b9b90b7246a44771f0cf5ae58018f52
- client-pubkeyiseff37350d839ce3707332348af4549a96051bd695d3223af4aabce4993531d86"
What does Signature request mean?,"jsonc
{
""kind"": 24133,
""pubkey"": ""eff37350d839ce3707332348af4549a96051bd695d3223af4aabce4993531d86"",
""content"": nip44({
""id"": <random_string>,
""method"": ""sign_event"",
""params"": [json_stringified(<{
content: ""Hello, I'm signing remotely"",
kind: 1,
tags: [],
created_at: 1714078911
}>)]
}),
""tags"": [[""p"", ""fa984bd7dbb282f07e16e7ae87b26a2a7b9b90b7246a44771f0cf5ae58018f52""]], // p-tags the remote-signer-pubkey
}"
What does Response event mean?,"jsonc
{
""kind"": 24133,
""pubkey"": ""fa984bd7dbb282f07e16e7ae87b26a2a7b9b90b7246a44771f0cf5ae58018f52"",
""content"": nip44({
""id"": <random_string>,
""result"": json_stringified(<signed-event>)
}),
""tags"": [[""p"", ""eff37350d839ce3707332348af4549a96051bd695d3223af4aabce4993531d86""]], // p-tags the client-pubkey
}"
What does Auth Challenges mean?,"An Auth Challenge is a response that aremote-signercan send back when it needs theuserto authenticate via other means. The responsecontentobject will take the following form:

json
{
""id"": <request_id>,
""result"": ""auth_url"",
""error"": <URL_to_display_to_end_user>
}

clientshould display (in a popup or new tab) the URL from theerrorfield and then subscribe/listen for another response from theremote-signer(reusing the same request ID). This event will be sent once the user authenticates in the other window (or will never arrive if the user doesn't authenticate)."
What does Announcingremote-signermetadata mean?,"remote-signerMAY publish it's metadata by usingNIP-05andNIP-89. With NIP-05, a request to<remote-signer>/.well-known/nostr.json?name=_MAY return this:jsonc
{
""names"":{
""_"": <remote-signer-app-pubkey>,
},
""nip46"": {
""relays"": [""wss://relay1"",""wss://relay2""...],
""nostrconnect_url"": ""https://remote-signer-domain.example/<nostrconnect>""
}
}

The<remote-signer-app-pubkey>MAY be used to verify the domain fromremote-signer's NIP-89 event (see below).relaysSHOULD be used to construct a more precisenostrconnect://string for the specificremote-signer.nostrconnect_urltemplate MAY be used to redirect users toremote-signer's connection flow by replacing<nostrconnect>placeholder with an actualnostrconnect://string."
What does Remote signer discovery via NIP-89 mean?,"remote-signerMAY publish a NIP-89kind: 31990event withktag of24133, which MAY also include one or morerelaytags and MAY includenostrconnect_urltag. The semantics ofrelayandnostrconnect_urltags are the same as in the section above.

clientMAY improve UX by discoveringremote-signersusing theirkind: 31990events.clientMAY then pre-generatenostrconnect://strings for theremote-signers, and SHOULD in that case verify thatkind: 31990event's author is mentioned in signer'snostr.json?name=_file as<remote-signer-app-pubkey>."
What does Nostr Wallet Connect (NWC) mean?,draftoptional
What does Theory of Operation mean?,"Fundamentally NWC is communication between aclientandwallet serviceby the means of E2E-encrypted direct messages over a nostr relay. The relay knows the kinds and tags of notes, but not the content of the encrypted payloads. Theuser's identity key is not used to avoid linking payment activity to the user. Ideally unique keys are used for each individual connection.

- Userswho wish to use this NIP to allowclient(s)to interact with their wallet must first acquire a special ""connection"" URI from their NIP-47 compliant wallet application.  The wallet application may provide this URI using a QR screen, or a pasteable string, or some other means.
- Theusershould then copy this URI into theirclient(s)by pasting, or scanning the QR, etc.  Theclient(s)should save this URI and use it later whenever theuser(or theclienton the user's behalf) wants to interact with the wallet.  Theclientshould then request aninfo(13194) event from the relay(s) specified in the URI.  Thewallet servicewill have sent that event to those relays earlier, and the relays will hold it as a replaceable event.
- When theuserinitiates a payment their nostrclientcreate apay_invoicerequest, encrypts it using a token from the URI, and sends it (kind 23194) to the relay(s) specified in the connection URI.  Thewallet servicewill be listening on those relays and will decrypt the request and then contact theuser'swallet application to send the payment.  Thewallet servicewill know how to talk to the wallet application because the connection URI specified relay(s) that have access to the wallet app API.
- Once the payment is complete thewallet servicewill send an encryptedresponse(kind 23195) to theuserover the relay(s) in the URI.
- Thewallet servicemay send encrypted notifications (kind 23196) of wallet events (such as a received payment) to theclient."
What does Events mean?,"There are four event kinds:
-NIP-47 info event: 13194
-NIP-47 request: 23194
-NIP-47 response: 23195
-NIP-47 notification event: 23196"
What does Info Event mean?,"The info event should be a replaceable event that is published by thewallet serviceon the relay to indicate which capabilities it supports.

The content should be a plaintext string with the supported capabilities space-separated, eg.pay_invoice get_balance notifications.

If thewallet servicesupports notifications, the info event SHOULD contain anotificationstag with the supported notification types space-separated, eg.payment_received payment_sent."
What does Request and Response Events mean?,"Both the request and response events SHOULD contain oneptag, containing the public key of thewallet serviceif this is a request, and the public key of theclientif this is a response. The response event SHOULD contain anetag with the id of the request event it is responding to.
Optionally, a request can have anexpirationtag that has a unix timestamp in seconds. If the request is received after this timestamp, it should be ignored.

The content of requests and responses is encrypted withNIP04, and is a JSON-RPCish object with a semi-fixed structure:

Request:jsonc
{
""method"": ""pay_invoice"", // method, string
""params"": { // params, object
""invoice"": ""lnbc50n1..."" // command-related data
}
}

Response:jsonc
{
""result_type"": ""pay_invoice"", //indicates the structure of the result field
""error"": { //object, non-null in case of error
""code"": ""UNAUTHORIZED"", //string error code, see below
""message"": ""human readable error message""
},
""result"": { // result, object. null in case of error.
""preimage"": ""0123456789abcdef..."" // command-related data
}
}

Theresult_typefield MUST contain the name of the method that this event is responding to.
Theerrorfield MUST contain amessagefield with a human readable error message and acodefield with the error code if the command was not successful.
If the command was successful, theerrorfield must be null."
What does Notification Events mean?,"The notification event SHOULD contain oneptag, the public key of theclient.

The content of notifications is encrypted withNIP04, and is a JSON-RPCish object with a semi-fixed structure:

jsonc
{
""notification_type"": ""payment_received"", //indicates the structure of the notification field
""notification"": {
""payment_hash"": ""0123456789abcdef..."" // notification-related data
}
}"
What does Error codes mean?,"- RATE_LIMITED: The client is sending commands too fast. It should retry in a few seconds.
- NOT_IMPLEMENTED: The command is not known or is intentionally not implemented.
- INSUFFICIENT_BALANCE: The wallet does not have enough funds to cover a fee reserve or the payment amount.
- QUOTA_EXCEEDED: The wallet has exceeded its spending quota.
- RESTRICTED: This public key is not allowed to do this operation.
- UNAUTHORIZED: This public key has no wallet connected.
- INTERNAL: An internal error.
- OTHER: Other error."
What does Nostr Wallet Connect URI mean?,"Communication between theclientandwallet servicerequires two keys in order to encrypt and decrypt messages. The connection URI includes the secret key of theclientand only the public key of thewallet service.

Theclientdiscoverswallet serviceby scanning a QR code, handling a deeplink or pasting in a URI.

Thewallet servicegenerates this connection URI with protocolnostr+walletconnect://and base path its 32-byte hex-encodedpubkey, which SHOULD be unique per client connection.

The connection URI contains the following query string parameters:

- relayRequired. URL of the relay where thewallet serviceis connected and will be listening for events. May be more than one.
- secretRequired. 32-byte randomly generated hex encoded string. TheclientMUST use this to sign events and encrypt payloads when communicating with thewallet service. Thewallet serviceMUST use the corresponding public key of this secret to communicate with theclient.Authorization does not require passing keys back and forth.The user can have different keys for different applications. Keys can be revoked and created at will and have arbitrary constraints (eg. budgets).The key is harder to leak since it is not shown to the user and backed up.It improves privacy because the user's main key would not be linked to their payments.
- Authorization does not require passing keys back and forth.
- The user can have different keys for different applications. Keys can be revoked and created at will and have arbitrary constraints (eg. budgets).
- The key is harder to leak since it is not shown to the user and backed up.
- It improves privacy because the user's main key would not be linked to their payments.
- lud16Recommended. A lightning address that clients can use to automatically setup thelud16field on the user's profile if they have none configured.

Theclientshould then store this connection and use it when the user wants to perform actions like paying an invoice. Due to this NIP using ephemeral events, it is recommended to pick relays that do not close connections on inactivity to not drop events, and ideally retain the events until they are either consumed or become stale.

- When theclientsends or receives a message it will use thesecretfrom the connection URI andwallet service'spubkeyto encrypt or decrypt.
- When thewallet servicesends or receives a message it will use its own secret and the corresponding pubkey of theclient'ssecretto encrypt or decrypt. Thewallet serviceSHOULD NOT store the secret it generates for the client and MUST NOT rely on the knowing theclientsecret for general operation."
What does Example connection string mean?,"sh
nostr+walletconnect://b889ff5b1513b641e2a139f661a661364979c5beee91842f8f0ef42ab558e9d4?relay=wss%3A%2F%2Frelay.damus.io&secret=71a8c14c1407c113601079c4302dab36460f0ccd0ad506f1f2dc73b5100e4f3c"
What does pay_invoice mean?,"Description: Requests payment of an invoice.

Request:jsonc
{
""method"": ""pay_invoice"",
""params"": {
""invoice"": ""lnbc50n1..."", // bolt11 invoice
""amount"": 123, // invoice amount in msats, optional
}
}

Response:jsonc
{
""result_type"": ""pay_invoice"",
""result"": {
""preimage"": ""0123456789abcdef..."", // preimage of the payment
""fees_paid"": 123, // value in msats, optional
}
}

Errors:
-PAYMENT_FAILED: The payment failed. This may be due to a timeout, exhausting all routes, insufficient capacity or similar."
What does multi_pay_invoice mean?,"Description: Requests payment of multiple invoices.

Request:jsonc
{
""method"": ""multi_pay_invoice"",
""params"": {
""invoices"": [
{""id"":""4da52c32a1"", ""invoice"": ""lnbc1..."", ""amount"": 123}, // bolt11 invoice and amount in msats, amount is optional
{""id"":""3da52c32a1"", ""invoice"": ""lnbc50n1...""},
],
}
}

Response:

For every invoice in the request, a separate response event is sent. To differentiate between the responses, each
response event contains adtag with the id of the invoice it is responding to; if no id was given, then the
payment hash of the invoice should be used.

jsonc
{
""result_type"": ""multi_pay_invoice"",
""result"": {
""preimage"": ""0123456789abcdef..."", // preimage of the payment
""fees_paid"": 123, // value in msats, optional
}
}

Errors:
-PAYMENT_FAILED: The payment failed. This may be due to a timeout, exhausting all routes, insufficient capacity or similar."
What does pay_keysend mean?,"Request:jsonc
{
""method"": ""pay_keysend"",
""params"": {
""amount"": 123, // invoice amount in msats, required
""pubkey"": ""03..."", // payee pubkey, required
""preimage"": ""0123456789abcdef..."", // preimage of the payment, optional
""tlv_records"": [ // tlv records, optional
{
""type"": 5482373484, // tlv type
""value"": ""0123456789abcdef"" // hex encoded tlv value
}
]
}
}

Response:jsonc
{
""result_type"": ""pay_keysend"",
""result"": {
""preimage"": ""0123456789abcdef..."", // preimage of the payment
""fees_paid"": 123, // value in msats, optional
}
}

Errors:
-PAYMENT_FAILED: The payment failed. This may be due to a timeout, exhausting all routes, insufficient capacity or similar."
What does multi_pay_keysend mean?,"Description: Requests multiple keysend payments.

Has an array of keysends, these follow the same semantics aspay_keysend, just done in a batch

Request:jsonc
{
""method"": ""multi_pay_keysend"",
""params"": {
""keysends"": [
{""id"": ""4c5b24a351"", ""pubkey"": ""03..."", ""amount"": 123},
{""id"": ""3da52c32a1"", ""pubkey"": ""02..."", ""amount"": 567, ""preimage"": ""abc123.."", ""tlv_records"": [{""type"": 696969, ""value"": ""77616c5f6872444873305242454d353736""}]},
],
}
}

Response:

For every keysend in the request, a separate response event is sent. To differentiate between the responses, each
response event contains adtag with the id of the keysend it is responding to; if no id was given, then the
pubkey should be used.

jsonc
{
""result_type"": ""multi_pay_keysend"",
""result"": {
""preimage"": ""0123456789abcdef..."", // preimage of the payment
""fees_paid"": 123, // value in msats, optional
}
}

Errors:
-PAYMENT_FAILED: The payment failed. This may be due to a timeout, exhausting all routes, insufficient capacity or similar."
What does make_invoice mean?,"Request:jsonc
{
""method"": ""make_invoice"",
""params"": {
""amount"": 123, // value in msats
""description"": ""string"", // invoice's description, optional
""description_hash"": ""string"", // invoice's description hash, optional
""expiry"": 213 // expiry in seconds from time invoice is created, optional
}
}

Response:jsonc
{
""result_type"": ""make_invoice"",
""result"": {
""type"": ""incoming"", // ""incoming"" for invoices, ""outgoing"" for payments
""invoice"": ""string"", // encoded invoice, optional
""description"": ""string"", // invoice's description, optional
""description_hash"": ""string"", // invoice's description hash, optional
""preimage"": ""string"", // payment's preimage, optional if unpaid
""payment_hash"": ""string"", // Payment hash for the payment
""amount"": 123, // value in msats
""fees_paid"": 123, // value in msats
""created_at"": unixtimestamp, // invoice/payment creation time
""expires_at"": unixtimestamp, // invoice expiration time, optional if not applicable
""metadata"": {} // generic metadata that can be used to add things like zap/boostagram details for a payer name/comment/etc.
}
}"
What does lookup_invoice mean?,"Request:jsonc
{
""method"": ""lookup_invoice"",
""params"": {
""payment_hash"": ""31afdf1.."", // payment hash of the invoice, one of payment_hash or invoice is required
""invoice"": ""lnbc50n1..."" // invoice to lookup
}
}

Response:jsonc
{
""result_type"": ""lookup_invoice"",
""result"": {
""type"": ""incoming"", // ""incoming"" for invoices, ""outgoing"" for payments
""invoice"": ""string"", // encoded invoice, optional
""description"": ""string"", // invoice's description, optional
""description_hash"": ""string"", // invoice's description hash, optional
""preimage"": ""string"", // payment's preimage, optional if unpaid
""payment_hash"": ""string"", // Payment hash for the payment
""amount"": 123, // value in msats
""fees_paid"": 123, // value in msats
""created_at"": unixtimestamp, // invoice/payment creation time
""expires_at"": unixtimestamp, // invoice expiration time, optional if not applicable
""settled_at"": unixtimestamp, // invoice/payment settlement time, optional if unpaid
""metadata"": {} // generic metadata that can be used to add things like zap/boostagram details for a payer name/comment/etc.
}
}

Errors:
-NOT_FOUND: The invoice could not be found by the given parameters."
What does list_transactions mean?,"Lists invoices and payments. Iftypeis not specified, both invoices and payments are returned.
Thefromanduntilparameters are timestamps in seconds since epoch. Iffromis not specified, it defaults to 0.
Ifuntilis not specified, it defaults to the current time. Transactions are returned in descending order of creation
time.

Request:jsonc
{
""method"": ""list_transactions"",
""params"": {
""from"": 1693876973, // starting timestamp in seconds since epoch (inclusive), optional
""until"": 1703225078, // ending timestamp in seconds since epoch (inclusive), optional
""limit"": 10, // maximum number of invoices to return, optional
""offset"": 0, // offset of the first invoice to return, optional
""unpaid"": true, // include unpaid invoices, optional, default false
""type"": ""incoming"", // ""incoming"" for invoices, ""outgoing"" for payments, undefined for both
}
}

Response:jsonc
{
""result_type"": ""list_transactions"",
""result"": {
""transactions"": [
{
""type"": ""incoming"", // ""incoming"" for invoices, ""outgoing"" for payments
""invoice"": ""string"", // encoded invoice, optional
""description"": ""string"", // invoice's description, optional
""description_hash"": ""string"", // invoice's description hash, optional
""preimage"": ""string"", // payment's preimage, optional if unpaid
""payment_hash"": ""string"", // Payment hash for the payment
""amount"": 123, // value in msats
""fees_paid"": 123, // value in msats
""created_at"": unixtimestamp, // invoice/payment creation time
""expires_at"": unixtimestamp, // invoice expiration time, optional if not applicable
""settled_at"": unixtimestamp, // invoice/payment settlement time, optional if unpaid
""metadata"": {} // generic metadata that can be used to add things like zap/boostagram details for a payer name/comment/etc.
}
],
},
}"
What does get_balance mean?,"Request:jsonc
{
""method"": ""get_balance"",
""params"": {}
}

Response:jsonc
{
""result_type"": ""get_balance"",
""result"": {
""balance"": 10000, // user's balance in msats
}
}"
What does get_info mean?,"Request:jsonc
{
""method"": ""get_info"",
""params"": {}
}

Response:jsonc
{
""result_type"": ""get_info"",
""result"": {
""alias"": ""string"",
""color"": ""hex string"",
""pubkey"": ""hex string"",
""network"": ""string"", // mainnet, testnet, signet, or regtest
""block_height"": 1,
""block_hash"": ""hex string"",
""methods"": [""pay_invoice"", ""get_balance"", ""make_invoice"", ""lookup_invoice"", ""list_transactions"", ""get_info""], // list of supported methods for this connection
""notifications"": [""payment_received"", ""payment_sent""], // list of supported notifications for this connection, optional.
}
}"
What does payment_received mean?,"Description: A payment was successfully received by the wallet.

Notification:jsonc
{
""notification_type"": ""payment_received"",
""notification"": {
""type"": ""incoming"",
""invoice"": ""string"", // encoded invoice
""description"": ""string"", // invoice's description, optional
""description_hash"": ""string"", // invoice's description hash, optional
""preimage"": ""string"", // payment's preimage
""payment_hash"": ""string"", // Payment hash for the payment
""amount"": 123, // value in msats
""fees_paid"": 123, // value in msats
""created_at"": unixtimestamp, // invoice/payment creation time
""expires_at"": unixtimestamp, // invoice expiration time, optional if not applicable
""settled_at"": unixtimestamp, // invoice/payment settlement time
""metadata"": {} // generic metadata that can be used to add things like zap/boostagram details for a payer name/comment/etc.
}
}"
What does payment_sent mean?,"Description: A payment was successfully sent by the wallet.

Notification:jsonc
{
""notification_type"": ""payment_sent"",
""notification"": {
""type"": ""outgoing"",
""invoice"": ""string"", // encoded invoice
""description"": ""string"", // invoice's description, optional
""description_hash"": ""string"", // invoice's description hash, optional
""preimage"": ""string"", // payment's preimage
""payment_hash"": ""string"", // Payment hash for the payment
""amount"": 123, // value in msats
""fees_paid"": 123, // value in msats
""created_at"": unixtimestamp, // invoice/payment creation time
""expires_at"": unixtimestamp, // invoice expiration time, optional if not applicable
""settled_at"": unixtimestamp, // invoice/payment settlement time
""metadata"": {} // generic metadata that can be used to add things like zap/boostagram details for a payer name/comment/etc.
}
}"
What does Example pay invoice flow mean?,"- The user scans the QR code generated by thewallet servicewith theirclientapplication, they follow anostr+walletconnect://deeplink or configure the connection details manually.
- clientsends an event to thewallet servicewith kind23194. The content is apay_invoicerequest. The private key is the secret from the connection string above.
- wallet serviceverifies that the author's key is authorized to perform the payment, decrypts the payload and sends the payment.
- wallet serviceresponds to the event by sending an event with kind23195and content being a response either containing an error message or a preimage."
What does Using a dedicated relay mean?,"This NIP does not specify any requirements on the type of relays used. However, if the user is using a custodial service it might make sense to use a relay that is hosted by the custodial service. The relay may then enforce authentication to prevent metadata leaks. Not depending on a 3rd party relay would also improve reliability in this case."
What does Example NIP-47 info event mean?,"jsonc
{
""id"": ""df467db0a9f9ec77ffe6f561811714ccaa2e26051c20f58f33c3d66d6c2b4d1c"",
""pubkey"": ""c04ccd5c82fc1ea3499b9c6a5c0a7ab627fbe00a0116110d4c750faeaecba1e2"",
""created_at"": 1713883677,
""kind"": 13194,
""tags"": [
[
""notifications"",
""payment_received payment_sent""
]
],
""content"": ""pay_invoice pay_keysend get_balance get_info make_invoice lookup_invoice list_transactions multi_pay_invoice multi_pay_keysend sign_message notifications"",
""sig"": ""31f57b369459b5306a5353aa9e03be7fbde169bc881c3233625605dd12f53548179def16b9fe1137e6465d7e4d5bb27ce81fd6e75908c46b06269f4233c845d8""
}"
What does Proxy Tags mean?,"draftoptional

Nostr events bridged from other protocols such as ActivityPub can link back to the source object by including a""proxy""tag, in the form:

[""proxy"", <id>, <protocol>]

Where:

- <id>is the ID of the source object. The ID format varies depending on the protocol. The ID must be universally unique, regardless of the protocol.
- <protocol>is the name of the protocol, e.g.""activitypub"".

Clients may use this information to reconcile duplicated content bridged from other protocols, or to display a link to the source object.

Proxy tags may be added to any event kind, and doing so indicates that the event did not originate on the Nostr protocol, and instead originated elsewhere on the web."
What does Supported protocols mean?,"This list may be extended in the future.

| Protocol | ID format | Example |
| -------- | --------- | ------- |
|activitypub| URL |https://gleasonator.com/objects/9f524868-c1a0-4ee7-ad51-aaa23d68b526|
|atproto| AT URI |at://did:plc:zhbjlbmir5dganqhueg7y4i3/app.bsky.feed.post/3jt5hlibeol2i|
|rss| URL with guid fragment |https://soapbox.pub/rss/feed.xml#https%3A%2F%2Fsoapbox.pub%2Fblog%2Fmostr-fediverse-nostr-bridge|
|web| URL |https://twitter.com/jack/status/20|"
What does See also mean?,"- FEP-fffd: Proxy Objects
- Mostr bridge"
What does Private Key Encryption mean?,"draftoptional

This NIP defines a method by which clients can encrypt (and decrypt) a user's private key with a password."
What does Symmetric Encryption Key derivation mean?,"PASSWORD = Read from the user. The password should be unicode normalized to NFKC format to ensure that the password can be entered identically on other computers/clients.

LOG_N = Let the user or implementer choose one byte representing a power of 2 (e.g. 18 represents 262,144) which is used as the number of rounds for scrypt. Larger numbers take more time and more memory, and offer better protection:

```
| LOG_N | MEMORY REQUIRED | APPROX TIME ON FAST COMPUTER |
|-------|-----------------|----------------------------- |
| 16    | 64 MiB          | 100 ms                       |
| 18    | 256 MiB         |                              |
| 20    | 1 GiB           | 2 seconds                    |
| 21    | 2 GiB           |                              |
| 22    | 4 GiB           |                              |
```

SALT = 16 random bytes

SYMMETRIC_KEY = scrypt(password=PASSWORD, salt=SALT, log_n=LOG_N, r=8, p=1)

The symmetric key should be 32 bytes long.

This symmetric encryption key is temporary and should be zeroed and discarded after use and not stored or reused for any other purpose."
What does Encrypting a private key mean?,"The private key encryption process is as follows:

PRIVATE_KEY = User's private (secret) secp256k1 key as 32 raw bytes (not hex or bech32 encoded!)

KEY_SECURITY_BYTE = one of:

- 0x00 - if the key has been known to have been handled insecurely (stored unencrypted, cut and paste unencrypted, etc)
- 0x01 - if the key has NOT been known to have been handled insecurely (stored unencrypted, cut and paste unencrypted, etc)
- 0x02 - if the client does not track this data

ASSOCIATED_DATA = KEY_SECURITY_BYTE

NONCE = 24 byte random nonce

CIPHERTEXT = XChaCha20-Poly1305(
plaintext=PRIVATE_KEY,
associated_data=ASSOCIATED_DATA,
nonce=NONCE,
key=SYMMETRIC_KEY
)

VERSION_NUMBER = 0x02

CIPHERTEXT_CONCATENATION = concat(
VERSION_NUMBER,
LOG_N,
SALT,
NONCE,
ASSOCIATED_DATA,
CIPHERTEXT
)

ENCRYPTED_PRIVATE_KEY = bech32_encode('ncryptsec', CIPHERTEXT_CONCATENATION)

The output prior to bech32 encoding should be 91 bytes long.

The decryption process operates in the reverse."
What does Password Unicode Normalization mean?,"The following password input: ""ÅΩẛ̣""
- Unicode Codepoints: U+212B U+2126 U+1E9B U+0323
- UTF-8 bytes: [0xE2, 0x84, 0xAB, 0xE2, 0x84, 0xA6, 0xE1, 0xBA, 0x9B, 0xCC, 0xA3]

Should be converted into the unicode normalized NFKC format prior to use in scrypt: ""ÅΩẛ̣""
- Unicode Codepoints: U+00C5 U+03A9 U+1E69
- UTF-8 bytes: [0xC3, 0x85, 0xCE, 0xA9, 0xE1, 0xB9, 0xA9]"
What does On Key Derivation mean?,"Passwords make poor cryptographic keys. Prior to use as a cryptographic key, two things need to happen:

- An encryption key needs to be deterministically created from the password such that is has a uniform functionally random distribution of bits, such that the symmetric encryption algorithm's assumptions are valid, and
- A slow irreversible algorithm should be injected into the process, so that brute-force attempts to decrypt by trying many passwords are severely hampered.

These are achieved using a password-based key derivation function. We use scrypt, which has been proven to be maximally memory hard and which several cryptographers have indicated to the author is better than argon2 even though argon2 won a competition in 2015."
What does On the symmetric encryption algorithm mean?,"XChaCha20-Poly1305 is typically favored by cryptographers over AES and is less associated with the U.S. government.  It (or it's earlier variant without the 'X') is gaining wide usage, is used in TLS and OpenSSH, and is available in most modern crypto libraries."
What does Recommendations mean?,"It is not recommended that users publish these encrypted private keys to nostr, as cracking a key may become easier when an attacker can amass many encrypted private keys.

It is recommended that clients zero out the memory of passwords and private keys before freeing that memory."
What does Search Capability mean?,draftoptional
What does searchfilter field mean?,"A newsearchfield is introduced forREQmessages from clients:jsonc
{
// other fields on filter object...
""search"": <string>
}searchfield is a string describing a query in a human-readable form, i.e. ""best nostr apps"".
Relays SHOULD interpret the query to the best of their ability and return events that match it.
Relays SHOULD perform matching againstcontentevent field, and MAY perform
matching against other fields if that makes sense in the context of a specific kind.

Results SHOULD be returned in descending order by quality of search result (as defined by the implementation),
not by the usual.created_at. Thelimitfilter SHOULD be applied after sorting by matching score.
A query string may containkey:valuepairs (two words separated by colon), these are extensions, relays SHOULD ignore
extensions they don't support.

Clients may specify several search filters, i.e.[""REQ"", """", { ""search"": ""orange"" }, { ""kinds"": [1, 2], ""search"": ""purple"" }]. Clients may
includekinds,idsand other filter field to restrict the search results to particular event kinds.

Clients SHOULD use the supported_nips field to learn if a relay supportssearchfilter. Clients MAY sendsearchfilter queries to any relay, if they are prepared to filter out extraneous responses from relays that do not support this NIP.

Clients SHOULD query several relays supporting this NIP to compensate for potentially different
implementation details between relays.

Clients MAY verify that events returned by a relay match the specified query in a way that suits the
client's use case, and MAY stop querying relays that have low precision.

Relays SHOULD exclude spam from search results by default if they support some form of spam filtering."
What does Extensions mean?,"Relay MAY support these extensions:
-include:spam- turn off spam filtering, if it was enabled by default
-domain:<domain>- include only events from users whose valid nip05 domain matches the domain
-language:<two letter ISO 639-1 language code>- include only events of a specified language
-sentiment:<negative/neutral/positive>- include only events of a specific sentiment
-nsfw:<true/false>- include or exclude nsfw events (default: true)"
What does Lists mean?,"draftoptional

This NIP defines lists of things that users can create. Lists can contain references to anything, and these references can bepublicorprivate.

Public items in a list are specified in the eventtagsarray, while private items are specified in a JSON array that mimics the structure of the eventtagsarray, but stringified and encrypted using the same scheme fromNIP-04(the shared key is computed using the author's public and private key) and stored in the.content.

When new items are added to an existing list, clients SHOULD append them to the end of the list, so they are stored in chronological order."
What does Standard lists mean?,"Standard lists use normal replaceable events, meaning users may only have a single list of each kind. They have special meaning and clients may rely on them to augment a user's profile or browsing experience.

For example,mute listcan contain the public keys of spammers and bad actors users don't want to see in their feeds or receive annoying notifications from.

| name              | kind  | description                                                 | expected tag items                                                                                  |
| ---               | ---   | ---                                                         | ---                                                                                                 |
| Follow list       |     3 | microblogging basic follow list, seeNIP-02|""p""(pubkeys -- with optional relay hint and petname)                                             |
| Mute list         | 10000 | things the user doesn't want to see in their feeds          |""p""(pubkeys),""t""(hashtags),""word""(lowercase string),""e""(threads)                     |
| Pinned notes      | 10001 | events the user intends to showcase in their profile page   |""e""(kind:1 notes)                                                                                |
| Read/write relays | 10002 | where a user publishes to and where they expect mentions    | seeNIP-65|
| Bookmarks         | 10003 | uncategorized, ""global"" list of things a user wants to save |""e""(kind:1 notes),""a""(kind:30023 articles),""t""(hashtags),""r""(URLs)                   |
| Communities       | 10004 |NIP-72communities the user belongs to             |""a""(kind:34550 community definitions)                                                            |
| Public chats      | 10005 |NIP-28chat channels the user is in                |""e""(kind:40 channel definitions)                                                                 |
| Blocked relays    | 10006 | relays clients should never connect to                      |""relay""(relay URLs)                                                                              |
| Search relays     | 10007 | relays clients should use when performing search queries    |""relay""(relay URLs)                                                                              |
| Simple groups     | 10009 |NIP-29groups the user is in                       |""group""(NIP-29group id + relay URL + optional group name),""r""for each relay in use |
| Favorite relays   | 10012 | user favorite relays and pointers to relay sets             |""relay""(relay URLs) and""a""(kind:30002 relay set)                                             |
| Interests         | 10015 | topics a user may be interested in and pointers             |""t""(hashtags) and""a""(kind:30015 interest set)                                                |
| Media follows     | 10020 | multimedia (photos, short video) follow list                |""p""(pubkeys -- with optional relay hint and petname)                                             |
| Emojis            | 10030 | user preferred emojis and pointers to emoji sets            |""emoji""(seeNIP-30) and""a""(kind:30030 emoji set)                                    |
| DM relays         | 10050 | Where to receiveNIP-17direct messages            |""relay""(seeNIP-17)                                                                     |
| Good wiki authors | 10101 |NIP-54user recommended wiki authors               |""p""(pubkeys)                                                                                     |
| Good wiki relays  | 10102 |NIP-54relays deemed to only host useful articles  |""relay""(relay URLs)                                                                              |"
What does Sets mean?,"Sets are lists with well-defined meaning that can enhance the functionality and the UI of clients that rely on them. Unlike standard lists, users are expected to have more than one set of each kind, therefore each of them must be assigned a different""d""identifier.

For example,relay setscan be displayed in a dropdown UI to give users the option to switch to which relays they will publish an event or from which relays they will read the replies to an event;curation setscan be used by apps to showcase curations made by others tagged to different topics.

Aside from their main identifier, the""d""tag, sets can optionally have a""title"", an""image""and a""description""tags that can be used to enhance their UI.

| name                  | kind  | description                                                                                  | expected tag items                                                                  |
| ---                   | ---   | ---                                                                                          | ---                                                                                 |
| Follow sets           | 30000 | categorized groups of users a client may choose to check out in different circumstances      |""p""(pubkeys)                                                                     |
| Relay sets            | 30002 | user-defined relay groups the user can easily pick and choose from during various operations |""relay""(relay URLs)                                                              |
| Bookmark sets         | 30003 | user-defined bookmarks categories , for when bookmarks must be in labeled separate groups    |""e""(kind:1 notes),""a""(kind:30023 articles),""t""(hashtags),""r""(URLs)   |
| Curation sets         | 30004 | groups of articles picked by users as interesting and/or belonging to the same category      |""a""(kind:30023 articles),""e""(kind:1 notes)                                   |
| Curation sets         | 30005 | groups of videos picked by users as interesting and/or belonging to the same category        |""a""(kind:21 videos)                                                              |
| Kind mute sets        | 30007 | mute pubkeys by kinds""d""tag MUST be the kind string                                   |""p""(pubkeys)                                                                     |
| Interest sets         | 30015 | interest topics represented by a bunch of ""hashtags""                                         |""t""(hashtags)                                                                    |
| Emoji sets            | 30030 | categorized emoji groups                                                                     |""emoji""(seeNIP-30)                                                     |
| Release artifact sets | 30063 | group of artifacts of a software release                                                     |""e""(kind:1063file metadataevents),""a""(software application event) |
| App curation sets     | 30267 | references to multiple software applications                                                 |""a""(software application event)                                                  |
| Calendar              | 31924 | a set of events categorized in any way                                                       |""a""(calendar event event)                                                        |
| Starter packs         | 39089 | a named set of profiles to be shared around with the goal of being followed together         |""p""(pubkeys)                                                                     |
| Media starter packs   | 39092 | same as above, but specific to multimedia (photos, short video) clients                      |""p""(pubkeys)                                                                     |"
What does Deprecated standard lists mean?,"Some clients have used these lists in the past, but they should work on transitioning to thestandard formatsabove.

| kind  | ""d"" tag         | use instead                   |
| ---   | ---             | ---                           |
| 30000 |""mute""| kind 10000mute list|
| 30001 |""pin""| kind 10001pin list|
| 30001 |""bookmark""| kind 10003bookmarks list|
| 30001 |""communities""| kind 10004communities list|"
What does Amute listwith some public items and some encrypted items mean?,"json
{
""id"": ""a92a316b75e44cfdc19986c634049158d4206fcc0b7b9c7ccbcdabe28beebcd0"",
""pubkey"": ""854043ae8f1f97430ca8c1f1a090bdde6488bd5115c7a45307a2a212750ae4cb"",
""created_at"": 1699597889,
""kind"": 10000,
""tags"": [
[""p"", ""07caba282f76441955b695551c3c5c742e5b9202a3784780f8086fdcdc1da3a9""],
[""p"", ""a55c15f5e41d5aebd236eca5e0142789c5385703f1a7485aa4b38d94fd18dcc4""]
],
""content"": ""TJob1dQrf2ndsmdbeGU+05HT5GMnBSx3fx8QdDY/g3NvCa7klfzgaQCmRZuo1d3WQjHDOjzSY1+MgTK5WjewFFumCcOZniWtOMSga9tJk1ky00tLoUUzyLnb1v9x95h/iT/KpkICJyAwUZ+LoJBUzLrK52wNTMt8M5jSLvCkRx8C0BmEwA/00pjOp4eRndy19H4WUUehhjfV2/VV/k4hMAjJ7Bb5Hp9xdmzmCLX9+64+MyeIQQjQAHPj8dkSsRahP7KS3MgMpjaF8nL48Bg5suZMxJayXGVp3BLtgRZx5z5nOk9xyrYk+71e2tnP9IDvSMkiSe76BcMct+m7kGVrRcavDI4n62goNNh25IpghT+a1OjjkpXt9me5wmaL7fxffV1pchdm+A7KJKIUU3kLC7QbUifF22EucRA9xiEyxETusNludBXN24O3llTbOy4vYFsq35BeZl4v1Cse7n2htZicVkItMz3wjzj1q1I1VqbnorNXFgllkRZn4/YXfTG/RMnoK/bDogRapOV+XToZ+IvsN0BqwKSUDx+ydKpci6htDRF2WDRkU+VQMqwM0CoLzy2H6A2cqyMMMD9SLRRzBg==?iv=S3rFeFr1gsYqmQA7bNnNTQ=="",
""sig"": ""1173822c53261f8cffe7efbf43ba4a97a9198b3e402c2a1df130f42a8985a2d0d3430f4de350db184141e45ca844ab4e5364ea80f11d720e36357e1853dba6ca""
}"
What does Acuration setof articles and notes about yaks mean?,"json
{
""id"": ""567b41fc9060c758c4216fe5f8d3df7c57daad7ae757fa4606f0c39d4dd220ef"",
""pubkey"": ""d6dc95542e18b8b7aec2f14610f55c335abebec76f3db9e58c254661d0593a0c"",
""created_at"": 1695327657,
""kind"": 30004,
""tags"": [
[""d"", ""jvdy9i4""],
[""title"", ""Yaks""],
[""image"", ""https://cdn.britannica.com/40/188540-050-9AC748DE/Yak-Himalayas-Nepal.jpg""],
[""description"", ""The domestic yak, also known as the Tartary ox, grunting ox, or hairy cattle, is a species of long-haired domesticated cattle found throughout the Himalayan region of the Indian subcontinent, the Tibetan Plateau, Gilgit-Baltistan, Tajikistan and as far north as Mongolia and Siberia.""],
[""a"", ""30023:26dc95542e18b8b7aec2f14610f55c335abebec76f3db9e58c254661d0593a0c:95ODQzw3ajNoZ8SyMDOzQ""],
[""a"", ""30023:54af95542e18b8b7aec2f14610f55c335abebec76f3db9e58c254661d0593a0c:1-MYP8dAhramH9J5gJWKx""],
[""a"", ""30023:f8fe95542e18b8b7aec2f14610f55c335abebec76f3db9e58c254661d0593a0c:D2Tbd38bGrFvU0bIbvSMt""],
[""e"", ""d78ba0d5dce22bfff9db0a9e996c9ef27e2c91051de0c4e1da340e0326b4941e""]
],
""content"": """",
""sig"": ""a9a4e2192eede77e6c9d24ddfab95ba3ff7c03fbd07ad011fff245abea431fb4d3787c2d04aad001cb039cb8de91d83ce30e9a94f82ac3c5a2372aa1294a96bd""
}"
What does Arelease artifact setof an Example App mean?,"jsonc
{
""id"": ""567b41fc9060c758c4216fe5f8d3df7c57daad7ae757fa4606f0c39d4dd220ef"",
""pubkey"": ""d6dc95542e18b8b7aec2f14610f55c335abebec76f3db9e58c254661d0593a0c"",
""created_at"": 1695327657,
""kind"": 30063,
""content"": ""Release notes in markdown"",
""tags"": [
[""d"", ""com.example.app@0.0.1""],
[""e"", ""d78ba0d5dce22bfff9db0a9e996c9ef27e2c91051de0c4e1da340e0326b4941e""], // Windows exe
[""e"", ""f27e2c91051de0c4e1da0d5dce22bfff9db0a9340e0326b4941ed78bae996c9e""], // MacOS dmg
[""e"", ""9d24ddfab95ba3ff7c03fbd07ad011fff245abea431fb4d3787c2d04aad02332""], // Linux AppImage
[""e"", ""340e0326b340e0326b4941ed78ba340e0326b4941ed78ba340e0326b49ed78ba""], // PWA
[""a"", ""32267:d6dc95542e18b8b7aec2f14610f55c335abebec76f3db9e58c254661d0593a0c:com.example.app""] // Reference to parent software application
],
""content"": ""Example App is a decentralized marketplace for apps"",
""sig"": ""a9a4e2192eede77e6c9d24ddfab95ba3ff7c03fbd07ad011fff245abea431fb4d3787c2d04aad001cb039cb8de91d83ce30e9a94f82ac3c5a2372aa1294a96bd""
}"
What does Anapp curation set mean?,"jsonc
{
""id"": ""d8037fa866eb5acd2159960b3ada7284172f7d687b5289cc72a96ca2b431b611"",
""pubkey"": ""78ce6faa72264387284e647ba6938995735ec8c7d5c5a65737e55130f026307d"",
""sig"": ""c1ce0a04521c020ae7485307cd86285530c1f778766a3fd594d662a73e7c28f307d7cd9a9ab642ae749fce62abbabb3a32facfe8d19a21fba551b60fae863d95"",
""kind"": 30267,
""created_at"": 1729302793,
""content"": ""My nostr app selection"",
""tags"": [
[""d"", ""nostr""],
[""a"", ""32267:7579076d9aff0a4cfdefa7e2045f2486c7e5d8bc63bfc6b45397233e1bbfcb19:com.example.app1""],
[""a"", ""32267:045f2486c7e5d8bc63bfc6b45397233e1bbfcb197579076d9aff0a4cfdefa7e2:net.example.app2""],
[""a"", ""32267:264387284e647ba6938995735ec8c7d5c5a6f026307d78ce6faa725737e55130:pl.code.app3""]
]
}"
What does Encryption process pseudocode mean?,"scala
val private_items = [
[""p"", ""07caba282f76441955b695551c3c5c742e5b9202a3784780f8086fdcdc1da3a9""],
[""a"", ""a55c15f5e41d5aebd236eca5e0142789c5385703f1a7485aa4b38d94fd18dcc4""],
]
val base64blob = nip04.encrypt(json.encode_to_string(private_items))
event.content = base64blob"
What does Calendar Events mean?,"draftoptional

This specification defines calendar events representing an occurrence at a specific moment or between moments. These calendar events areaddressableand deletable perNIP-09.

Unlike the termcalendar eventspecific to this NIP, the termeventis used broadly in all the NIPs to describe any Nostr event. The distinction is being made here to discern between the two terms."
What does Date-Based Calendar Event mean?,"This kind of calendar event starts on a date and ends before a different date in the future. Its use is appropriate for all-day or multi-day events where time and time zone hold no significance. e.g., anniversary, public holidays, vacation days.

It's anaddressable eventofkind:31922.

The.contentof these events SHOULD be a description of the calendar event.

Aside from the common tags, this also takes the following tags:

- start(required) inclusive start date in ISO 8601 format (YYYY-MM-DD). Must be less thanend, if it exists.
- end(optional) exclusive end date in ISO 8601 format (YYYY-MM-DD). If omitted, the calendar event ends on the same date asstart.

Example:

```yaml
{
""id"": <32-bytes lowercase hex-encoded SHA-256 of the the serialized event data>,
""pubkey"": <32-bytes lowercase hex-encoded public key of the event creator>,
""created_at"":,
""kind"": 31922,
""content"": """",
""tags"": [
[""d"", """"],

```
[""title"", ""<title of calendar event>""],

// dates
[""start"", ""<YYYY-MM-DD>""],
[""end"", ""<YYYY-MM-DD>""],

// location
[""location"", ""<location>""],
[""g"", ""<geohash>""],

// participants
[""p"", ""<32-bytes hex of a pubkey>"", ""<optional recommended relay URL>"", ""<role>""],
[""p"", ""<32-bytes hex of a pubkey>"", ""<optional recommended relay URL>"", ""<role>""],
```

]
}
```"
What does Time-Based Calendar Event mean?,"This kind of calendar event spans between a start time and end time.

It's anaddressable eventofkind:31923.

The.contentof these events should be a description of the calendar event. It is required but can be an empty string.

Aside from the common tags, this also takes the following tags:

- start(required) inclusive start Unix timestamp in seconds. Must be less thanend, if it exists.
- end(optional) exclusive end Unix timestamp in seconds. If omitted, the calendar event ends instantaneously.
- start_tzid(optional) time zone of the start timestamp, as defined by the IANA Time Zone Database. e.g.,America/Costa_Rica
- end_tzid(optional) time zone of the end timestamp, as defined by the IANA Time Zone Database. e.g.,America/Costa_Rica. If omitted andstart_tzidis provided, the time zone of the end timestamp is the same as the start timestamp.

```yaml
{
""id"": <32-bytes lowercase hex-encoded SHA-256 of the the serialized event data>,
""pubkey"": <32-bytes lowercase hex-encoded public key of the event creator>,
""created_at"":,
""kind"": 31923,
""content"": """",
""tags"": [
[""d"", """"],

```
[""title"", ""<title of calendar event>""],
[""summary"", ""<brief description of the calendar event>""],
[""image"", ""<string with image URI>""],

// timestamps
[""start"", ""<unix timestamp in seconds>""],
[""end"", ""<unix timestamp in seconds>""],

[""start_tzid"", ""<IANA Time Zone Database identifier>""],
[""end_tzid"", ""<IANA Time Zone Database identifier>""],

// location
[""location"", ""<location>""],
[""g"", ""<geohash>""],

// participants
[""p"", ""<32-bytes hex of a pubkey>"", ""<optional recommended relay URL>"", ""<role>""],
[""p"", ""<32-bytes hex of a pubkey>"", ""<optional recommended relay URL>"", ""<role>""],
```

]
}
```"
What does Calendar mean?,"A calendar is a collection of calendar events, represented as a customaddressable listevent using kind31924. A user can have multiple calendars. One may create a calendar to segment calendar events for specific purposes. e.g., personal, work, travel, meetups, and conferences.

The.contentof these events should be a detailed description of the calendar. It is required but can be an empty string.

- d(required) universally unique identifier. Generated by the client creating the calendar.
- title(required) calendar title
- a(repeated) reference tag to kind31922or31923calendar event being responded to

yaml
{
""id"": <32-bytes lowercase hex-encoded SHA-256 of the the serialized event data>,
""pubkey"": <32-bytes lowercase hex-encoded public key of the event creator>,
""created_at"": <unix timestamp in seconds>,
""kind"": 31924,
""content"": ""<description of calendar>"",
""tags"": [
[""d"", ""<random-identifier>""],
[""title"", ""<calendar title>""],
[""a"", ""<31922 or 31923>:<calendar event author pubkey>:<d-identifier of calendar event>"", ""<optional relay url>""],
[""a"", ""<31922 or 31923>:<calendar event author pubkey>:<d-identifier of calendar event>"", ""<optional relay url>""]
]
}"
What does Calendar Event RSVP mean?,"A calendar event RSVP is a response to a calendar event to indicate a user's attendance intention.

If a calendar event tags a pubkey, that can be interpreted as the calendar event creator inviting that user to attend. Clients MAY choose to prompt the user to RSVP for the calendar event.

Any user may RSVP, even if they were not tagged on the calendar event. Clients MAY choose to prompt the calendar event creator to invite the user who RSVP'd. Clients also MAY choose to ignore these RSVPs.

This NIP is intentionally not defining who is authorized to attend a calendar event if the user who RSVP'd has not been tagged. It is up to the calendar event creator to determine the semantics.

This NIP is also intentionally not defining what happens if a calendar event changes after an RSVP is submitted.

The RSVP MUST have anatag of the event coordinates to the calendar event, and optionally anetag of the id of the specific calendar event revision. If anetag is present, clients SHOULD interpret it as an indication that the RSVP is a response to that revision of the calendar event, and MAY interpret it to not necessarily apply to other revisions of the calendar event.

The RSVP MAY tag the author of the calendar event it is in response to using aptag so that clients can easily query all RSVPs that pertain to the author.

The RSVP is anaddressable eventofkind:31925.

The.contentof these events is optional and should be a free-form note that adds more context to this calendar event response.

The list of tags is as follows:

- a(required) coordinates to a kind31922or31923calendar event being responded to.
- e(optional) event id of a kind31922or31923calendar event being responded to.
- d(required) universally unique identifier. Generated by the client creating the calendar event RSVP.
- status(required)accepted,declined, ortentative. Determines attendance status to the referenced calendar event.
- fb(optional)freeorbusy. Determines if the user would be free or busy for the duration of the calendar event. This tag must be omitted or ignored if thestatuslabel is set todeclined.
- p(optional) pubkey of the author of the calendar event being responded to.

yaml
{
""id"": <32-bytes lowercase hex-encoded SHA-256 of the the serialized event data>,
""pubkey"": <32-bytes lowercase hex-encoded public key of the event creator>,
""created_at"": <unix timestamp in seconds>,
""kind"": 31925,
""content"": ""<note>"",
""tags"": [
[""e"", ""<kind 31922 or 31923 event id"", ""<optional recommended relay URL>""]
[""a"", ""<31922 or 31923>:<calendar event author pubkey>:<d-identifier of calendar event>"", ""<optional recommended relay URL>""],
[""d"", ""<random-identifier>""],
[""status"", ""<accepted/declined/tentative>""],
[""fb"", ""<free/busy>""],
[""p"", ""<hex pubkey of kind 31922 or 31923 event>"", ""<optional recommended relay URL>""]
]
}"
What does Unsolved Limitations mean?,- No private events
What does Recurring Calendar Events mean?,"Recurring calendar events come with a lot of complexity, making it difficult for software and humans to deal with. This complexity includes time zone differences between invitees, daylight savings, leap years, multiple calendar systems, one-off changes in schedule or other metadata, etc.

This NIP intentionally omits support for recurring calendar events and pushes that complexity up to clients to manually implement if they desire. i.e., individual calendar events with duplicated metadata represent recurring calendar events."
What does Live Activities mean?,"draftoptional

Service providers want to offer live activities to the Nostr network in such a way that participants can easily log and query by clients. This NIP describes a general framework to advertise the involvement of pubkeys in such live activities."
What does Live Event mean?,"A special event withkind:30311""Live Event"" is defined as anaddressable eventof publicptags. Eachptag SHOULD have adisplayablemarker name for the current role (e.g.Host,Speaker,Participant) of the user in the event and the relay information MAY be empty. This event will be constantly updated as participants join and leave the activity.

For example:

jsonc
{
""kind"": 30311,
""tags"": [
[""d"", ""<unique identifier>""],
[""title"", ""<name of the event>""],
[""summary"", ""<description>""],
[""image"", ""<preview image url>""],
[""t"", ""hashtag""]
[""streaming"", ""<url>""],
[""recording"", ""<url>""], // used to place the edited video once the activity is over
[""starts"", ""<unix timestamp in seconds>""],
[""ends"", ""<unix timestamp in seconds>""],
[""status"", ""<planned, live, ended>""],
[""current_participants"", ""<number>""],
[""total_participants"", ""<number>""],
[""p"", ""91cf9..4e5ca"", ""wss://provider1.com/"", ""Host"", ""<proof>""],
[""p"", ""14aeb..8dad4"", ""wss://provider2.com/nostr"", ""Speaker""],
[""p"", ""612ae..e610f"", ""ws://provider3.com/ws"", ""Participant""],
[""relays"", ""wss://one.com"", ""wss://two.com"", /*...*/],
[""pinned"", ""<event id of pinned live chat message>""],
],
""content"": """",
// other fields...
}

A distinctdtag should be used for each activity. All other tags are optional.

Providers SHOULD keep the participant list small (e.g. under 1000 users) and, when limits are reached, Providers SHOULD select which participants get named in the event. Clients should not expect a comprehensive list. Once the activity ends, the event can be deleted or updated to summarize the activity and provide async content (e.g. recording of the event).

Clients are expected to subscribe tokind:30311events in general or for given follow lists and statuses. Clients MAY display participants' roles in activities as well as access points to join the activity.

Live Activity management clients are expected to constantly updatekind:30311during the event. Clients MAY choose to considerstatus=liveevents after 1hr without any update asended. Thestartsandendstimestamp SHOULD be updated when the status changes to and fromlive

The activity MUST be linked to using theNIP-19naddrcode along with theatag."
What does Proof of Agreement to Participate mean?,"Event owners can add proof as the 5th term in eachptag to clarify the participant's agreement in joining the event. The proof is a signed SHA256 of the completeaTag of the event (kind:pubkey:dTag) by eachp's private key, encoded in hex.

Clients MAY only display participants if the proof is available or MAY display participants as ""invited"" if the proof is not available.

This feature is important to avoid malicious event owners adding large account holders to the event, without their knowledge, to lure their followers into the malicious owner's trap."
What does Live Chat Message mean?,"Eventkind:1311is live chat's channel message. Clients MUST include theatag of the activity. Anetag denotes the direct parent message this post is replying to.

jsonc
{
""kind"": 1311,
""tags"": [
[""a"", ""30311:<Community event author pubkey>:<d-identifier of the community>"", ""<Optional relay url>"", ""root""],
],
""content"": ""Zaps to live streams is beautiful."",
// other fields...
}

qtags MAY be used when citing events in the.contentwithNIP-21.

json
[""q"", ""<event-id> or <event-address>"", ""<relay-url>"", ""<pubkey-if-a-regular-event>""]

Hosts may choose to pin one or more live chat messages by updating thepinnedtags in the live event kind30311."
What does Live Streaming mean?,"json
{
""id"": ""57f28dbc264990e2c61e80a883862f7c114019804208b14da0bff81371e484d2"",
""pubkey"": ""1597246ac22f7d1375041054f2a4986bd971d8d196d7997e48973263ac9879ec"",
""created_at"": 1687182672,
""kind"": 30311,
""tags"": [
[""d"", ""demo-cf-stream""],
[""title"", ""Adult Swim Metalocalypse""],
[""summary"", ""Live stream from IPTV-ORG collection""],
[""streaming"", ""https://adultswim-vodlive.cdn.turner.com/live/metalocalypse/stream.m3u8""],
[""starts"", ""1687182672""],
[""status"", ""live""],
[""t"", ""animation""],
[""t"", ""iptv""],
[""image"", ""https://i.imgur.com/CaKq6Mt.png""]
],
""content"": """",
""sig"": ""5bc7a60f5688effa5287244a24768cbe0dcd854436090abc3bef172f7f5db1410af4277508dbafc4f70a754a891c90ce3b966a7bc47e7c1eb71ff57640f3d389""
}"
What does Live Streaming chat message mean?,"json
{
""id"": ""97aa81798ee6c5637f7b21a411f89e10244e195aa91cb341bf49f718e36c8188"",
""pubkey"": ""3f770d65d3a764a9c5cb503ae123e62ec7598ad035d836e2a810f3877a745b24"",
""created_at"": 1687286726,
""kind"": 1311,
""tags"": [
[""a"", ""30311:1597246ac22f7d1375041054f2a4986bd971d8d196d7997e48973263ac9879ec:demo-cf-stream"", """", ""root""]
],
""content"": ""Zaps to live streams is beautiful."",
""sig"": ""997f62ddfc0827c121043074d50cfce7a528e978c575722748629a4137c45b75bdbc84170bedc723ef0a5a4c3daebf1fef2e93f5e2ddb98e5d685d022c30b622""
}"
What does Wiki mean?,"draftoptional

This NIP defineskind:30818(anaddressable event) for descriptions (or encyclopedia entries) of particular subjects, and it's expected that multiple people will write articles about the exact same subjects, with either small variations or completely independent content.

Articles are identified by lowercase, normalized asciidtags."
What does Articles mean?,"json
{
""content"": ""A wiki is a hypertext publication collaboratively edited and managed by its own audience."",
""tags"": [
[""d"", ""wiki""],
[""title"", ""Wiki""],
]
}"
What does dtag normalization rules mean?,"- Any non-letter character MUST be converted to a-.
- All letters MUST be converted to lowercase."
What does Optional extra tags mean?,"- title: for when the display title should be different from thedtag.
- summary: for display in lists.
- aande: for referencing the original event a wiki article was forked from."
What does Merge Requests mean?,"Eventkind:818represents a request to merge from a forked article into the source. It is directed to a pubkey and references the original article and the modified event.

[INSERT EVENT EXAMPLE]"
What does Redirects mean?,"Eventkind:30819is also defined to stand for ""wiki redirects"", i.e. if one thinksShell structureshould redirect toThin-shell structurethey can issue one of these events instead of replicating the content. These events can be used for automatically redirecting between articles on a client, but also for generating crowdsourced ""disambiguation"" pages (common in Wikipedia).

[INSERT EVENT EXAMPLE]"
What does How to decide what article to display mean?,"As there could be many articles for each given name, some kind of prioritization must be done by clients. Criteria for this should vary between users and clients, but some means that can be used are described below:"
What does Contact lists mean?,NIP-02contact lists can form the basis of a recommendation system that is then expanded with relay lists and reaction lists through nested queries. These lists form a good starting point only because they are so widespread.
What does Wiki-related contact lists mean?,NIP-51lists can also be used to create a list of users that are trusted only in the context of wiki authorship or wiki curationship.
What does Forks mean?,"Wiki-events can tag other wiki-events with aforkmarker to specify that this event came from a different version. Bothaandetags SHOULD be used and have theforkmarker applied, to identify the exact version it was forked from."
What does Deference mean?,"Wiki-events can tag other wiki-events with adefermarker to indicate that it considers someone else's entry as a ""better"" version of itself. If using adefermarker bothaandetags SHOULD be used.

This is a stronger signal of trust than a+reaction.

This marker is useful when a user edits someone else's entry; if the original author includes the editor's changes and the editor doesn't want to keep/maintain an independent version, thelinktag could effectively be a considered a ""deletion"" of the editor's version and putting that pubkey's WoT weight behind the original author's version."
What does Why Asciidoc? mean?,"Wikitext isgarbageand Markdown is not powerful enough (besides being too freeform and unspecified and prone to generate incompatibilities in the future).

Asciidoc has a strict spec, multiple implementations in many languages, and support for features that are very much necessary in a wiki article, likesidebars,tables(with rich markup inside cells), many levels ofheadings,footnotes,superscriptandsubscriptmarkup anddescription lists. It is also arguably easier to read in its plaintext format than Markdown (and certainly much better than Wikitext)."
What does Appendix 1: Merge requests mean?,"Users can request other users to get their entries merged into someone else's entry by creating akind:818event.

json
{
""content"": ""I added information about how to make hot ice-creams"",
""kind"": 818,
""tags"": [
[ ""a"", ""30818:<destination-pubkey>:hot-ice-creams"", ""<relay-url>"" ],
[ ""e"", ""<version-against-which-the-modification-was-made>"", ""<relay-url>"" ],
[ ""p"", ""<destination-pubkey>"" ],
[ ""e"", ""<version-to-be-merged>"", ""<relay-url>"", ""source"" ]
]
}

.content: an optional explanation detailing why this merge is being requested.atag: tag of the article which should be modified (i.e. the target of this merge request).etag: optional version of the article in which this modifications is basedetag withsourcemarker: the ID of the event that should be merged. This event id MUST be of akind:30818as defined in this NIP.

The destination-pubkey is the pubkey being requested to merge something into their article can create [[NIP-25]] reactions that tag thekind:818event with+or-"
What does Android Signer Application mean?,"draftoptional

This NIP describes a method for 2-way communication between an Android signer and any Nostr client on Android. The Android signer is an Android Application and the client can be a web client or an Android application."
What does Usage for Android applications mean?,"The Android signer uses Intents (to accept/reject permissions manually) and Content Resolvers (to accept/reject permissions automatically in background if the user allowed it) to communicate between applications.

To be able to use the Android signer in your application you should add this to your AndroidManifest.xml:

xml
<queries>
<intent>
<action android:name=""android.intent.action.VIEW"" />
<category android:name=""android.intent.category.BROWSABLE"" />
<data android:scheme=""nostrsigner"" />
</intent>
</queries>

Then you can use this function to check if there's a signer application installed:

kotlin
fun isExternalSignerInstalled(context: Context): Boolean {
val intent =
Intent().apply {
action = Intent.ACTION_VIEW
data = Uri.parse(""nostrsigner:"")
}
val infos = context.packageManager.queryIntentActivities(intent, 0)
return infos.size > 0
}"
What does Using Intents mean?,"To get the result back from the Signer Application you should useregisterForActivityResultorrememberLauncherForActivityResultin Kotlin. If you are using another framework check the documentation of your framework or a third party library to get the result.

kotlin
val launcher = rememberLauncherForActivityResult(
contract = ActivityResultContracts.StartActivityForResult(),
onResult = { result ->
if (result.resultCode != Activity.RESULT_OK) {
Toast.makeText(
context,
""Sign request rejected"",
Toast.LENGTH_SHORT
).show()
} else {
val result = activityResult.data?.getStringExtra(""result"")
// Do something with result ...
}
}
)

Create the Intent using thenostrsignerscheme:

kotlin
val intent = Intent(Intent.ACTION_VIEW, Uri.parse(""nostrsigner:$content""))

Set the Signer package name after you receive the response fromget_public_keymethod:

kotlin
intent.`package` = ""com.example.signer""

If you are sending multiple intents without awaiting you can add some intent flags to sign all events without opening multiple times the signer

kotlin
intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP or Intent.FLAG_ACTIVITY_CLEAR_TOP)

If you are developing a signer application them you need to add this to your AndroidManifest.xml so clients can use the intent flags above

kotlin
android:launchMode=""singleTop""

Signer MUST answer multiple permissions with an array of results

```kotlin

val results = listOf(
Result(
package = signerPackageName,
result = eventSignture,
id = intentId
)
)

val json = results.toJson()

intent.putExtra(""results"", json)
```

Send the Intent:

kotlin
launcher.launch(intent)"
What does Methods mean?,"- get_public_key
- params:kotlin
val intent = Intent(Intent.ACTION_VIEW, Uri.parse(""nostrsigner:""))
intent.putExtra(""type"", ""get_public_key"")
// You can send some default permissions for the user to authorize for ever
val permissions = listOf(
Permission(
type = ""sign_event"",
kind = 22242
),
Permission(
type = ""nip44_decrypt""
)
)
intent.putExtra(""permissions"", permissions.toJson())
context.startActivity(intent)- result:
- If the user approved the intent it will return thepubkeyin the result field and the signer packageName in thepackagefieldkotlin
val pubkey = intent.data?.getStringExtra(""result"")
// The package name of the signer application
val packageName = intent.data?.getStringExtra(""package"")
- sign_event
- params:``kotlin
val intent = Intent(Intent.ACTION_VIEW, Uri.parse(""nostrsigner:$eventJson""))
intent.package` = ""com.example.signer""
intent.putExtra(""type"", ""sign_event"")
// To handle results when not waiting between intents
intent.putExtra(""id"", event.id)
// Send the current logged in user pubkey
intent.putExtra(""current_user"", pubkey)context.startActivity(intent)
```
- result:
- If the user approved intent it will return theresult,idandeventfieldskotlin
val signature = intent.data?.getStringExtra(""result"")
// The id you sent
val id = intent.data?.getStringExtra(""id"")
val signedEventJson = intent.data?.getStringExtra(""event"")
- nip04_encrypt
- params:``kotlin
val intent = Intent(Intent.ACTION_VIEW, Uri.parse(""nostrsigner:$plaintext""))
intent.package` = ""com.example.signer""
intent.putExtra(""type"", ""nip04_encrypt"")
// to control the result in your application in case you are not waiting the result before sending another intent
intent.putExtra(""id"", ""some_id"")
// Send the current logged in user pubkey
intent.putExtra(""current_user"", account.keyPair.pubkey)
// Send the hex pubkey that will be used for encrypting the data
intent.putExtra(""pubkey"", pubkey)context.startActivity(intent)
```
- result:
- If the user approved intent it will return theresultandidfieldskotlin
val encryptedText = intent.data?.getStringExtra(""result"")
// the id you sent
val id = intent.data?.getStringExtra(""id"")
- nip44_encrypt
- params:``kotlin
val intent = Intent(Intent.ACTION_VIEW, Uri.parse(""nostrsigner:$plaintext""))
intent.package` = ""com.example.signer""
intent.putExtra(""type"", ""nip44_encrypt"")
// to control the result in your application in case you are not waiting the result before sending another intent
intent.putExtra(""id"", ""some_id"")
// Send the current logged in user pubkey
intent.putExtra(""current_user"", account.keyPair.pubkey)
// Send the hex pubkey that will be used for encrypting the data
intent.putExtra(""pubkey"", pubkey)context.startActivity(intent)
```
- result:
- If the user approved intent it will return thesignatureandidfieldskotlin
val encryptedText = intent.data?.getStringExtra(""signature"")
// the id you sent
val id = intent.data?.getStringExtra(""id"")
- nip04_decrypt
- params:``kotlin
val intent = Intent(Intent.ACTION_VIEW, Uri.parse(""nostrsigner:$encryptedText""))
intent.package` = ""com.example.signer""
intent.putExtra(""type"", ""nip04_decrypt"")
// to control the result in your application in case you are not waiting the result before sending another intent
intent.putExtra(""id"", ""some_id"")
// Send the current logged in user pubkey
intent.putExtra(""current_user"", account.keyPair.pubkey)
// Send the hex pubkey that will be used for decrypting the data
intent.putExtra(""pubkey"", pubkey)context.startActivity(intent)
```
- result:
- If the user approved intent it will return theresultandidfieldskotlin
val plainText = intent.data?.getStringExtra(""result"")
// the id you sent
val id = intent.data?.getStringExtra(""id"")
- nip44_decrypt
- params:``kotlin
val intent = Intent(Intent.ACTION_VIEW, Uri.parse(""nostrsigner:$encryptedText""))
intent.package` = ""com.example.signer""
intent.putExtra(""type"", ""nip04_decrypt"")
// to control the result in your application in case you are not waiting the result before sending another intent
intent.putExtra(""id"", ""some_id"")
// Send the current logged in user pubkey
intent.putExtra(""current_user"", account.keyPair.pubkey)
// Send the hex pubkey that will be used for decrypting the data
intent.putExtra(""pubkey"", pubkey)context.startActivity(intent)
```
- result:
- If the user approved intent it will return theresultandidfieldskotlin
val plainText = intent.data?.getStringExtra(""result"")
// the id you sent
val id = intent.data?.getStringExtra(""id"")
- decrypt_zap_event
- params:kotlin
val intent = Intent(Intent.ACTION_VIEW, Uri.parse(""nostrsigner:$eventJson""))
intent.`package` = ""com.example.signer""
intent.putExtra(""type"", ""decrypt_zap_event"")
// to control the result in your application in case you are not waiting the result before sending another intent
intent.putExtra(""id"", ""some_id"")
// Send the current logged in user pubkey
intent.putExtra(""current_user"", account.keyPair.pubkey)
context.startActivity(intent)- result:
- If the user approved intent it will return theresultandidfieldskotlin
val eventJson = intent.data?.getStringExtra(""result"")
// the id you sent
val id = intent.data?.getStringExtra(""id"")"
What does Using Content Resolver mean?,"To get the result back from Signer Application you should use contentResolver.query in Kotlin. If you are using another framework check the documentation of your framework or a third party library to get the result.

If the user did not check the ""remember my choice"" option, the pubkey is not in Signer Application or the signer type is not recognized thecontentResolverwill return null

For the SIGN_EVENT type Signer Application returns two columns ""result"" and ""event"". The column event is the signed event json

For the other types Signer Application returns the column ""result""

If the user chose to always reject the event, signer application will return the column ""rejected"" and you should not open signer application"
What does Usage for Web Applications mean?,"You should consider usingNIP-46: Nostr Connectfor a better experience for web applications. When using this approach, the web app can't call the signer in the background, so the user will see a popup for every event you try to sign.

Since web applications can't receive a result from the intent, you should add a modal to paste the signature or the event json or create a callback url.

If you send the callback url parameter, Signer Application will send the result to the url.

If you don't send a callback url, Signer Application will copy the result to the clipboard.

You can configure thereturnTypeto besignatureorevent.

Android intents and browser urls have limitations, so if you are using thereturnTypeofeventconsider using the parametercompressionType=gzipthat will return ""Signer1"" + Base64 gzip encoded event json"
What does Reporting mean?,"optional

A report is akind 1984event that signals to users and relays that
some referenced content is objectionable. The definition of objectionable is
obviously subjective and all agents on the network (users, apps, relays, etc.)
may consume and take action on them as they see fit.

ThecontentMAY contain additional information submitted by the entity
reporting the content."
What does Relay behavior mean?,"It is not recommended that relays perform automatic moderation using reports,
as they can be easily gamed. Admins could use reports from trusted moderators to
takedown illegal or explicit content if the relay does not allow such things."
What does Lightning Zaps mean?,"draftoptional

This NIP defines two new event types for recording lightning payments between users.9734is azap request, representing a payer's request to a recipient's lightning wallet for an invoice.9735is azap receipt, representing the confirmation by the recipient's lightning wallet that the invoice issued in response to azap requesthas been paid.

Having lightning receipts on nostr allows clients to display lightning payments from entities on the network. These can be used for fun or for spam deterrence."
What does Appendix A: Zap Request Event mean?,"Azap requestis an event of kind9734that isnotpublished to relays, but is instead sent to a recipient's lnurl paycallbackurl. This event'scontentMAY be an optional message to send along with the payment. The event MUST include the following tags:

- relaysis a list of relays the recipient's wallet should publish itszap receiptto. Note that relays should not be nested in an additional list, but should be included as shown in the example below.
- amountis the amount inmillisatsthe sender intends to pay, formatted as a string. This is recommended, but optional.
- lnurlis the lnurl pay url of the recipient, encoded using bech32 with the prefixlnurl. This is recommended, but optional.
- pis the hex-encoded pubkey of the recipient.

In addition, the event MAY include the following tags:

- eis an optional hex-encoded event id. Clients MUST include this if zapping an event rather than a person.
- ais an optional event coordinate that allows tipping addressable events such as NIP-23 long-form notes.

Example:

json
{
""kind"": 9734,
""content"": ""Zap!"",
""tags"": [
[""relays"", ""wss://nostr-pub.wellorder.com"", ""wss://anotherrelay.example.com""],
[""amount"", ""21000""],
[""lnurl"", ""lnurl1dp68gurn8ghj7um5v93kketj9ehx2amn9uh8wetvdskkkmn0wahz7mrww4excup0dajx2mrv92x9xp""],
[""p"", ""04c915daefee38317fa734444acee390a8269fe5810b2241e5e6dd343dfbecc9""],
[""e"", ""9ae37aa68f48645127299e9453eb5d908a0cbb6058ff340d528ed4d37c8994fb""]
],
""pubkey"": ""97c70a44366a6535c145b333f973ea86dfdc2d7a99da618c40c64705ad98e322"",
""created_at"": 1679673265,
""id"": ""30efed56a035b2549fcaeec0bf2c1595f9a9b3bb4b1a38abaf8ee9041c4b7d93"",
""sig"": ""f2cb581a84ed10e4dc84937bd98e27acac71ab057255f6aa8dfa561808c981fe8870f4a03c1e3666784d82a9c802d3704e174371aa13d63e2aeaf24ff5374d9d""
}"
What does Appendix B: Zap Request HTTP Request mean?,"A signedzap requestevent is not published, but is instead sent using a HTTP GET request to the recipient'scallbackurl, which was provided by the recipient's lnurl pay endpoint. This request should have the following query parameters defined:

- amountis the amount inmillisatsthe sender intends to pay
- nostris the9734zap requestevent, JSON encoded then URI encoded
- lnurlis the lnurl pay url of the recipient, encoded using bech32 with the prefixlnurl

This request should return a JSON response with aprkey, which is the invoice the sender must pay to finalize their zap. Here is an example flow in javascript:

```javascript
const senderPubkey // The sender's pubkey
const recipientPubkey = // The recipient's pubkey
const callback = // The callback received from the recipients lnurl pay endpoint
const lnurl = // The recipient's lightning address, encoded as a lnurl
const sats = 21

const amount = sats * 1000
const relays = ['wss://nostr-pub.wellorder.net']
const event = encodeURI(JSON.stringify(await signEvent({
kind: 9734,
content: """",
pubkey: senderPubkey,
created_at: Math.round(Date.now() / 1000),
tags: [
[""relays"", ...relays],
[""amount"", amount.toString()],
[""lnurl"", lnurl],
[""p"", recipientPubkey],
],
})))

const {pr: invoice} = await fetchJson(${callback}?amount=${amount}&nostr=${event}&lnurl=${lnurl})
```"
What does Appendix C: LNURL Server Configuration mean?,"The lnurl server will need some additional pieces of information so that clients can know that zap invoices are supported:

- Add anostrPubkeyto the lnurl-pay static endpoint/.well-known/lnurlp/<user>, wherenostrPubkeyis the nostr pubkey your server will use to signzap receiptevents. Clients will use this to validatezap receipts.
- Add anallowsNostrfield and set it to true."
What does Appendix D: LNURL Server Zap Request Validation mean?,"When a client sends azap requestevent to a server's lnurl-pay callback URL, there will be anostrquery parameter whose value is that event which is URI- and JSON-encoded. If present, thezap requestevent must be validated in the following ways:

- It MUST have a valid nostr signature
- It MUST have tags
- It MUST have only oneptag
- It MUST have 0 or 1etags
- There should be arelaystag with the relays to send thezap receiptto.
- If there is anamounttag, it MUST be equal to theamountquery parameter.
- If there is anatag, it MUST be a valid event coordinate
- There MUST be 0 or 1Ptags. If there is one, it MUST be equal to thezap receipt'spubkey.

The event MUST then be stored for use later, when the invoice is paid."
What does Appendix E: Zap Receipt Event mean?,"Azap receiptis created by a lightning node when an invoice generated by azap requestis paid.Zap receipts are only created when the invoice description (committed to the description hash) contains azap requestnote.

When receiving a payment, the following steps are executed:

- Get the description for the invoice. This needs to be saved somewhere during the generation of the description hash invoice. It is saved automatically for you with CLN, which is the reference implementation used here.
- Parse the bolt11 description as a JSON nostr event. This SHOULD be validated based on the requirements in Appendix D, either when it is received, or before the invoice is paid.
- Create a nostr event of kind9735as described below, and publish it to therelaysdeclared in thezap request.

The following should be true of thezap receiptevent:

- ThecontentSHOULD be empty.
- Thecreated_atdate SHOULD be set to the invoicepaid_atdate for idempotency.
- tagsMUST include theptag (zap recipient) AND optionaletag from thezap requestAND optionalatag from thezap requestAND optionalPtag from the pubkey of the zap request (zap sender).
- Thezap receiptMUST have abolt11tag containing the description hash bolt11 invoice.
- Thezap receiptMUST contain adescriptiontag which is the JSON-encoded zap request.
- SHA256(description)SHOULD match the description hash in the bolt11 invoice.
- Thezap receiptMAY contain apreimagetag to match against the payment hash of the bolt11 invoice. This isn't really a payment proof, there is no real way to prove that the invoice is real or has been paid. You are trusting the author of thezap receiptfor the legitimacy of the payment.

Thezap receiptis not a proof of payment, all it proves is that some nostr user fetched an invoice. The existence of thezap receiptimplies the invoice as paid, but it could be a lie given a rogue implementation.

A reference implementation for a zap-enabled lnurl server can be foundhere.

Examplezap receipt:

json
{
""id"": ""67b48a14fb66c60c8f9070bdeb37afdfcc3d08ad01989460448e4081eddda446"",
""pubkey"": ""9630f464cca6a5147aa8a35f0bcdd3ce485324e732fd39e09233b1d848238f31"",
""created_at"": 1674164545,
""kind"": 9735,
""tags"": [
[""p"", ""32e1827635450ebb3c5a7d12c1f8e7b2b514439ac10a67eef3d9fd9c5c68e245""],
[""P"", ""97c70a44366a6535c145b333f973ea86dfdc2d7a99da618c40c64705ad98e322""],
[""e"", ""3624762a1274dd9636e0c552b53086d70bc88c165bc4dc0f9e836a1eaf86c3b8""],
[""bolt11"", ""lnbc10u1p3unwfusp5t9r3yymhpfqculx78u027lxspgxcr2n2987mx2j55nnfs95nxnzqpp5jmrh92pfld78spqs78v9euf2385t83uvpwk9ldrlvf6ch7tpascqhp5zvkrmemgth3tufcvflmzjzfvjt023nazlhljz2n9hattj4f8jq8qxqyjw5qcqpjrzjqtc4fc44feggv7065fqe5m4ytjarg3repr5j9el35xhmtfexc42yczarjuqqfzqqqqqqqqlgqqqqqqgq9q9qxpqysgq079nkq507a5tw7xgttmj4u990j7wfggtrasah5gd4ywfr2pjcn29383tphp4t48gquelz9z78p4cq7ml3nrrphw5w6eckhjwmhezhnqpy6gyf0""],
[""description"", ""{\""pubkey\"":\""97c70a44366a6535c145b333f973ea86dfdc2d7a99da618c40c64705ad98e322\"",\""content\"":\""\"",\""id\"":\""d9cc14d50fcb8c27539aacf776882942c1a11ea4472f8cdec1dea82fab66279d\"",\""created_at\"":1674164539,\""sig\"":\""77127f636577e9029276be060332ea565deaf89ff215a494ccff16ae3f757065e2bc59b2e8c113dd407917a010b3abd36c8d7ad84c0e3ab7dab3a0b0caa9835d\"",\""kind\"":9734,\""tags\"":[[\""e\"",\""3624762a1274dd9636e0c552b53086d70bc88c165bc4dc0f9e836a1eaf86c3b8\""],[\""p\"",\""32e1827635450ebb3c5a7d12c1f8e7b2b514439ac10a67eef3d9fd9c5c68e245\""],[\""relays\"",\""wss://relay.damus.io\"",\""wss://nostr-relay.wlvs.space\"",\""wss://nostr.fmt.wiz.biz\"",\""wss://relay.nostr.bg\"",\""wss://nostr.oxtr.dev\"",\""wss://nostr.v0l.io\"",\""wss://brb.io\"",\""wss://nostr.bitcoiner.social\"",\""ws://monad.jb55.com:8080\"",\""wss://relay.snort.social\""]]}""],
[""preimage"", ""5d006d2cf1e73c7148e7519a4c68adc81642ce0e25a432b2434c99f97344c15f""]
],
""content"": """",
}"
What does Appendix F: Validating Zap Receipts mean?,"A client can retrievezap receipts on events and pubkeys using a NIP-01 filter, for example{""kinds"": [9735], ""#e"": [...]}. Zaps MUST be validated using the following steps:

- Thezap receiptevent'spubkeyMUST be the same as the recipient's lnurl provider'snostrPubkey(retrieved in step 1 of the protocol flow).
- TheinvoiceAmountcontained in thebolt11tag of thezap receiptMUST equal theamounttag of thezap request(if present).
- Thelnurltag of thezap request(if present) SHOULD equal the recipient'slnurl."
What does Appendix G:zaptag on other events mean?,"When an event includes one or morezaptags, clients wishing to zap it SHOULD calculate the lnurl pay request based on the tags value instead of the event author's profile field. The tag's second argument is thehexstring of the receiver's pub key and the third argument is the relay to download the receiver's metadata (Kind-0). An optional fourth parameter specifies the weight (a generalization of a percentage) assigned to the respective receiver. Clients should parse all weights, calculate a sum, and then a percentage to each receiver. If weights are not present, CLIENTS should equally divide the zap amount to all receivers. If weights are only partially present, receivers without a weight should not be zapped (weight = 0).

jsonc
{
""tags"": [
[ ""zap"", ""82341f882b6eabcd2ba7f1ef90aad961cf074af15b9ef44a09f9d2a8fbfbe6a2"", ""wss://nostr.oxtr.dev"", ""1"" ],  // 25%
[ ""zap"", ""fa984bd7dbb282f07e16e7ae87b26a2a7b9b90b7246a44771f0cf5ae58018f52"", ""wss://nostr.wine/"",    ""1"" ],  // 25%
[ ""zap"", ""460c25e682fda7832b52d1f22d3d22b3176d972f60dcdc3212ed8c92ef85065c"", ""wss://nos.lol/"",       ""2"" ]   // 50%
]
}

Clients MAY display the zap split configuration in the note."
What does Future Work mean?,"Zaps can be extended to be more private by encryptingzap requestnotes to the target user, but for simplicity it has been left out of this initial draft."
What does Badges mean?,"draftoptional

Three special events are used to define, award and display badges in
user profiles:

- A ""Badge Definition"" event is defined as an addressable event with kind30009having adtag with a value that uniquely identifies the badge (e.g.bravery) published by the badge issuer. Badge definitions can be updated.
- A ""Badge Award"" event is a kind8event with a singleatag referencing a ""Badge Definition"" event and one or moreptags, one for each pubkey the badge issuer wishes to award. Awarded badges are immutable and non-transferrable.
- A ""Profile Badges"" event is defined as anaddressable eventwith kind30008with adtag with the valueprofile_badges.
Profile badges contain an ordered list of pairs ofaandetags referencing aBadge Definitionand aBadge Awardfor each badge to be displayed."
What does Badge Definition event mean?,"The following tags MUST be present:

- dtag with the unique name of the badge.

The following tags MAY be present:

- Anametag with a short name for the badge.
- imagetag whose value is the URL of a high-resolution image representing the badge. The second value optionally specifies the dimensions of the image aswidthxheightin pixels. Badge recommended dimensions is 1024x1024 pixels.
- Adescriptiontag whose value MAY contain a textual representation of the
image, the meaning behind the badge, or the reason of its issuance.
- One or morethumbtags whose first value is an URL pointing to a thumbnail version of the image referenced in theimagetag. The second value optionally specifies the dimensions of the thumbnail aswidthxheightin pixels."
What does Badge Award event mean?,"The following tags MUST be present:

- Anatag referencing a kind30009Badge Definition event.
- One or moreptags referencing each pubkey awarded."
What does Profile Badges Event mean?,"The number of badges a pubkey can be awarded is unbounded. The Profile Badge
event allows individual users to accept or reject awarded badges, as well
as choose the display order of badges on their profiles.

The following tags MUST be present:

- Adtag with the unique identifierprofile_badges

The following tags MAY be present:

- Zero or more ordered consecutive pairs ofaandetags referencing a kind30009Badge Definition and kind8Badge Award, respectively. Clients SHOULD
ignoreawithout correspondingetag and viceversa. Badge Awards referenced
by theetags should contain the sameatag."
What does Example of a Badge Definition event mean?,"jsonc
{
""pubkey"": ""alice"",
""kind"": 30009,
""tags"": [
[""d"", ""bravery""],
[""name"", ""Medal of Bravery""],
[""description"", ""Awarded to users demonstrating bravery""],
[""image"", ""https://nostr.academy/awards/bravery.png"", ""1024x1024""],
[""thumb"", ""https://nostr.academy/awards/bravery_256x256.png"", ""256x256""]
],
// other fields...
}"
What does Example of Badge Award event mean?,"jsonc
{
""id"": ""<badge award event id>"",
""kind"": 8,
""pubkey"": ""alice"",
""tags"": [
[""a"", ""30009:alice:bravery""],
[""p"", ""bob"", ""wss://relay""],
[""p"", ""charlie"", ""wss://relay""]
],
// other fields...
}"
What does Example of a Profile Badges event mean?,"Honorable Bob The Brave:jsonc
{
""kind"": 30008,
""pubkey"": ""bob"",
""tags"": [
[""d"", ""profile_badges""],
[""a"", ""30009:alice:bravery""],
[""e"", ""<bravery badge award event id>"", ""wss://nostr.academy""],
[""a"", ""30009:alice:honor""],
[""e"", ""<honor badge award event id>"", ""wss://nostr.academy""]
],
// other fields...
}"
What does Gift Wrap mean?,"optional

This NIP defines a protocol for encapsulating any nostr event. This makes it possible to obscure most metadata
for a given event, perform collaborative signing, and more.

This NIPdoes notdefine any messaging protocol. Applications of this NIP should be defined separately.

This NIP relies onNIP-44's versioned encryption algorithms."
What does 1. The Rumor Event Kind mean?,Arumoris the same thing as an unsigned event. Any event kind can be made arumorby removing the signature.
What does 2. The Seal Event Kind mean?,"Asealis akind:13event that wraps arumorwith the sender's regular key. Thesealisalwaysencrypted
to a receiver's pubkey but there is noptag pointing to the receiver. There is no way to know who the rumor is for
without the receiver's or the sender's private key. The only public information in this event is who is signing it.

json
{
""id"": ""<id>"",
""pubkey"": ""<real author's pubkey>"",
""content"": ""<encrypted rumor>"",
""kind"": 13,
""created_at"": 1686840217,
""tags"": [],
""sig"": ""<real author's pubkey signature>""
}

Tags MUST always be empty in akind:13. The inner event MUST always be unsigned."
What does 3. Gift Wrap Event Kind mean?,"Agift wrapevent is akind:1059event that wraps any other event.tagsSHOULD include any information
needed to route the event to its intended recipient, including the recipient'sptag orNIP-13proof of work.

json
{
""id"": ""<id>"",
""pubkey"": ""<random, one-time-use pubkey>"",
""content"": ""<encrypted kind 13>"",
""kind"": 1059,
""created_at"": 1686840217,
""tags"": [[""p"", ""<recipient pubkey>""]],
""sig"": ""<random, one-time-use pubkey signature>""
}"
What does Encrypting Payloads mean?,Encryption is done followingNIP-44on the JSON-encoded event. Place the encryption payload in the.contentof the wrapper event (either asealor agift wrap).
What does Other Considerations mean?,"If arumoris intended for more than one party, or if the author wants to retain an encrypted copy, a singlerumormay be wrapped and addressed for each recipient individually.

The canonicalcreated_attime belongs to therumor. All other timestamps SHOULD be tweaked to thwart
time-analysis attacks. Note that some relays don't serve events dated in the future, so all timestamps
SHOULD be in the past.

Relays may choose not to store gift wrapped events due to them not being publicly useful. Clients MAY choose
to attach a certain amount of proof-of-work to the wrapper event perNIP-13in a bid to demonstrate that
the event is not spam or a denial-of-service attack.

To protect recipient metadata, relays SHOULD guard access tokind 1059events based on user AUTH. When
possible, clients should only send wrapped events to relays that offer this protection.

To protect recipient metadata, relays SHOULD only servekind 1059events intended for the marked recipient.
When possible, clients should only send wrapped events toreadrelays for the recipient that implement
AUTH, and refuse to serve wrapped events to non-recipients."
What does An Example mean?,"Let's send a wrappedkind 1message between two parties asking ""Are you going to the party tonight?""

- Author private key:0beebd062ec8735f4243466049d7747ef5d6594ee838de147f8aab842b15e273
- Recipient private key:e108399bd8424357a710b606ae0c13166d853d327e47a6e5e038197346bdbf45
- Ephemeral wrapper key:4f02eac59266002db5801adc5270700ca69d5b8f761d8732fab2fbf233c90cbd

Note that this messaging protocol should not be used in practice, this is just an example. Refer to other
NIPs for concrete messaging protocols that depend on gift wraps."
What does 1. Create an event mean?,"Create akind 1event with the message, the receivers, and any other tags you want, signed by the author.
Do not sign the event.

json
{
""created_at"": 1691518405,
""content"": ""Are you going to the party tonight?"",
""tags"": [],
""kind"": 1,
""pubkey"": ""611df01bfcf85c26ae65453b772d8f1dfd25c264621c0277e1fc1518686faef9"",
""id"": ""9dd003c6d3b73b74a85a9ab099469ce251653a7af76f523671ab828acd2a0ef9""
}"
What does 2. Seal the rumor mean?,"Encrypt the JSON-encodedrumorwith a conversation key derived using the author's private key and
the recipient's public key. Place the result in thecontentfield of akind 13sealevent. Sign
it with the author's key.

json
{
""content"": ""AqBCdwoS7/tPK+QGkPCadJTn8FxGkd24iApo3BR9/M0uw6n4RFAFSPAKKMgkzVMoRyR3ZS/aqATDFvoZJOkE9cPG/TAzmyZvr/WUIS8kLmuI1dCA+itFF6+ULZqbkWS0YcVU0j6UDvMBvVlGTzHz+UHzWYJLUq2LnlynJtFap5k8560+tBGtxi9Gx2NIycKgbOUv0gEqhfVzAwvg1IhTltfSwOeZXvDvd40rozONRxwq8hjKy+4DbfrO0iRtlT7G/eVEO9aJJnqagomFSkqCscttf/o6VeT2+A9JhcSxLmjcKFG3FEK3Try/WkarJa1jM3lMRQqVOZrzHAaLFW/5sXano6DqqC5ERD6CcVVsrny0tYN4iHHB8BHJ9zvjff0NjLGG/v5Wsy31+BwZA8cUlfAZ0f5EYRo9/vKSd8TV0wRb9DQ="",
""kind"": 13,
""created_at"": 1703015180,
""pubkey"": ""611df01bfcf85c26ae65453b772d8f1dfd25c264621c0277e1fc1518686faef9"",
""tags"": [],
""id"": ""28a87d7c074d94a58e9e89bb3e9e4e813e2189f285d797b1c56069d36f59eaa7"",
""sig"": ""02fc3facf6621196c32912b1ef53bac8f8bfe9db51c0e7102c073103586b0d29c3f39bdaa1e62856c20e90b6c7cc5dc34ca8bb6a528872cf6e65e6284519ad73""
}"
What does 3. Wrap the seal mean?,"Encrypt the JSON-encodedkind 13event with your ephemeral, single-use random key. Place the result
in thecontentfield of akind 1059. Add a singleptag containing the recipient's public key.
Sign thegift wrapusing the random key generated in the previous step.

json
{
""content"": ""AhC3Qj/QsKJFWuf6xroiYip+2yK95qPwJjVvFujhzSguJWb/6TlPpBW0CGFwfufCs2Zyb0JeuLmZhNlnqecAAalC4ZCugB+I9ViA5pxLyFfQjs1lcE6KdX3euCHBLAnE9GL/+IzdV9vZnfJH6atVjvBkNPNzxU+OLCHO/DAPmzmMVx0SR63frRTCz6Cuth40D+VzluKu1/Fg2Q1LSst65DE7o2efTtZ4Z9j15rQAOZfE9jwMCQZt27rBBK3yVwqVEriFpg2mHXc1DDwHhDADO8eiyOTWF1ghDds/DxhMcjkIi/o+FS3gG1dG7gJHu3KkGK5UXpmgyFKt+421m5o++RMD/BylS3iazS1S93IzTLeGfMCk+7IKxuSCO06k1+DaasJJe8RE4/rmismUvwrHu/HDutZWkvOAhd4z4khZo7bJLtiCzZCZ74lZcjOB4CYtuAX2ZGpc4I1iOKkvwTuQy9BWYpkzGg3ZoSWRD6ty7U+KN+fTTmIS4CelhBTT15QVqD02JxfLF7nA6sg3UlYgtiGw61oH68lSbx16P3vwSeQQpEB5JbhofW7t9TLZIbIW/ODnI4hpwj8didtk7IMBI3Ra3uUP7ya6vptkd9TwQkd/7cOFaSJmU+BIsLpOXbirJACMn+URoDXhuEtiO6xirNtrPN8jYqpwvMUm5lMMVzGT3kMMVNBqgbj8Ln8VmqouK0DR+gRyNb8fHT0BFPwsHxDskFk5yhe5c/2VUUoKCGe0kfCcX/EsHbJLUUtlHXmTqaOJpmQnW1tZ/siPwKRl6oEsIJWTUYxPQmrM2fUpYZCuAo/29lTLHiHMlTbarFOd6J/ybIbICy2gRRH/LFSryty3Cnf6aae+A9uizFBUdCwTwffc3vCBae802+R92OL78bbqHKPbSZOXNC+6ybqziezwG+OPWHx1Qk39RYaF0aFsM4uZWrFic97WwVrH5i+/Nsf/OtwWiuH0gV/SqvN1hnkxCTF/+XNn/laWKmS3e7wFzBsG8+qwqwmO9aVbDVMhOmeUXRMkxcj4QreQkHxLkCx97euZpC7xhvYnCHarHTDeD6nVK+xzbPNtzeGzNpYoiMqxZ9bBJwMaHnEoI944Vxoodf51cMIIwpTmmRvAzI1QgrfnOLOUS7uUjQ/IZ1Qa3lY08Nqm9MAGxZ2Ou6R0/Z5z30ha/Q71q6meAs3uHQcpSuRaQeV29IASmye2A2Nif+lmbhV7w8hjFYoaLCRsdchiVyNjOEM4VmxUhX4VEvw6KoCAZ/XvO2eBF/SyNU3Of4SO"",
""kind"": 1059,
""created_at"": 1703021488,
""pubkey"": ""18b1a75918f1f2c90c23da616bce317d36e348bcf5f7ba55e75949319210c87c"",
""id"": ""5c005f3ccf01950aa8d131203248544fb1e41a0d698e846bd419cec3890903ac"",
""sig"": ""35fabdae4634eb630880a1896a886e40fd6ea8a60958e30b89b33a93e6235df750097b04f9e13053764251b8bc5dd7e8e0794a3426a90b6bcc7e5ff660f54259"",
""tags"": [[""p"", ""166bf3765ebd1fc55decfe395beff2ea3b2a4e0a8946e7eb578512b555737c99""]],
}"
What does 4. Broadcast Selectively mean?,Broadcast thekind 1059event to the recipient's relays only. Delete all the other events.
What does JavaScript mean?,"```javascript
import {bytesToHex} from ""@noble/hashes/utils""
import type {EventTemplate, UnsignedEvent, Event} from ""nostr-tools""
import {getPublicKey, getEventHash, nip19, nip44, finalizeEvent, generateSecretKey} from ""nostr-tools""

type Rumor = UnsignedEvent & {id: string}

const TWO_DAYS = 2 * 24 * 60 * 60

const now = () => Math.round(Date.now() / 1000)
const randomNow = () => Math.round(now() - (Math.random() * TWO_DAYS))

const nip44ConversationKey = (privateKey: Uint8Array, publicKey: string) =>
nip44.v2.utils.getConversationKey(bytesToHex(privateKey), publicKey)

const nip44Encrypt = (data: EventTemplate, privateKey: Uint8Array, publicKey: string) =>
nip44.v2.encrypt(JSON.stringify(data), nip44ConversationKey(privateKey, publicKey))

const nip44Decrypt = (data: Event, privateKey: Uint8Array) =>
JSON.parse(nip44.v2.decrypt(data.content, nip44ConversationKey(privateKey, data.pubkey)))

const createRumor = (event: Partial, privateKey: Uint8Array) => {
const rumor = {
created_at: now(),
content: """",
tags: [],
...event,
pubkey: getPublicKey(privateKey),
} as any

rumor.id = getEventHash(rumor)

return rumor as Rumor
}

const createSeal = (rumor: Rumor, privateKey: Uint8Array, recipientPublicKey: string) => {
return finalizeEvent(
{
kind: 13,
content: nip44Encrypt(rumor, privateKey, recipientPublicKey),
created_at: randomNow(),
tags: [],
},
privateKey
) as Event
}

const createWrap = (event: Event, recipientPublicKey: string) => {
const randomKey = generateSecretKey()

return finalizeEvent(
{
kind: 1059,
content: nip44Encrypt(event, randomKey, recipientPublicKey),
created_at: randomNow(),
tags: [[""p"", recipientPublicKey]],
},
randomKey
) as Event
}

// Test case using the above example
const senderPrivateKey = nip19.decode(nsec1p0ht6p3wepe47sjrgesyn4m50m6avk2waqudu9rl324cg2c4ufesyp6rdg).data
const recipientPrivateKey = nip19.decode(nsec1uyyrnx7cgfp40fcskcr2urqnzekc20fj0er6de0q8qvhx34ahazsvs9p36).data
const recipientPublicKey = getPublicKey(recipientPrivateKey)

const rumor = createRumor(
{
kind: 1,
content: ""Are you going to the party tonight?"",
},
senderPrivateKey
)

const seal = createSeal(rumor, senderPrivateKey, recipientPublicKey)
const wrap = createWrap(seal, recipientPublicKey)

// Recipient unwraps with their private key.

const unwrappedSeal = nip44Decrypt(wrap, recipientPrivateKey)
const unsealedRumor = nip44Decrypt(unwrappedSeal, recipientPrivateKey)
```"
What does Cashu Wallets mean?,"draftoptional

This NIP defines the operations of a cashu-based wallet.

A cashu wallet is a wallet which information is stored in relays to make it accessible across applications.

The purpose of this NIP is:
* ease-of-use: new users immediately are able to receive funds without creating accounts with other services.
* interoperability: users' wallets follows them across applications.

This NIP doesn't deal with users'receivingmoney from someone else, it's just to keep state of the user's wallet."
What does High-level flow mean?,"- A user has akind:17375event that represents a wallet.
- A user haskind:7375events that represent the unspent proofs of the wallet. -- The proofs are encrypted with the user's private key.
- A user haskind:7376events that represent the spending history of the wallet -- This history is for informational purposes only and is completely optional."
What does Wallet Event mean?,"jsonc
{
""kind"": 17375,
""content"": nip44_encrypt([
[ ""privkey"", ""hexkey"" ],
[ ""mint"", ""https://mint1"" ],
[ ""mint"", ""https://mint2"" ]
]),
""tags"": []
}

The wallet event is an replaceable eventkind:17375.

Tags:
*mint- Mint(s) this wallet uses -- there MUST be one or more mint tags.
*privkey- Private key used to unlock P2PK ecash. MUST be stored encrypted in the.contentfield.This is a different private key exclusively used for the wallet, not associated in any way to the user's Nostr private key-- This is only used for receivingNIP-61nutzaps."
What does Token Event mean?,"Token events are used to record unspent proofs.

There can be multiplekind:7375events for the same mint, and multiple proofs inside eachkind:7375event.

jsonc
{
""kind"": 7375,
""content"": nip44_encrypt({
""mint"": ""https://stablenut.umint.cash"",
""proofs"": [
// one or more proofs in the default cashu format
{
""id"": ""005c2502034d4f12"",
""amount"": 1,
""secret"": ""z+zyxAVLRqN9lEjxuNPSyRJzEstbl69Jc1vtimvtkPg="",
""C"": ""0241d98a8197ef238a192d47edf191a9de78b657308937b4f7dd0aa53beae72c46""
}
],
// tokens that were destroyed in the creation of this token (helps on wallet state transitions)
""del"": [ ""token-event-id-1"", ""token-event-id-2"" ]
}),
""tags"": []
}

- .contentis aNIP-44encrypted payload:
- mint: The mint the proofs belong to.
- proofs: unencoded proofs
- del: token-ids that were destroyed by the creation of this token. This assists with state transitions.

When one or more proofs of a token are spent, the token event should beNIP-09-deleted and, if some proofs are unspent from the same token event, a new token event should be created rolling over the unspent proofs and adding any change outputs to the new token event (the change output should include adelfield).

Thekind:5delete eventcreated in theNIP-09process MUST have a tag[""k"", ""7375""]to allow easy filtering by clients interested in state transitions."
What does Spending History Event mean?,"Clients SHOULD publishkind:7376events to create a transaction history when their balance changes.

jsonc
{
""kind"": 7376,
""content"": nip44_encrypt([
[ ""direction"", ""in"" ], // in = received, out = sent
[ ""amount"", ""1"" ],
[ ""e"", ""<event-id-of-created-token>"", """", ""created"" ]
]),
""tags"": [
[ ""e"", ""<event-id-of-created-token>"", """", ""redeemed"" ]
]
}

- direction- The direction of the transaction;infor received funds,outfor sent funds.

Clients MUST addetags to create references of destroyed and created token events along with the marker of the meaning of the tag:
*created- A new token event was created.
*destroyed- A token event was destroyed.
*redeemed- ANIP-61nutzap was redeemed.

All tags can beNIP-44encrypted. Clients SHOULD leaveetags with aredeemedmarker unencrypted.

Multipleetags can be added, and should be encrypted, except for tags with theredeemedmarker."
What does Flow mean?,"A client that wants to check for user's wallets information starts by fetchingkind:10019events from the user's relays, if no event is found, it should fall back to using the user'sNIP-65relays."
What does Fetch wallet and token list mean?,"From those relays, the client should fetch wallet and token events.

""kinds"": [17375, 7375], ""authors"": [""<my-pubkey>""]"
What does Spending token mean?,"If Alice spends 4 sats from this token eventjsonc
{
""kind"": 7375,
""id"": ""event-id-1"",
""content"": nip44_encrypt({
""mint"": ""https://stablenut.umint.cash"",
""proofs"": [
{ ""id"": ""1"", ""amount"": 1 },
{ ""id"": ""2"", ""amount"": 2 },
{ ""id"": ""3"", ""amount"": 4 },
{ ""id"": ""4"", ""amount"": 8 },
]
}),
""tags"": []
}

Her client:
* MUST roll over the unspent proofs:jsonc
{
""kind"": 7375,
""id"": ""event-id-2"",
""content"": nip44_encrypt({
""mint"": ""https://stablenut.umint.cash"",
""proofs"": [
{ ""id"": ""1"", ""amount"": 1 },
{ ""id"": ""2"", ""amount"": 2 },
{ ""id"": ""4"", ""amount"": 8 },
],
""del"": [ ""event-id-1"" ]
}),
""tags"": []
}* MUST delete eventevent-id-1* SHOULD add theevent-id-1to thedelarray of deleted token-ids.
* SHOULD create akind:7376event to record the spendjsonc
{
""kind"": 7376,
""content"": nip44_encrypt([
[ ""direction"", ""out"" ],
[ ""amount"", ""4"" ],
[ ""e"", ""<event-id-1>"", """", ""destroyed"" ],
[ ""e"", ""<event-id-2>"", """", ""created"" ],
]),
""tags"": []
}"
What does Redeeming a quote (optional) mean?,"When creating a quote at a mint, an event can be used to keep the state of the quote ID, which will be used to check when the quote has been paid. These events should be created with an expiration tagNIP-40of 2 weeks (which is around the maximum amount of time a Lightning payment may be in-flight).

However, application developers SHOULD use local state when possible and only publish this event when it makes sense in the context of their application.

jsonc
{
""kind"": 7374,
""content"": nip44_encrypt(""quote-id""),
""tags"": [
[ ""expiration"", ""<expiration-timestamp>"" ],
[ ""mint"", ""<mint-url>"" ]
]
}"
What does Appendix 1: Validating proofs mean?,"Clients can optionally validate proofs to make sure they are not working from an old state; this logic is left up to particular implementations to decide when and why to do it, but if some proofs are checked and deemed to have been spent, the client should delete the token and roll over any unspent proof."
What does Nutzaps mean?,"draftoptional

A Nutzap is a P2PK Cashu token in which the payment itself is the receipt."
What does Alice nutzaps Bob mean?,"- Alice fetches eventkind:10019from Bob to see the mints Bob trusts.
- She mints a token at that mint (or swaps some tokens she already had in that mint) P2PK-locked to the pubkey Bob has listed in hiskind:10019.
- She publishes akind:9321event to the relays Bob indicated with the proofs she minted."
What does Bob receives the nutzap mean?,"- At some point, Bob's client fetcheskind:9321events p-tagging him from his relays.
- Bob's client swaps the token into his wallet."
What does Nutzap informational event mean?,"jsonc
{
""kind"": 10019,
""tags"": [
[ ""relay"", ""wss://relay1"" ],
[ ""relay"", ""wss://relay2"" ],
[ ""mint"", ""https://mint1"", ""usd"", ""sat"" ],
[ ""mint"", ""https://mint2"", ""sat"" ],
[ ""pubkey"", ""<p2pk-pubkey>"" ]
]
}

- kind:10019is an event that is useful for others to know how to send money to the user.
- relay: relays where the user will be reading token events from. If a user wants to send money to the user, they should write to these relays.
- mint: mints the user is explicitly agreeing to use to receive funds on. Clients SHOULD not send money on mints not listed here or risk burning their money. Additional markers can be used to list the supported base units of the mint.
- pubkey: Public key that MUST be used to P2PK-lock receiving nutzaps -- implementations MUST NOT use the target user's main Nostr public key. This public key corresponds to theprivkeyfield encrypted in a user'snip-60wallet event."
What does Nutzap event mean?,"Eventkind:9321is a nutzap event published by the sender, p-tagging the recipient. The outputs are P2PK-locked to the public key the recipient indicated in theirkind:10019event.

Clients MUST prefix the public key they P2PK-lock with""02""(for nostr<>cashu compatibility).

jsonc
{
""kind"": 9321,
""content"": ""Thanks for this great idea."",
""pubkey"": ""<sender-pubkey>"",
""tags"": [
[ ""proof"", ""{\""amount\"":1,\""C\"":\""02277c66191736eb72fce9d975d08e3191f8f96afb73ab1eec37e4465683066d3f\"",\""id\"":\""000a93d6f8a1d2c4\"",\""secret\"":\""[\\\""P2PK\\\"",{\\\""nonce\\\"":\\\""b00bdd0467b0090a25bdf2d2f0d45ac4e355c482c1418350f273a04fedaaee83\\\"",\\\""data\\\"":\\\""02eaee8939e3565e48cc62967e2fde9d8e2a4b3ec0081f29eceff5c64ef10ac1ed\\\""}]\""}"" ],
[ ""u"", ""https://stablenut.umint.cash"" ],
[ ""e"", ""<nutzapped-event-id>"", ""<relay-hint>"" ],
[ ""p"", ""e9fbced3a42dcf551486650cc752ab354347dd413b307484e4fd1818ab53f991"" ], // recipient of nutzap
]
}

- .contentis an optional comment for the nutzap
- .tags:
- proofis one or more proofs P2PK-locked to the public key the recipient specified in theirkind:10019event and including a DLEQ proof.
- uis the mint the URL of the mint EXACTLY as specified by the recipient'skind:10019.
- pis the Nostr identity public key of nutzap recipient.
- eis the event that is being nutzapped, if any."
What does Sending a nutzap mean?,"- The sender fetches the recipient'skind:10019.
- The sender mints/swaps ecash on one of the recipient's listed mints.
- The sender P2PK-locks to the recipient's specified public key in theirkind:10019"
What does Receiving nutzaps mean?,"Clients should REQ for nutzaps:
* Filtering with#ufor mints they expect to receive ecash from.
* this is to prevent even interacting with mints the user hasn't explicitly signaled.
* Filtering withsinceof the most recentkind:7376event the same user has created.
* this can be used as a marker of the nutzaps that have already been swaped by the user -- clients might choose to use other kinds of markers, including internal state -- this is just a guidance of one possible approach.

{ ""kinds"": [9321], ""#p"": [""my-pubkey""], ""#u"": [""<mint-1>"", ""<mint-2>""], ""since"": <latest-created_at-of-kind-7376> }.

Upon receiving a new nutzap, the client should swap the tokens into a wallet the user controls, either aNIP-60wallet, their own LN wallet or anything else."
What does Updating nutzap-redemption history mean?,"When claiming a token the client SHOULD create akind:7376event andetag the original nutzap event. This is to record that this token has already been claimed (and shouldn't be attempted again) and as signaling to the recipient that the ecash has been redeemed.

Multiplekind:9321events can be tagged in the samekind:7376event.

jsonc
{
""kind"": 7376,
""content"": nip44_encrypt([
[ ""direction"", ""in"" ], // in = received, out = sent
[ ""amount"", ""1"" ],
[ ""e"", ""<7375-event-id>"", ""<relay-hint>"", ""created"" ] // new token event that was created
]),
""tags"": [
[ ""e"", ""<9321-event-id>"", ""<relay-hint>"", ""redeemed"" ], // nutzap event that has been redeemed
[ ""p"", ""<sender-pubkey>"" ] // pubkey of the author of the 9321 event (nutzap sender)
]
}

Events that redeem a nutzap SHOULD be published to the sender'sNIP-65""read"" relays."
What does Verifying a Cashu Zap mean?,"When listing or counting zaps received by any given event, observer clients SHOULD:

- check that the receiving user has issued akind:10019tagging the mint where the cashu has been minted.
- check that the token is locked to the pubkey the user has listed in theirkind:10019.
- look at theutag and check that the token is issued in one of the mints listed in thekind:10019.
- locally verify the DLEQ proof of the tokens being sent.

All these checks can be done offline (as long as the observer has the receiver mints' keyset and theirkind:10019event), so the process should be reasonably fast."
What does Final Considerations mean?,"- Clients SHOULD guide their users to use NUT-11 (P2PK) and NUT-12 (DLEQ proofs) compatible-mints in theirkind:10019event to avoid receiving nutzaps anyone can spend.
- Clients SHOULD normalize and deduplicate mint URLs as described in NIP-65.
- A nutzap event MUST include proofs in one of the mints the recipient has listed in theirkind:10019and published to the NIP-65 relays of the recipient, failure to do so may result in the recipient donating the tokens to the mint since the recipient might never see the event."
What does Request to Vanish mean?,"draftoptional

This NIP offers a Nostr-native way to request a complete reset of a key's fingerprint on the web. This procedure is legally binding in some jurisdictions, and thus, supporters of this NIP should truly delete events from their database."
What does Request to Vanish from Relay mean?,"Kind62requests a specific relay to delete everything, includingNIP-09Deletion Events, from the.pubkeyuntil its.created_at.

jsonc
{
""kind"": 62,
""pubkey"": <32-byte hex-encoded public key of the event creator>,
""tags"": [
[""relay"", ""<relay url>""]
],
""content"": ""<reason or note>"",
//...other fields
}

The tag list MUST include at least onerelayvalue.

Content MAY include a reason or a legal notice to the relay operator.

Relays MUST fully delete any events from the.pubkeyif their service URL is tagged in the event.

Relays SHOULD delete allNIP-59Gift Wraps that p-tagged the.pubkeyif their service URL is tagged in the event, deleting all DMs to the pubkey.

Relays MUST ensure the deleted events cannot be re-broadcasted into the relay.

Relays MAY store the signed request to vanish for bookkeeping.

Paid relays or relays that restrict who can post MUST also follow the request to vanish regardless of the user's status.

Publishing a deletion request event (Kind5) against a request to vanish has no effect. Clients and relays are not obliged to support ""unrequest vanish"" functionality.

Clients SHOULD send this event to the target relays only."
What does Global Request to Vanish mean?,"To request ALL relays to delete everything, the event MUST include arelaytag with the valueALL_RELAYSin uppercase.

jsonc
{
""kind"": 62,
""pubkey"": <32-byte hex-encoded public key of the event creator>,
""tags"": [
[""relay"", ""ALL_RELAYS""]
],
""content"": ""<reason>"",
//...other fields
}

Clients SHOULD broadcast this event to as many relays as possible."
What does Chess (Portable Game Notation) mean?,"draftoptional

This NIP defineskind:64notes representing chess games inPGNformat, which can be read by humans and is also supported by most chess software."
What does Resources mean?,"- PGN Specification: PGN (Portable Game Notation) specification
- PGN Specification Supplement: Addition for adding graphical elements, clock values, eval, ...
- PGN Formal Syntax
- PGN Seven Tag Roster
- PGN Import Format
- PGN Export Format
- lichess / pgn-viewer (GitHub): PGN viewer widget, designed to be embedded in content pages"
What does Relay List Metadata mean?,"draftoptional

Defines a replaceable event usingkind:10002to advertise relays where the user generallywritesto and relays where the user generallyreadsmentions.

The event MUST include a list ofrtags with relay URLs as value and an optionalreadorwritemarker. If the marker is omitted, the relay is bothreadandwrite.

jsonc
{
""kind"": 10002,
""tags"": [
[""r"", ""wss://alicerelay.example.com""],
[""r"", ""wss://brando-relay.com""],
[""r"", ""wss://expensive-relay.example2.com"", ""write""],
[""r"", ""wss://nostr-relay.example.com"", ""read""]
],
""content"": """",
// other fields...
}

When downloading eventsfroma user, clients SHOULD use thewriterelays of that user.

When downloading eventsabouta user, where the user was tagged (mentioned), clients SHOULD use the user'sreadrelays.

When publishing an event, clients SHOULD:

- Send the event to thewriterelays of the author
- Send the event to allreadrelays of each tagged user
- Send the author'skind:10002event to all relays the event was published to"
What does Size mean?,Clients SHOULD guide users to keepkind:10002lists small (2-4 relays of each category).
What does Discoverability mean?,"Clients SHOULD spread an author'skind:10002event to as many relays as viable, paying attention to relays that, at any moment, serve naturally as well-known public indexers for these relay lists (where most other clients and users are connecting to in order to publish and fetch those)."
What does Relay Discovery and Liveness Monitoring mean?,"draftoptional

You want to find relays. You may want to discover relays based on criteria that's up to date. You may even want to ensure that you have a complete dataset. You probably want to filter relays based on their reported liveness.

In its purest form:

json
{
""kind"": 30166,
""created_at"": 1722173222,
""content"": ""{}"",
""tags"": [
[ ""d"", ""wss://somerelay.abc/"" ]
],
""pubkey"": ""<pubkey>"",
""sig"": ""<signature>"",
""id"": ""<eventid>""
}

This event signals that the relay atwss://somerelay.abc/was reported ""online"" by<pubkey>at timestamp1722173222. This eventMAYbe extended upon to include more information."
What does Ontology mean?,"- Relay Operator: someone who operates a relay
- Monitor: A pubkey that monitors relays and publishes30166events at the frequency specified in their10166event.
- Ad-hoc Monitor: A pubkey that monitors relays and publishes30166events at an irregular frequency.
- Monitor Service: A group or individual that monitors relays using one or moreMonitors.
- Check: a specific data point that is tested or aggregated by a monitor."
What does Summary mean?,"30166is aNIP-33addressable event, referred to as a ""Relay Discovery"" event. These events are optimized with a small footprint for protocol-level relay Discovery."
What does Purpose mean?,Discovery of relays over nostr.
What does created_at mean?,Thecreated_atfield in a NIP-66 event should reflect the time when the relay liveness (and potentially other data points) was checked.
What does Meta Tags (unindexed) mean?,"- rtt-openThe relay's openround-trip timein milliseconds.
- rtt-readThe relay's readround-trip timein milliseconds.
- rtt-writeThe relay's writeround-trip timein milliseconds.

OtherrttvaluesMAYbe present. This NIP should be updated if there is value found in morerttvalues."
What does Single Letter Tags (indexed) mean?,"- dThe relay URL/URI. The#dtagmustbe included in theevent.tags[]array. Index position1mustbe the relay websocket URL/URI. If a URL itSHOULDbenormalized. For relays not accessible via conventional means but rather by an npub/pubkey, an npub/pubkeyMAYbe used in place of a URL.json
[ ""d"", ""wss://somerelay.abc/""]
- n: Networkjson
[ ""n"", ""clearnet"" ]
- T: Relay Type. Enumeratedrelay typeformatted asPascalCasejson
[""T"", ""PrivateInbox"" ]
- N: Supported NipsFrom NIP-11 ""Informational Document""nip11.supported_nips[]json
[ ""N"", ""42"" ]
- R: RequirementsNIP-11 ""Informational Document""nip11.limitations.payment_required,nip11.limitations.auth_requiredand/or any other boolean value withinnip11.limitations[]that is added in the futurejson
[ ""R"", ""payment"" ],
[ ""R"", ""auth"" ],Since the nostr protocol does not currently support filtering on whether an indexed tagisoris notset, to make ""public"" and ""no auth"" relays discoverable requires a!flag

json
[ ""R"", ""!payment"" ], //no payment required, is public
[ ""R"", ""!auth"" ], //no authentication required

- t: ""Topics""From NIP-11 ""Informational Document""nip11.tags[]json
[ ""t"", ""nsfw"" ]
- k: Accepted/Blocked Kinds [NIP-22]json
[ ""k"", ""0"" ],
[ ""k"", ""3"" ],
[ ""k"", ""10002"" ]

or for blocked kinds

json
[ ""k"", ""!0"" ]
[ ""k"", ""!3"" ],
[ ""k"", ""!10002"" ]

- g:NIP-52gtags (geohash)json
[ ""g"", ""9r1652whz"" ]
- 30166MAYbe extended with global tags defined by other NIPs that do no collide with locally defined indices, including but not limited to:p,t,e,a,iandl/L."
What does Robust Example of a30166Event mean?,"Relay was online, and you can filter on a number of different tagsjson
{
""id"": ""<eventid>"",
""pubkey"": ""<monitor's pubkey>"",
""created_at"": ""<created_at  [some recent date ...]>"",
""signature"": ""<signature>"",
""content"": ""{}"",
""kind"": 30166,
""tags"": [
[""d"",""wss://some.relay/""],
[""n"", ""clearnet""],
[""N"", ""40""],
[""N"", ""33""],
[""R"", ""!payment""],
[""R"", ""auth""],
[""g"", ""ww8p1r4t8""],
[""p"", ""somehexkey...""],
[""l"", ""en"", ""ISO-639-1""],
[""t"", ""nsfw"" ],
[""rtt-open"", 234 ]
]
}"
What does Standard Tags mean?,"- frequencyThe frequencyin secondsat which the monitor publishes events. A string-integer at index1represents the expected frequency the monitor will publish30166events. There should only be1frequency per monitor.

json
[ ""frequency"", ""3600"" ]

- timeout(optional) The timeout values for various checks conducted by a monitor. Index1is the monitor's timeout in milliseconds. Index2describes what test the timeout is used for. If no index2is provided, it is inferred that the timeout provided applies to all tests. These values can assist relay operators in understanding data signaled by the monitor inRelay Discovery Events.json
[ ""timeout"", ""2000"", ""open"" ],
[ ""timeout"", ""2000"", ""read"" ],
[ ""timeout"", ""3000"", ""write"" ],
[ ""timeout"", ""2000"", ""nip11"" ],
[ ""timeout"", ""4000"", ""ssl"" ]"
What does Indexed Tags mean?,"- c""Checks""SHOULDbe a lowercase string describing the check(s) conducted by a monitor. Due to the rapidly evolving nature of relays, enumeration is organic and not strictly defined. But examples of some checks could be websocketopen/read/write/auth,nip11checks,dnsandgeochecks, and and any other checks the monitor may deem useful.. Other checksMAYbe included. New types of checksSHOULDbe added to this NIP as they are needed.json
[ ""c"", ""ws"" ],
[ ""c"", ""nip11"" ],
[ ""c"", ""dns"" ],
[ ""c"", ""geo"" ],
[ ""c"", ""ssl"" ],
- g:NIP-52gtags (geohash)json
[ ""g"", ""9r1652whz"" ]
- Any other globally defined indexable tagsMAYbe included as found necessary."
What does Other Requirements mean?,"MonitorsSHOULDhave the following
- A published0(NIP-1) event
- A published10002(NIP-65) event that defines the relays the monitor publishes to."
What does Robust Example of a10166Event mean?,"```json
{
""id"": """",
""pubkey"": """",
""created_at"": """",
""signature"": """",
""content"": """",
""tags"": [

```
[ ""timeout"", ""open"", ""5000""  ],
[ ""timeout"", ""read"", ""3000""  ],
[ ""timeout"", ""write"", ""3000"" ],
[ ""timeout"", ""nip11"", ""3000"" ],

[ ""frequency"", ""3600"" ],

[ ""c"", ""ws"" ],
[ ""c"", ""nip11"" ],
[ ""c"", ""ssl"" ],
[ ""c"", ""dns"" ],
[ ""c"", ""geo"" ]

[ ""g"", ""ww8p1r4t8"" ]
```

]
}
```"
What does Monitors mean?,"- ARelay Monitorchecks the liveness and potentially other attributes of a relay.
- Relay Monitorpublishes a kind30166note when a relay it is monitoring is online. If the monitor has a10166event, events should be published at the frequency defined in their10166note.

Any pubkey that publishes30166eventsSHOULDat a minimum be checking that the relay is available by websocket and behaves like a relay"
What does Clients mean?,"- In most cases, a clientSHOULDfilter on30166events using either a statically or dynamically defined monitor'spubkeyand acreated_atvalue respective of the monitor's publishedfrequency. If the monitor has no stated frequency, other mechanisms should be employed to determine data integrity.
- Relay Livenessis subjectively determined by the client, starting with thefrequencyvalue of a monitor.
- The liveness of aRelay Monitorcan be subjectively determined by detecting whether theRelay Monitorhas published events with respect tofrequencyvalue of any particular monitor.
- The reliability and trustworthiness of aRelay Monitorcould be established via web-of-trust, reviews or similar mechanisms."
What does Risk Mitigation mean?,"- When a client implementsNIP-66events, the client should have a fallback ifNIP-66events cannot be located.
- AMonitororAd-hoc Monitormay publish erroneous30166events, intentionally or otherwise. Therefor, it's important to program defensively to limit the impact of such events. This can be achieved with web-of-trust, reviews, fallbacks and/or data-aggregation for example."
What does Picture-first feeds mean?,"draftoptional

This NIP defines event kind20for picture-first clients. Images must be self-contained. They are hosted externally and referenced usingimetatags.

The idea is for this type of event to cater to Nostr clients resembling platforms like Instagram, Flickr, Snapchat, or 9GAG, where the picture itself takes center stage in the user experience."
What does Picture Events mean?,"Picture events contain atitletag and description in the.content.

They may contain multiple images to be displayed as a single post.

```jsonc
{
""id"": <32-bytes lowercase hex-encoded SHA-256 of the the serialized event data>,
""pubkey"": <32-bytes lowercase hex-encoded public key of the event creator>,
""created_at"":,
""kind"": 20,
""content"": """",
""tags"": [
[""title"", """"],

```
// Picture Data
[
""imeta"",
""url https://nostr.build/i/my-image.jpg"",
""m image/jpeg"",
""blurhash eVF$^OI:${M{o#*0-nNFxakD-?xVM}WEWB%iNKxvR-oetmo#R-aen$"",
""dim 3024x4032"",
""alt A scenic photo overlooking the coast of Costa Rica"",
""x <sha256 hash as specified in NIP 94>"",
""fallback https://nostrcheck.me/alt1.jpg"",
""fallback https://void.cat/alt1.jpg""
],
[
""imeta"",
""url https://nostr.build/i/my-image2.jpg"",
""m image/jpeg"",
""blurhash eVF$^OI:${M{o#*0-nNFxakD-?xVM}WEWB%iNKxvR-oetmo#R-aen$"",
""dim 3024x4032"",
""alt Another scenic photo overlooking the coast of Costa Rica"",
""x <sha256 hash as specified in NIP 94>"",
""fallback https://nostrcheck.me/alt2.jpg"",
""fallback https://void.cat/alt2.jpg"",

""annotate-user <32-bytes hex of a pubkey>:<posX>:<posY>"" // Tag users in specific locations in the picture
],

[""content-warning"", ""<reason>""], // if NSFW

// Tagged users
[""p"", ""<32-bytes hex of a pubkey>"", ""<optional recommended relay URL>""],
[""p"", ""<32-bytes hex of a pubkey>"", ""<optional recommended relay URL>""],

// Specify the media type for filters to allow clients to filter by supported kinds
[""m"", ""image/jpeg""],

// Hashes of each image to make them queryable
[""x"", ""<sha256>""]

// Hashtags
[""t"", ""<tag>""],
[""t"", ""<tag>""],

// location
[""location"", ""<location>""], // city name, state, country
[""g"", ""<geohash>""],

// When text is written in the image, add the tag to represent the language
[""L"", ""ISO-639-1""],
[""l"", ""en"", ""ISO-639-1""]
```

]
}
```

Theimetatagannotate-userplaces a user link in the specific position in the image.

Only the following media types are accepted:
-image/apng: Animated Portable Network Graphics (APNG)
-image/avif: AV1 Image File Format (AVIF)
-image/gif: Graphics Interchange Format (GIF)
-image/jpeg: Joint Photographic Expert Group image (JPEG)
-image/png: Portable Network Graphics (PNG)
-image/webp: Web Picture format (WEBP)

Picture events might be used withNIP-71's kind22to display short vertical videos in the same feed."
What does Peer-to-peer Order events mean?,draftoptional
What does The event mean?,"Events areaddressable eventsand use38383as event kind, a p2p event look like this:

json
{
""id"": ""84fad0d29cb3529d789faeff2033e88fe157a48e071c6a5d1619928289420e31"",
""pubkey"": ""dbe0b1be7aafd3cfba92d7463edbd4e33b2969f61bd554d37ac56f032e13355a"",
""created_at"": 1702548701,
""kind"": 38383,
""tags"": [
[""d"", ""ede61c96-4c13-4519-bf3a-dcf7f1e9d842""],
[""k"", ""sell""],
[""f"", ""VES""],
[""s"", ""pending""],
[""amt"", ""0""],
[""fa"", ""100""],
[""pm"", ""face to face"", ""bank transfer""],
[""premium"", ""1""],
[
""rating"",
""{\""total_reviews\"":1,\""total_rating\"":3.0,\""last_rating\"":3,\""max_rate\"":5,\""min_rate\"":1}""
],
[""source"", ""https://t.me/p2plightning/xxxxxxx""],
[""network"", ""mainnet""],
[""layer"", ""lightning""],
[""name"", ""Nakamoto""],
[""g"", ""<geohash>""],
[""bond"", ""0""],
[""expiration"", ""1719391096""],
[""y"", ""lnp2pbot""],
[""z"", ""order""]
],
""content"": """",
""sig"": ""7e8fe1eb644f33ff51d8805c02a0e1a6d034e6234eac50ef7a7e0dac68a0414f7910366204fa8217086f90eddaa37ded71e61f736d1838e37c0b73f6a16c4af2""
}"
What does Protected Events mean?,"draftoptional

When the""-""tag is present, that means the event is ""protected"".

A protected event is an event that can only be published to relays by its author. This is achieved by relays ensuring that the author isauthenticatedbefore publishing their own events or by just rejecting events with[""-""]outright.

The default behavior of a relay MUST be to reject any event that contains[""-""].

Relays that want to accept such events MUST first require that the client perform theNIP-42AUTHflow and then check if the authenticated client has the same pubkey as the event being published and only accept the event in that case."
What does The tag mean?,"The tag is a simple tag with a single item:[""-""]. It may be added to any event."
What does Example flow mean?,"- User79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798connects to relaywss://example.com:

jsonc
/* client: */
[""EVENT"",{""id"":""cb8feca582979d91fe90455867b34dbf4d65e4b86e86b3c68c368ca9f9eef6f2"",""pubkey"":""79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"",""created_at"":1707409439,""kind"":1,""tags"":[[""-""]],""content"":""hello members of the secret group"",""sig"":""fa163f5cfb75d77d9b6269011872ee22b34fb48d23251e9879bb1e4ccbdd8aaaf4b6dc5f5084a65ef42c52fbcde8f3178bac3ba207de827ec513a6aa39fa684c""}]
/* relay: */
[""AUTH"", ""<challenge>""]
[""OK"", ""cb8feca582979d91fe90455867b34dbf4d65e4b86e86b3c68c368ca9f9eef6f2"", false, ""auth-required: this event may only be published by its author""]
/* client: */
[""AUTH"", {}]
[""EVENT"",{""id"":""cb8feca582979d91fe90455867b34dbf4d65e4b86e86b3c68c368ca9f9eef6f2"",""pubkey"":""79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"",""created_at"":1707409439,""kind"":1,""tags"":[[""-""]],""content"":""hello members of the secret group"",""sig"":""fa163f5cfb75d77d9b6269011872ee22b34fb48d23251e9879bb1e4ccbdd8aaaf4b6dc5f5084a65ef42c52fbcde8f3178bac3ba207de827ec513a6aa39fa684c""}]
[""OK"", ""cb8feca582979d91fe90455867b34dbf4d65e4b86e86b3c68c368ca9f9eef6f2"", true, """"]"
What does Why mean?,"There are multiple circumstances in which it would be beneficial to prevent the unlimited spreading of an event through all relays imaginable and restrict some to only a certain demographic or to a semi-closed community relay. Even when the information is public it may make sense to keep it compartimentalized across different relays.

It's also possible to create closed access feeds with this when the publisher has some relationship with the relay and trusts the relay to not release their published events to anyone.

Even though it's ultimately impossible to restrict the spread of information on the internet (for example, one of the members of the closed group may want to take an event intended to be restricted and republish it to other relays), most relays would be happy to not facilitate the acts of these so-called ""pirates"", in respect to the original decision of the author and therefore gladly reject these republish acts if given the means to.

This NIP gives these authors and relays the means to clearly signal when a given event is not intended to be republished by third parties."
What does Video Events mean?,"draftoptional

This specification definesvideoevents representing a dedicated post of externally hosted content.

Unlike akind:1event with a video attached, video events are meant to contain all additional metadata concerning the subject media and to be surfaced in video-specific clients rather than general micro-blogging clients. The thought is for events of this kind to be referenced in a Netflix, YouTube, or TikTok like nostr client where the video itself is at the center of the experience."
What does Other tags: mean?,"- title(required) title of the video
- published_at, for the timestamp in unix seconds (stringified) of the first time the video was published
- duration(optional) video duration in seconds
- text-track(optional, repeated) link to WebVTT file for video, type of supplementary information (captions/subtitles/chapters/metadata), optional language code
- content-warning(optional) warning about content of NSFW video
- alt(optional) description for accessibility
- segment(optional, repeated) start timestamp in formatHH:MM:SS.sss, end timestamp in formatHH:MM:SS.sss, chapter/segment title, chapter thumbnail-url
- t(optional, repeated) hashtag to categorize video
- p(optional, repeated) 32-bytes hex pubkey of a participant in the video, optional recommended relay URL
- r(optional, repeated) references / links to web pages

```jsonc
{
""id"": <32-bytes lowercase hex-encoded SHA-256 of the the serialized event data>,
""pubkey"": <32-bytes lowercase hex-encoded public key of the event creator>,
""created_at"":,
""kind"": 21 | 22,
""content"": """",
""tags"": [
[""title"", """"],
[""published_at"", """"],
[""alt"",],

```
// video Data
[""imeta"",
""dim 1920x1080"",
""url https://myvideo.com/1080/12345.mp4"",
""x 3093509d1e0bc604ff60cb9286f4cd7c781553bc8991937befaacfdc28ec5cdc"",
""m video/mp4"",
""image https://myvideo.com/1080/12345.jpg"",
""image https://myotherserver.com/1080/12345.jpg"",
""fallback https://myotherserver.com/1080/12345.mp4"",
""fallback https://andanotherserver.com/1080/12345.mp4"",
""service nip96"",
],

[""duration"", <duration of video in seconds>],
[""text-track"", ""<encoded `kind 6000` event>"", ""<recommended relay urls>""],
[""content-warning"", ""<reason>""],
[""segment"", <start>, <end>, ""<title>"", ""<thumbnail URL>""],

// participants
[""p"", ""<32-bytes hex of a pubkey>"", ""<optional recommended relay URL>""],
[""p"", ""<32-bytes hex of a pubkey>"", ""<optional recommended relay URL>""],

// hashtags
[""t"", ""<tag>""],
[""t"", ""<tag>""],

// reference links
[""r"", ""<url>""],
[""r"", ""<url>""]
```

]
}
```"
What does Moderated Communities (Reddit Style) mean?,"draftoptional

The goal of this NIP is to enable public communities. It defines the replaceable eventkind:34550to define the community and the current list of moderators/administrators. Users that want to post into the community, simply tag any Nostr event with the community'satag. Moderators may issue an approval eventkind:4550."
What does Community Definition mean?,"Kind:34550SHOULD include any field that helps define the community and the set of moderators.relaytags MAY be used to describe the preferred relay to download requests and approvals. A community definition event'sdtag MAY double as its name, but if anametag is provided, it SHOULD be displayed instead of thedtag.

```jsonc
{
""created_at"":,
""kind"": 34550,
""tags"": [
[""d"", """"],
[""name"", """"],
[""description"", """"],
[""image"", """", ""x""],

```
//.. other tags relevant to defining the community

// moderators
[""p"", ""<32-bytes hex of a pubkey1>"", ""<optional recommended relay URL>"", ""moderator""],
[""p"", ""<32-bytes hex of a pubkey2>"", ""<optional recommended relay URL>"", ""moderator""],
[""p"", ""<32-bytes hex of a pubkey3>"", ""<optional recommended relay URL>"", ""moderator""],

// relays used by the community (w/optional marker)
[""relay"", ""<relay hosting author kind 0>"", ""author""],
[""relay"", ""<relay where to send and receive requests>"", ""requests""],
[""relay"", ""<relay where to send and receive approvals>"", ""approvals""],
[""relay"", ""<relay where to post requests to and fetch approvals from>""]
```

],
// other fields...
}
```"
What does Posting to a community mean?,"Any Nostr event can be posted to a community. Clients MUST add one or more communityatags, each with a recommended relay.

jsonc
{
""kind"": 1,
""tags"": [
[""a"", ""34550:<community event author pubkey>:<community-d-identifier>"", ""<optional-relay-url>""],
],
""content"": ""hello world"",
// other fields...
}"
What does Moderation mean?,"Anyone may issue an approval event to express their opinion that a post is appropriate for a community. Clients MAY choose which approval events to honor, but SHOULD at least use ones published by the group's defined moderators.

An approval event MUST include one or more communityatags, aneoratag pointing to the post, and theptag of the author of the post (for approval notifications).atag prefixes can be used to disambiguate between community and replaceable event pointers (communityatags always begin with34550).

The event SHOULD also include the JSON-stringifiedpost requestevent inside the.content, and aktag with the original post's event kind to allow filtering of approved posts by kind.

Moderators MAY request deletion of their approval of a post at any time usingNIP-09 event deletion requests.

jsonc
{
""pubkey"": ""<32-bytes lowercase hex-encoded public key of the event creator>"",
""kind"": 4550,
""tags"": [
[""a"", ""34550:<event-author-pubkey>:<community-d-identifier>"", ""<optional-relay-url>""],
[""e"", ""<post-id>"", ""<optional-relay-url>""],
[""p"", ""<port-author-pubkey>"", ""<optional-relay-url>""],
[""k"", ""<post-request-kind>""]
],
""content"": ""<the full approved event, JSON-encoded>"",
// other fields...
}

It's recommended that multiple moderators approve posts to avoid deleting them from the community when a moderator is removed from the owner's list. In case the full list of moderators must be rotated, the new moderator set must sign new approvals for posts in the past or the community will restart. The owner can also periodically copy and re-sign of each moderator's approval events to make sure posts don't disappear with moderators.

Approvals of replaceable events can be created in three ways:

- By tagging the replaceable event as anetag if moderators want to approve each individual change to the replaceable event
- By tagging the replaceable event as anatag if the moderator authorizes the replaceable event author to make changes without additional approvals and
- By tagging the replaceable event with both itseandatag which empowers clients to display the original and updated versions of the event, with appropriate remarks in the UI.

Since relays are instructed to delete old versions of a replaceable event, thecontentof an approval using anetag MUST have the specific version of the event or clients might not be able to find that version of the content anywhere.

Clients SHOULD evaluate any non-34550:*atag as posts to be approved for all34550:*atags."
What does Cross-posting mean?,"Clients MAY support cross-posting between communities by posting a NIP 18kind 6orkind 16repost to one or more communities usingatags as described above. Thecontentof the repost MUST be the original event, not the approval event."
What does External Content IDs mean?,"draftoptional

There are certain established global content identifiers such asBook ISBNs,Podcast GUIDs, andMovie ISANsthat are useful to reference in nostr events so that clients can query all the events assosiated with these ids.

itags are used for referencing these external content ids, withktags representing the external content id kind so that clients can query all the events for a specific kind."
What does Supported IDs mean?,"| Type                   |itag                                                    |ktag                  |
| ---                    | ---                                                        | ---                      |
| URLs                   | ""<URL, normalized, no fragment>""                         | ""web""                    |
| Books                  | ""isbn:<id, without hyphens>""                             | ""isbn""                   |
| Geohashes              | ""geo:<geohash, lowercase>""                               | ""geo""                    |
| Movies                 | ""isan:<id, without version part>""                        | ""isan""                   |
| Papers                 | ""doi:<id, lowercase>""                                    | ""doi""                    |
| Hashtags               | ""#<topic, lowercase>""                                    | ""#""                      |
| Podcast Feeds          | ""podcast:guid:<guid>""                                    | ""podcast:guid""           |
| Podcast Episodes       | ""podcast:item:guid:<guid>""                               | ""podcast:item:guid""      |
| Podcast Publishers     | ""podcast:publisher:guid:<guid>""                          | ""podcast:publisher:guid"" |
| Blockchain Transaction | ""<blockchain>:[<chainId>:]tx:<txid, hex, lowercase>"" | ""<blockchain>:tx""      |
| Blockchain Address     | ""<blockchain>:[<chainId>:]address:<address>""         | ""<blockchain>:address"" |"
What does Webpages mean?,"For the webpage ""https://myblog.example.com/post/2012-03-27/hello-world"" the ""i"" and ""k"" tags are:

jsonc
[
[""i"", ""https://myblog.example.com/post/2012-03-27/hello-world""],
[""k"", ""web""]
]"
What does Books: mean?,"- Book ISBN:[""i"", ""isbn:9780765382030""]- https://isbnsearch.org/isbn/9780765382030

Book ISBNs MUST be referencedwithout hyphensas many book search APIs return the ISBNs without hyphens. Removing hypens from ISBNs is trivial, whereas adding the hyphens back in is non-trivial requiring a library."
What does Podcasts: mean?,"- Podcast RSS Feed GUID:[""i"", ""podcast:guid:c90e609a-df1e-596a-bd5e-57bcc8aad6cc""]- https://podcastindex.org/podcast/c90e609a-df1e-596a-bd5e-57bcc8aad6cc
- Podcast RSS Item GUID:[""i"", ""podcast:item:guid:d98d189b-dc7b-45b1-8720-d4b98690f31f""]
- Podcast RSS Publisher GUID:[""i"", ""podcast:publisher:guid:18bcbf10-6701-4ffb-b255-bc057390d738""]"
What does Movies: mean?,"- Movie ISAN:[""i"", ""isan:0000-0000-401A-0000-7""]- https://web.isan.org/public/en/isan/0000-0000-401A-0000-7

Movie ISANs SHOULD be referencedwithout the version partas the versions / edits of movies are not relevant. More info on ISAN parts here -  https://support.isan.org/hc/en-us/articles/360002783131-Records-relations-and-hierarchies-in-the-ISAN-Registry"
What does Blockchain mean?,"<blockchain>can be any layer 1 chain (bitcoin,ethereum,solana, ...). If necessary (e.g. for ethereum), you can specify a<chainId>."
What does Bitcoin mean?,"bitcoin:address:<bech32, lowercase | base58, case sensitive>
bitcoin:tx:<txid, hex, lowercase>

E.g. https://blockstream.info/tx/a1075db55d416d3ca199f55b6084e2115b9345e16c5cf302fc80e9d5fbf5d48d

jsonc
[
[""i"", ""bitcoin:tx:a1075db55d416d3ca199f55b6084e2115b9345e16c5cf302fc80e9d5fbf5d48d""],
[""k"", ""bitcoin:tx""]
]

E.g. https://blockstream.info/address/1HQ3Go3ggs8pFnXuHVHRytPCq5fGG8Hbhx

jsonc
[
[""i"", ""bitcoin:address:1HQ3Go3ggs8pFnXuHVHRytPCq5fGG8Hbhx""],
[""k"", ""bitcoin:address""]
]"
What does Ethereum (and other EVM chains) mean?,"ethereum:<chainId, integer>:tx:<txHash, hex, lowercase>
ethereum:<chainId, integer>:address:<hex, lowercase>

E.g. https://etherscan.io/address/0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045

jsonc
[
[""i"", ""ethereum:1:address:0xd8da6bf26964af9d7eed9e03e53415d37aa96045""],
[""k"", ""ethereum:address""]
]

E.g. https://gnosisscan.io/tx/0x98f7812be496f97f80e2e98d66358d1fc733cf34176a8356d171ea7fbbe97ccd

jsonc
[
[""i"", ""ethereum:100:tx:0x98f7812be496f97f80e2e98d66358d1fc733cf34176a8356d171ea7fbbe97ccd""],
[""k"", ""ethereum:tx""]
]"
What does Optional URL Hints mean?,"Eachitag MAY have a url hint as the second argument to redirect people to a website if the client isn't opinionated about how to interpret the id:

[""i"", ""podcast:item:guid:d98d189b-dc7b-45b1-8720-d4b98690f31f"", https://fountain.fm/episode/z1y9TMQRuqXl2awyrQxg]

[""i"", ""isan:0000-0000-401A-0000-7"", https://www.imdb.com/title/tt0120737]"
What does Zap Goals mean?,"draftoptional

This NIP defines an event for creating fundraising goals. Users can contribute funds towards the goal by zapping the goal event."
What does Nostr Event mean?,"Akind:9041event is used.

The.contentcontains a human-readable description of the goal.

The following tags are defined as REQUIRED.

- amount- target amount in milisats.
- relays- a list of relays the zaps to this goal will be sent to and tallied from.

Example event:

jsonc
{
""kind"": 9041,
""tags"": [
[""relays"", ""wss://alicerelay.example.com"", ""wss://bobrelay.example.com"", /*...*/],
[""amount"", ""210000""],
],
""content"": ""Nostrasia travel expenses"",
// other fields...
}

The following tags are OPTIONAL.

- closed_at- timestamp for determining which zaps are included in the tally. Zap receipts published after theclosed_attimestamp SHOULD NOT count towards the goal progress.
- image- an image for the goal
- summary- a brief description

jsonc
{
""kind"": 9041,
""tags"": [
[""relays"", ""wss://alicerelay.example.com"", ""wss://bobrelay.example.com"", /*...*/],
[""amount"", ""210000""],
[""closed_at"", ""<unix timestamp in seconds>""],
[""image"", ""<image URL>""],
[""summary"", ""<description of the goal>""],
],
""content"": ""Nostrasia travel expenses"",
// other fields...
}

The goal MAY include anroratag linking to a URL or addressable event.

The goal MAY include multiple beneficiary pubkeys by specifyingzaptags.

Addressable events can link to a goal by using agoaltag specifying the event id and an optional relay hint.

jsonc
{
""kind"": 3xxxx,
""tags"": [
[""goal"", ""<event id>"", ""<Relay URL (optional)>""],
// rest of tags...
],
// other fields...
}"
What does Use cases mean?,"- Fundraising clients
- Adding funding goals to events such as long form posts, badges or live streams"
What does Arbitrary custom app data mean?,"draftoptional

The goal of this NIP is to enableremoteStorage-like capabilities for custom applications that do not care about interoperability.

Even though interoperability is great, some apps do not want or do not need interoperability, and it wouldn't make sense for them. Yet Nostr can still serve as a generalized data storage for these apps in a ""bring your own database"" way, for example: a user would open an app and somehow input their preferred relay for storage, which would then enable these apps to store application-specific data there."
What does Nostr event mean?,This NIP specifies the use of event kind30078(anaddressableevent) with adtag containing some reference to the app name and context -- or any other arbitrary string.contentand othertagscan be anything or in any format.
What does Some use cases mean?,"- User personal settings on Nostr clients (and other apps unrelated to Nostr)
- A way for client developers to propagate dynamic parameters to users without these having to update
- Personal private data generated by apps that have nothing to do with Nostr, but allow users to use Nostr relays as their personal database"
What does Threads mean?,"draftoptional

A thread is akind 11event.  Threads SHOULD include atitle.

json
{
""kind"": 11,
""content"": ""Good morning"",
""tags"": [
[""title"", ""GM""]
]
}

Replies tokind 11MUST useNIP-22kind 1111comments. Replies should
always be to the rootkind 11to avoid arbitrarily nested reply hierarchies.

json
{
""kind"": 1111,
""content"": ""Cool beans"",
""tags"": [
[""K"", ""11""],
[""E"", <event-id>, <relay-url>, <pubkey>]
]
}"
What does Highlights mean?,"draftoptional

This NIP defineskind:9802, a ""highlight"" event, to signal content a user finds valuable."
What does Attribution mean?,"Clients MAY include one or moreptags, tagging the original authors of the material being highlighted; this is particularly
useful when highlighting non-nostr content for which the client might be able to get a nostr pubkey somehow
(e.g. prompting the user or reading a<link rel=""me"" href=""nostr:nprofile1..."" />tag on the document). A role MAY be included as the
last value of the tag.

jsonc
{
""tags"": [
[""p"", ""<pubkey-hex>"", ""<relay-url>"", ""author""],
[""p"", ""<pubkey-hex>"", ""<relay-url>"", ""author""],
[""p"", ""<pubkey-hex>"", ""<relay-url>"", ""editor""]
],
// other fields...
}"
What does Context mean?,"Clients MAY include acontexttag, useful when the highlight is a subset of a paragraph and displaying the
surrounding content might be beneficial to give context to the highlight."
What does Quote Highlights mean?,"Acommenttag may be added to create a quote highlight. This MUST be rendered like a quote repost with the highlight as the quoted note.

This is to prevent the creation and multiple notes (highlight + kind 1) for a single highlight action, which looks bad in micro-blogging clients where these notes may appear in succession.

p-tag mentions MUST have amentionattribute to distinguish it from authors and editors.

r-tag urls from the comment MUST have amentionattribute to distinguish from the highlighted source url. The source url MUST have thesourceattribute."
What does Relay Management API mean?,"draftoptional

Relays may provide an API for performing management tasks. This is made available as a JSON-RPC-like request-response protocol over HTTP, on the same URI as the relay's websocket.

When a relay receives an HTTP(s) request with aContent-Typeheader ofapplication/nostr+json+rpcto a URI supporting WebSocket upgrades, it should parse the request as a JSON document with the following fields:

json
{
""method"": ""<method-name>"",
""params"": [""<array>"", ""<of>"", ""<parameters>""]
}

Then it should return a response in the format

json
{
""result"": {""<arbitrary>"": ""<value>""},
""error"": ""<optional error message, if the call has errored>""
}

This is the list ofmethodsthat may be supported:

- supportedmethods:
- params:[]
- result:[""<method-name>"", ""<method-name>"", ...](an array with the names of all the other supported methods)
- banpubkey:
- params:[""<32-byte-hex-public-key>"", ""<optional-reason>""]
- result:true(a boolean always set totrue)
- listbannedpubkeys:
- params:[]
- result:[{""pubkey"": ""<32-byte-hex>"", ""reason"": ""<optional-reason>""}, ...], an array of objects
- allowpubkey:
- params:[""<32-byte-hex-public-key>"", ""<optional-reason>""]
- result:true(a boolean always set totrue)
- listallowedpubkeys:
- params:[]
- result:[{""pubkey"": ""<32-byte-hex>"", ""reason"": ""<optional-reason>""}, ...], an array of objects
- listeventsneedingmoderation:
- params:[]
- result:[{""id"": ""<32-byte-hex>"", ""reason"": ""<optional-reason>""}], an array of objects
- allowevent:
- params:[""<32-byte-hex-event-id>"", ""<optional-reason>""]
- result:true(a boolean always set totrue)
- banevent:
- params:[""<32-byte-hex-event-id>"", ""<optional-reason>""]
- result:true(a boolean always set totrue)
- listbannedevents:
- params:[]
- result:[{""id"": ""<32-byte hex>"", ""reason"": ""<optional-reason>""}, ...], an array of objects
- changerelayname:
- params:[""<new-name>""]
- result:true(a boolean always set totrue)
- changerelaydescription:
- params:[""<new-description>""]
- result:true(a boolean always set totrue)
- changerelayicon:
- params:[""<new-icon-url>""]
- result:true(a boolean always set totrue)
- allowkind:
- params:[<kind-number>]
- result:true(a boolean always set totrue)
- disallowkind:
- params:[<kind-number>]
- result:true(a boolean always set totrue)
- listallowedkinds:
- params:[]
- result:[<kind-number>, ...], an array of numbers
- blockip:
- params:[""<ip-address>"", ""<optional-reason>""]
- result:true(a boolean always set totrue)
- unblockip:
- params:[""<ip-address>""]
- result:true(a boolean always set totrue)
- listblockedips:
- params:[]
- result:[{""ip"": ""<ip-address>"", ""reason"": ""<optional-reason>""}, ...], an array of objects"
What does Authorization mean?,"The request must contain anAuthorizationheader with a validNIP-98event, except thepayloadtag is required. Theutag is the relay URL.

IfAuthorizationis not provided or is invalid, the endpoint should return a 401 response."
What does Polls mean?,"draftoptional

This NIP defines the event scheme that describe Polls on nostr."
What does Poll Event mean?,"The poll event is defined as akind:1068event.

- contentkey holds the label for the poll.

Major tags in the poll event are:

- option: The option tags contain an OptionId(any alphanumeric) field, followed by an option label field.
- relay: One or multiple tags that the poll is expecting respondents to respond on.
- polltype: can be ""singlechoice"" or ""multiplechoice"". Polls that do not have a polltype should be considered a ""singlechoice"" poll.
- endsAt: signifying at which unix timestamp the poll is meant to end.

Example Event

json
{
""content"": ""Pineapple on pizza"",
""created_at"": 1719888496,
""id"": ""9d1b6b9562e66f2ecf35eb0a3c2decc736c47fddb13d6fb8f87185a153ea3634"",
""kind"": 1068,
""pubkey"": ""dee45a23c4f1d93f3a2043650c5081e4ac14a778e0acbef03de3768e4f81ac7b"",
""sig"": ""7fa93bf3c430eaef784b0dacc217d3cd5eff1c520e7ef5d961381bc0f014dde6286618048d924808e54d1be03f2f2c2f0f8b5c9c2082a4480caf45a565ca9797"",
""tags"": [
[""option"", ""qj518h583"", ""Yay""],
[""option"", ""gga6cdnqj"", ""Nay""],
[""relay"", ""<relay url1>""],
[""relay"", ""<relay url2>""],
[""polltype"", ""singlechoice""],
[""endsAt"", ""<unix timestamp in seconds>""]
]
}"
What does Responses mean?,"The response event is akind:1018event. It contains an e tag with the poll event it is referencing, followed by one or more response tags.

- response: The tag contains ""response"" as it's first positional argument followed by the option Id selected.

The responses are meant to be published to the relays specified in the poll event.

Example Response Event

json
{
""content"": """",
""created_at"": 1720097117,
""id"": ""60a005e32e9596c3f544a841a9bc4e46d3020ca3650d6a739c95c1568e33f6d8"",
""kind"": 1018,
""pubkey"": ""1bc70a0148b3f316da33fe7e89f23e3e71ac4ff998027ec712b905cd24f6a411"",
""sig"": ""30071a633c65db8f3a075c7a8de757fbd8ce65e3607f4ba287fe6d7fbf839a380f94ff4e826fbba593f6faaa13683b7ea9114ade140720ecf4927010ebf3e44f"",
""tags"": [
[""e"", ""1fc80cf813f1af33d5a435862b7ef7fb96b47e68a48f1abcadf8081f5a545550""],
[""response"", ""gga6cdnqj""],
[""response"", ""m3agjsdq1""]
]
}"
What does Poll Types mean?,"The polltype setting dictates how multiple response tags are handled in thekind:1018event.

- polltype: singlechoice: The first response tag is to be considered the actual response.
- polltype: multiplechoice: The first response tag pointing to each id is considered the actual response, without considering the order of the response tags."
What does Counting Results mean?,"Results can be queried by fetchingkind:1018events from the relays specified in the poll.
The results displayed should only be 1 vote event per pubkey.
In case of multiple events for a pubkey, the event with the largest timestamp within the poll limits should be considered.

Example for querying polls.

ts
const fetchVoteEvents = (filterPubkeys: string[]) => {
let resultFilter: Filter = {
""#e"": [pollEvent.id],
kinds: [1018],
};
if (filterPubkeys?.length) {
resultFilter.authors = filterPubkeys;
}
if (pollExpiration) {
resultFilter.until = Number(pollExpiration);
}
pool.subscribeMany(relays, [resultFilter], {
onevent: handleResultEvent,
});
};

Example for maintaining OneVotePerPubkey

```ts
const oneVotePerPubkey = (events: Event[]) => {
const eventMap = new Map();

events.forEach((event) => {
if (
!eventMap.has(event.pubkey) ||
event.created_at > eventMap.get(event.pubkey)!.created_at
) {
eventMap.set(event.pubkey, event);
}
});

return Array.from(eventMap.values());
};
```"
What does Curation mean?,"The clients may configure fetching results by specific people. This can be achieved by creatingkind:30000follow sets, and fetching results only from the follow set.
Clients can also employ other curation algorithms, like Proof Of Work and Web of Trust scores for result curations."
What does Recommended Application Handlers mean?,"draftoptional

This NIP describeskind:31989andkind:31990: a way to discover applications that can handle unknown event-kinds."
What does Parties involved mean?,"There are three actors to this workflow:

- application that handles a specific event kind (note that an application doesn't necessarily need to be a distinct entity and it could just be the same pubkey as user A)Publisheskind:31990, detailing how apps should redirect to it
- Publisheskind:31990, detailing how apps should redirect to it
- user A, who recommends an app that handles a specific event kindPublisheskind:31989
- Publisheskind:31989
- user B, who seeks a recommendation for an app that handles a specific event kindQueries forkind:31989and, based on results, queries forkind:31990
- Queries forkind:31989and, based on results, queries forkind:31990"
What does Recommendation event mean?,"jsonc
{
""kind"": 31989,
""pubkey"": <recommender-user-pubkey>,
""tags"": [
[""d"", <supported-event-kind>],
[""a"", ""31990:app1-pubkey:<d-identifier>"", ""wss://relay1"", ""ios""],
[""a"", ""31990:app2-pubkey:<d-identifier>"", ""wss://relay2"", ""web""]
],
// other fields...
}

Thedtag inkind:31989is the supported event kind this event is recommending.

Multipleatags can appear on the samekind:31989.

The second value of the tag SHOULD be a relay hint.
The third value of the tag SHOULD be the platform where this recommendation might apply."
What does Handler information mean?,"jsonc
{
""kind"": 31990,
""pubkey"": ""<application-pubkey>"",
""content"": ""<optional-kind:0-style-metadata>"",
""tags"": [
[""d"", <random-id>],
[""k"", <supported-event-kind>],
[""web"", ""https://..../a/<bech32>"", ""nevent""],
[""web"", ""https://..../p/<bech32>"", ""nprofile""],
[""web"", ""https://..../e/<bech32>""],
[""ios"", "".../<bech32>""]
],
// other fields...
}

- contentis an optionalmetadata-like stringified JSON object, as described in NIP-01. This content is useful when the pubkey creating thekind:31990is not an application. Ifcontentis empty, thekind:0of the pubkey should be used to display application information (e.g. name, picture, web, LUD16, etc.)
- ktags' value is the event kind that is supported by thiskind:31990.
Using aktag(s) (instead of having the kind of thedtag) provides:Multiplektags can exist in the same event if the application supports more than one event kind and their handler URLs are the same.The same pubkey can have multiple events with different apps that handle the same event kind.
- Multiplektags can exist in the same event if the application supports more than one event kind and their handler URLs are the same.
- The same pubkey can have multiple events with different apps that handle the same event kind.
- bech32in a URL MUST be replaced by clients with the NIP-19-encoded entity that should be loaded by the application.

Multiple tags might be registered by the app, following NIP-19 nomenclature as the second value of the array.

A tag without a second value in the array SHOULD be considered a generic handler for any NIP-19 entity that is not handled by a different tag."
What does Client tag mean?,"When publishing events, clients MAY include aclienttag. Identifying the client that published the note. This tag is a tuple ofname,addressidentifying a handler event and, a relayhintfor finding the handler event. This has privacy implications for users, so clients SHOULD allow users to opt-out of using this tag.

jsonc
{
""kind"": 1,
""tags"": [
[""client"", ""My Client"", ""31990:app1-pubkey:<d-identifier>"", ""wss://relay1""]
]
// other fields...
}"
What does User flow mean?,"A user A who uses a non-kind:1-centric nostr app could choose to announce/recommend a certain kind-handler application.

When user B sees an unknown event kind, e.g. in a social-media centric nostr client, the client would allow user B to interact with the unknown-kind event (e.g. tapping on it).

The client MIGHT query for the user's and the user's follows handler."
What does User A recommends akind:31337-handler mean?,"User A might be a user of Zapstr, akind:31337-centric client (tracks). Using Zapstr, user A publishes an event recommending Zapstr as akind:31337-handler.

jsonc
{
""kind"": 31989,
""tags"": [
[""d"", ""31337""],
[""a"", ""31990:1743058db7078661b94aaf4286429d97ee5257d14a86d6bfa54cb0482b876fb0:abcd"", <relay-url>, ""web""]
],
// other fields...
}"
What does User B interacts with akind:31337-handler mean?,"User B might see in their timeline an event referring to akind:31337event (e.g. akind:1tagging akind:31337).

User B's client, not knowing how to handle akind:31337might display the event using itsalttag (as described in NIP-31). When the user clicks on the event, the application queries for a handler for thiskind:

[""REQ"", <id>, { ""kinds"": [31989], ""#d"": [""31337""], ""authors"": [<user>, <users-contact-list>] }]

User B, who follows User A, sees thatkind:31989event and fetches thea-tagged event for the app and handler information.

User B's client sees the application'skind:31990which includes the information to redirect the user to the relevant URL with the desired entity replaced in the URL."
What does Alternative query bypassingkind:31989 mean?,"Alternatively, users might choose to query directly forkind:31990for an event kind. Clients SHOULD be careful doing this and use spam-prevention mechanisms or querying high-quality restricted relays to avoid directing users to malicious handlers.

[""REQ"", <id>, { ""kinds"": [31990], ""#k"": [<desired-event-kind>], ""authors"": [...] }]"
What does Data Vending Machine mean?,"draftoptional

This NIP defines the interaction between customers and Service Providers for performing on-demand computation.

Money in, data out."
What does Actors mean?,"There are two actors in the workflow described in this NIP:
* Customers (npubs who request a job)
* Service providers (npubs who fulfill jobs)"
What does Job request (kind:5000-5999) mean?,"A request to process data, published by a customer. This event signals that a customer is interested in receiving the result of some kind of compute.

jsonc
{
""kind"": 5xxx, // kind in 5000-5999 range
""content"": """",
""tags"": [
[ ""i"", ""<data>"", ""<input-type>"", ""<relay>"", ""<marker>"" ],
[ ""output"", ""<mime-type>"" ],
[ ""relays"", ""wss://..."" ],
[ ""bid"", ""<msat-amount>"" ],
[ ""t"", ""bitcoin"" ]
],
// other fields...
}

All tags are optional.

- itag: Input data for the job (zero or more inputs)<data>: The argument for the input<input-type>: The way this argument should be interpreted. MUST be one of:url: A URL to be fetched of the data that should be processed.event: A Nostr event ID.job: The output of a previous job with the specified event ID. The dermination of which output to build upon is up to the service provider to decide (e.g. waiting for a signaling from the customer, waiting for a payment, etc.)text:<data>is the value of the input, no resolution is needed<relay>: Ifeventorjobinput-type, the relay where the event/job was published, otherwise optional or empty string<marker>: An optional field indicating how this input should be used within the context of the job
- <data>: The argument for the input
- <input-type>: The way this argument should be interpreted. MUST be one of:url: A URL to be fetched of the data that should be processed.event: A Nostr event ID.job: The output of a previous job with the specified event ID. The dermination of which output to build upon is up to the service provider to decide (e.g. waiting for a signaling from the customer, waiting for a payment, etc.)text:<data>is the value of the input, no resolution is needed
- url: A URL to be fetched of the data that should be processed.
- event: A Nostr event ID.
- job: The output of a previous job with the specified event ID. The dermination of which output to build upon is up to the service provider to decide (e.g. waiting for a signaling from the customer, waiting for a payment, etc.)
- text:<data>is the value of the input, no resolution is needed
- <relay>: Ifeventorjobinput-type, the relay where the event/job was published, otherwise optional or empty string
- <marker>: An optional field indicating how this input should be used within the context of the job
- output: Expected output format. Different job requestkinddefines this more precisely.
- param: Optional parameters for the job as key (first argument)/value (second argument). Different job requestkinddefines this more precisely. (e.g.[ ""param"", ""lang"", ""es"" ])
- bid: Customer MAY specify a maximum amount (in millisats) they are willing to pay
- relays: List of relays where Service Providers SHOULD publish responses to
- p: Service Providers the customer is interested in. Other SPs MIGHT still choose to process the job"
What does Encrypted Params mean?,"If the user wants to keep the input parameters a secret, they can encrypt theiandparamtags with the service provider's 'p' tag and add it to the content field. Add a tagencryptedas tags. Encryption for private tags will useNIP-04 - Encrypted Direct Message encryption, using the user's private and service provider's public key for the shared secret

json
[
[""i"", ""what is the capital of France? "", ""text""],
[""param"", ""model"", ""LLaMA-2""],
[""param"", ""max_tokens"", ""512""],
[""param"", ""temperature"", ""0.5""],
[""param"", ""top-k"", ""50""],
[""param"", ""top-p"", ""0.7""],
[""param"", ""frequency_penalty"", ""1""]
]

This param data will be encrypted and added to thecontentfield andptag should be present

jsonc
{
""content"": ""BE2Y4xvS6HIY7TozIgbEl3sAHkdZoXyLRRkZv4fLPh3R7LtviLKAJM5qpkC7D6VtMbgIt4iNcMpLtpo..."",
""tags"": [
[""p"", ""04f74530a6ede6b24731b976b8e78fb449ea61f40ff10e3d869a3030c4edc91f""],
[""encrypted""]
],
// other fields...
}"
What does Job result (kind:6000-6999) mean?,"Service providers publish job results, providing the output of the job result. They should tag the original job request event id as well as the customer's pubkey.

jsonc
{
""pubkey"": ""<service-provider pubkey>"",
""content"": ""<payload>"",
""kind"": 6xxx,
""tags"": [
[""request"", ""<job-request>""],
[""e"", ""<job-request-id>"", ""<relay-hint>""],
[""i"", ""<input-data>""],
[""p"", ""<customer's-pubkey>""],
[""amount"", ""requested-payment-amount"", ""<optional-bolt11>""]
],
// other fields...
}

- request: The job request event stringified-JSON.
- amount: millisats that the Service Provider is requesting to be paid. An optional third value can be a bolt11 invoice.
- i: The original input(s) specified in the request."
What does Encrypted Output mean?,"If the request has encrypted params, then output should be encrypted and placed incontentfield. If the output is encrypted, then avoid includingitag with input-data as clear text.
Add a tag encrypted to mark the output content asencrypted

jsonc
{
""pubkey"": ""<service-provider pubkey>"",
""content"": ""<encrypted payload>"",
""kind"": 6xxx,
""tags"": [
[""request"", ""<job-request>""],
[""e"", ""<job-request-id>"", ""<relay-hint>""],
[""p"", ""<customer's-pubkey>""],
[""amount"", ""requested-payment-amount"", ""<optional-bolt11>""],
[""encrypted""]
],
// other fields...
}"
What does Job feedback mean?,"Service providers can give feedback about a job back to the customer.

jsonc
{
""kind"": 7000,
""content"": ""<empty-or-payload>"",
""tags"": [
[""status"", ""<status>"", ""<extra-info>""],
[""amount"", ""requested-payment-amount"", ""<bolt11>""],
[""e"", ""<job-request-id>"", ""<relay-hint>""],
[""p"", ""<customer's-pubkey>""],
],
// other fields...
}

- content: Either empty or a job-result (e.g. for partial-result samples)
- amounttag: as defined in theJob Resultsection.
- statustag: Service Providers SHOULD indicate what this feedback status refers to.Job Feedback Statusdefines status. Extra human-readable information can be added as an extra argument.
- NOTE: If the input params requires input to be encrypted, thencontentfield will have encrypted payload withptag as key."
What does Job feedback status mean?,"| status             | description                                                                                                 |
| --------           | -------------                                                                                               |
|payment-required| Service Provider requires payment before continuing.                                                        |
|processing| Service Provider is processing the job.                                                                     |
|error| Service Provider was unable to process the job.                                                             |
|success| Service Provider successfully processed the job.                                                            |
|partial| Service Provider partially processed the job. The.contentmight include a sample of the partial results. |

Any job feedback event MIGHT include results in the.contentfield, as described in theJob Resultsection. This is useful for service providers to provide a sample of the results that have been processed so far."
What does Protocol Flow mean?,"- Customer publishes a job request (e.g.kind:5000speech-to-text).
- Service Providers MAY submitkind:7000job-feedback events (e.g.payment-required,processing,error, etc.).
- Upon completion, the service provider publishes the result of the job with akind:6000job-result event.
- At any point, if there is anamountpending to be paid as instructed by the service provider, the user can pay the includedbolt11or zap the job result event the service provider has sent to the user.

Job feedback (kind:7000) and Job Results (kind:6000-6999) events MAY include anamounttag, this can be interpreted as a suggestion to pay. Service Providers MUST use thepayment-requiredfeedback event to signal that a payment is required and no further actions will be performed until the payment is sent.

Customers can always either pay the includedbolt11invoice or zap the event requesting the payment and service providers should monitor for both if they choose to include a bolt11 invoice."
What does Notes about the protocol flow mean?,"The flow is deliberately ambiguous, allowing vast flexibility for the interaction between customers and service providers so that service providers can model their behavior based on their own decisions/perceptions of risk.

Some service providers might choose to submit apayment-requiredas the first reaction before sending aprocessingor before delivering results, some might choose to serve partial results for the job (e.g. a sample), send apayment-requiredto deliver the rest of the results, and some service providers might choose to assess likelihood of payment based on an npub's past behavior and thus serve the job results before requesting payment for the best possible UX.

It's not up to this NIP to define how individual vending machines should choose to run their business."
What does Cancellation mean?,A job request might be canceled by publishing akind:5delete request event tagging the job request event.
What does Appendix 1: Job chaining mean?,"A Customer MAY request multiple jobs to be processed as a chain, where the output of a job is the input of another job. (e.g. podcast transcription -> summarization of the transcription). This is done by specifying as input an event id of a different job with thejobtype.

Service Providers MAY begin processing a subsequent job the moment they see the prior job's result, but they will likely wait for a zap to be published first. This introduces a risk that Service Provider of job #1 might delay publishing the zap event in order to have an advantage. This risk is up to Service Providers to mitigate or to decide whether the service provider of job #1 tends to have good-enough results so as to not wait for an explicit zap to assume the job was accepted.

This gives a higher level of flexibility to service providers (which sophisticated service providers would take anyway)."
What does Appendix 2: Service provider discoverability mean?,"Service Providers MAY use NIP-89 announcements to advertise their support for job kinds:

jsonc
{
""kind"": 31990,
""pubkey"": ""<pubkey>"",
""content"": ""{
\""name\"": \""Translating DVM\"",
\""about\"": \""I'm a DVM specialized in translating Bitcoin content.\""
}"",
""tags"": [
[""k"", ""5005""], // e.g. translation
[""t"", ""bitcoin""] // e.g. optionally advertises it specializes in bitcoin audio transcription that won't confuse ""Drivechains"" with ""Ridechains""
],
// other fields...
}

Customers can use NIP-89 to see what service providers their follows use."
What does Media Attachments mean?,"Media attachments (images, videos, and other files) may be added to events by including a URL in the event content, along with a matchingimetatag.

imeta(""inline metadata"") tags MAY add information about media URLs in the event's content. Eachimetatag SHOULD match a URL in the event content. Clients MAY replace imeta URLs with rich previews.

Theimetatag is variadic, and each entry is a space-delimited key/value pair.
Eachimetatag MUST have aurl, and at least one other field.imetaMAY include
any field specified byNIP 94. There SHOULD be only oneimetatag per URL."
What does Recommended client behavior mean?,"When uploading files during a new post, clients MAY include this metadata
after the file is uploaded and included in the post.

When pasting URLs during post composition, the client MAY download the file
and add this metadata before the post is sent.

The client MAY ignoreimetatags that do not match the URL in the event content."
What does File Metadata mean?,"draftoptional

The purpose of this NIP is to allow an organization and classification of shared files. So that relays can filter and organize in any way that is of interest. With that, multiple types of filesharing clients can be created. NIP-94 support is not expected to be implemented by ""social"" clients that deal withkind:1notes or by longform clients that deal withkind:30023articles."
What does Event format mean?,"This NIP specifies the use of the1063event kind, having incontenta description of the file content, and a list of tags described below:

- urlthe url to download the file
- ma string indicating the data type of the file. TheMIME typesformat must be used, and they should be lowercase.
- xcontaining the SHA-256 hexencoded string of the file.
- oxcontaining the SHA-256 hexencoded string of the original file, before any transformations done by the upload server
- size(optional) size of file in bytes
- dim(optional) size of file in pixels in the form<width>x<height>
- magnet(optional) URI to magnet file
- i(optional) torrent infohash
- blurhash(optional) theblurhashto show while the file is being loaded by the client
- thumb(optional) url of thumbnail with same aspect ratio
- image(optional) url of preview image with same dimensions
- summary(optional) text excerpt
- alt(optional) description for accessibility
- fallback(optional) zero or more fallback file sources in caseurlfails
- service(optional) service type which is serving the file (eg.NIP-96)

jsonc
{
""kind"": 1063,
""tags"": [
[""url"",<string with URI of file>],
[""m"", <MIME type>],
[""x"", <Hash SHA-256>],
[""ox"", <Hash SHA-256>],
[""size"", <size of file in bytes>],
[""dim"", <size of file in pixels>],
[""magnet"", <magnet URI> ],
[""i"", <torrent infohash>],
[""blurhash"", <value>],
[""thumb"", <string with thumbnail URI>, <Hash SHA-256>],
[""image"", <string with preview URI>, <Hash SHA-256>],
[""summary"", <excerpt>],
[""alt"", <description>]
],
""content"": ""<caption>"",
// other fields...
}"
What does Suggested use cases mean?,"- A relay for indexing shared files. For example, to promote torrents.
- A pinterest-like client where people can share their portfolio and inspire others.
- A simple way to distribute configurations and software updates."
What does HTTP File Storage Integration mean?,draftoptional
What does Introduction mean?,"This NIP defines a REST API for HTTP file storage servers intended to be used in conjunction with the nostr network.
The API will enable nostr users to upload files and later reference them by url on nostr notes.

The spec DOES NOT use regular nostr events through websockets for
storing, requesting nor retrieving data because, for simplicity, the server
will not have to learn anything about nostr relays."
What does Server Adaptation mean?,"File storage servers wishing to be accessible by nostr users should opt-in by making available an https route at/.well-known/nostr/nip96.jsonwithapi_url:

jsonc
{
// Required
// File upload and deletion are served from this url
// Also downloads if ""download_url"" field is absent or empty string
""api_url"": ""https://your-file-server.example/custom-api-path"",
// Optional
// If absent, downloads are served from the api_url
""download_url"": ""https://a-cdn.example/a-path"",
// Optional
// Note: This field is not meant to be set by HTTP Servers.
// Use this if you are a nostr relay using your /.well-known/nostr/nip96.json
// just to redirect to someone else's http file storage server's /.well-known/nostr/nip96.json
// In this case, ""api_url"" field must be an empty string
""delegated_to_url"": ""https://your-file-server.example"",
// Optional
""supported_nips"": [60],
// Optional
""tos_url"": ""https://your-file-server.example/terms-of-service"",
// Optional
""content_types"": [""image/jpeg"", ""video/webm"", ""audio/*""],
// Optional
""plans"": {
// ""free"" is the only standardized plan key and
// clients may use its presence to learn if server offers free storage
""free"": {
""name"": ""Free Tier"",
// Default is true
// All plans MUST support NIP-98 uploads
// but some plans may also allow uploads without it
""is_nip98_required"": true,
""url"": ""https://..."", // plan's landing page if there is one
""max_byte_size"": 10485760,
// Range in days / 0 for no expiration
// [7, 0] means it may vary from 7 days to unlimited persistence,
// [0, 0] means it has no expiration
// early expiration may be due to low traffic or any other factor
""file_expiration"": [14, 90],
""media_transformations"": {
""image"": [
""resizing""
]
}
}
}
}"
What does Relay Hints mean?,"Note: This section is not meant to be used by HTTP Servers.

A nostr relay MAY redirect to someone else's HTTP file storage server by
adding a/.well-known/nostr/nip96.jsonwith ""delegated_to_url"" field
pointing to the url where the server hosts its own/.well-known/nostr/nip96.json. In this case, the ""api_url"" field must
be an empty string and all other fields must be absent.

If the nostr relay is also an HTTP file storage server,
it must use the ""api_url"" field instead."
What does List of Supporting File Storage Servers mean?,See https://github.com/aljazceru/awesome-nostr#nip-96-file-storage-servers.
What does Auth mean?,"When indicated,clientsmust add anNIP-98Authorizationheader (optionallywith the encodedpayloadtag set to the base64-encoded 256-bit SHA-256 hash of the file - not the hash of the whole request body)."
What does Upload mean?,"POST $api_urlasmultipart/form-data.

AUTH required

List of form fields:

- file:REQUIREDthe file to upload
- caption:RECOMMENDEDloose description;
- expiration: UNIX timestamp in seconds. Empty string if file should be stored forever. The server isn't required to honor this.
- size: File byte size. This is just a value the server can use to reject early if the file size exceeds the server limits.
- alt:RECOMMENDEDstrict description text for visibility-impaired users.
- media_type: ""avatar"" or ""banner"". Informs the server if the file will be used as an avatar or banner. If absent, the server will interpret it as a normal upload, without special treatment.
- content_type: mime type such as ""image/jpeg"". This is just a value the server can use to reject early if the mime type isn't supported.
- no_transform: ""true"" asks server not to transform the file and serve the uploaded file as is, may be rejected.

Others custom form data fields may be used depending on specificserversupport.
Theserverisn't required to store any metadata sent byclients.

Thefilenameembedded in the file may not be honored by theserver, which could internally store just the SHA-256 hash value as the file name, ignoring extra metadata.
The hash is enough to uniquely identify a file, that's why it will be used on thedownloadanddeleteroutes.

TheserverMUST link the user'spubkeystring as the owner of the file so to later allow them to delete the file.

no_transformcan be used to replicate a file to multiple servers for redundancy, clients can use theserver listto find alternative servers which might contain the same file. When uploading a file and requestingno_transformclients should check that the hash matches in the response in order to detect if the file was modified."
What does Response codes mean?,"- 200 OK: File upload exists, but is successful (Existing hash)
- 201 Created: File upload successful (New hash)
- 202 Accepted: File upload is awaiting processing, seeDelayed Processingsection
- 413 Payload Too Large: File size exceeds limit
- 400 Bad Request: Form data is invalid or not supported.
- 403 Forbidden: User is not allowed to upload or the uploaded file hash didnt match the hash included in theAuthorizationheaderpayloadtag.
- 402 Payment Required: Payment is required by the server,this flow is undefined.

The upload response is a json object as follows:

jsonc
{
// ""success"" if successful or ""error"" if not
""status"": ""success"",
// Free text success, failure or info message
""message"": ""Upload successful."",
// Optional. See ""Delayed Processing"" section
""processing_url"": ""..."",
// This uses the NIP-94 event format but DO NOT need
// to fill some fields like ""id"", ""pubkey"", ""created_at"" and ""sig""
//
// This holds the download url (""url""),
// the ORIGINAL file hash before server transformations (""ox"")
// and, optionally, all file metadata the server wants to make available
//
// nip94_event field is absent if unsuccessful upload
""nip94_event"": {
// Required tags: ""url"" and ""ox""
""tags"": [
// Can be same from /.well-known/nostr/nip96.json's ""download_url"" field
// (or ""api_url"" field if ""download_url"" is absent or empty) with appended
// original file hash.
//
// Note we appended .png file extension to the `ox` value
// (it is optional but extremely recommended to add the extension as it will help nostr clients
// with detecting the file type by using regular expression)
//
// Could also be any url to download the file
// (using or not using the /.well-known/nostr/nip96.json's ""download_url"" prefix),
// for load balancing purposes for example.
[""url"", ""https://your-file-server.example/custom-api-path/719171db19525d9d08dd69cb716a18158a249b7b3b3ec4bbdec5698dca104b7b.png""],
// SHA-256 hash of the ORIGINAL file, before transformations.
// The server MUST store it even though it represents the ORIGINAL file because
// users may try to download/delete the transformed file using this value
[""ox"", ""719171db19525d9d08dd69cb716a18158a249b7b3b3ec4bbdec5698dca104b7b""],
// Optional. SHA-256 hash of the saved file after any server transformations.
// The server can but does not need to store this value.
[""x"", ""543244319525d9d08dd69cb716a18158a249b7b3b3ec4bbde5435543acb34443""],
// Optional. Recommended for helping clients to easily know file type before downloading it.
[""m"", ""image/png""],
// Optional. Recommended for helping clients to reserve an adequate UI space to show the file before downloading it.
[""dim"", ""800x600""]
// ... other optional NIP-94 tags
],
""content"": """"
},
// ... other custom fields (please consider adding them to this NIP or to NIP-94 tags)
}

Note that if the server didn't apply any transformation to the received file, bothnip94_event.tags.*.oxandnip94_event.tags.*.xfields will have the same value. The server MUST link the saved file to the SHA-256 hash of theoriginalfile before any server transformations (thenip94_event.tags.*.oxtag value). Theoriginalfile's SHA-256 hash will be used to identify the saved file when downloading or deleting it.

clientsmay upload the same file to one or manyservers.
After successful upload, theclientmay optionally generate and send to any set of nostrrelaysaNIP-94event by including the missing fields.

Alternatively, instead of using NIP-94, theclientcan share or embed on a nostr note just the above url.

clientsmay also use the tags from thenip94_eventto construct animetatag"
What does Delayed Processing mean?,"Sometimes the server may want to place the uploaded file in a processing queue for deferred file processing.

In that case, the server MUST serve the original file while the processing isn't done, then swap the original file for the processed one when the processing is over. The upload response is the same as usual but some optional metadata likenip94_event.tags.*.xandnip94_event.tags.*.sizewon't be available.

The expected resulting metadata that is known in advance should be returned on the response.
For example, if the file processing would change a file from ""jpg"" to ""webp"",
use "".webp"" extension on thenip94_event.tags.*.urlfield value and set ""image/webp"" to thenip94_event.tags.*.mfield.
If some metadata are unknown before processing ends, omit them from the response.

The upload response MAY include aprocessing_urlfield informing a temporary url that may be used by clients to check if
the file processing is done.

If the processing isn't done, the server should reply at theprocessing_urlurl with200 OKand the following JSON:

jsonc
{
// It should be ""processing"". If ""error"" it would mean the processing failed.
""status"": ""processing"",
""message"": ""Processing. Please check again later for updated status."",
""percentage"": 15 // Processing percentage. An integer between 0 and 100.
}

When the processing is over, the server replies at theprocessing_urlurl with201 Createdstatus and a regular successful JSON response already mentioned before (nowwithoutaprocessing_urlfield), possibly including optional metadata atnip94_event.tags.*fields
that weren't available before processing."
What does File compression mean?,"File compression and other transformations like metadata stripping can be applied by the server.
However, for all file actions, such as download and deletion, theoriginalfile SHA-256 hash is what identifies the file in the url string."
What does Download mean?,"GET $api_url/<sha256-hash>(.ext)

The primary file download url informed at the upload's response fieldnip94_event.tags.*.urlcan be that or not (it can be any non-standard url the server wants).
If not, the server still MUST also respond to downloads at the standard url
mentioned on the previous paragraph, to make it possible for a client
to try downloading a file on any NIP-96 compatible server by knowing just the SHA-256 file hash.

Note that the ""\<sha256-hash>"" part is from theoriginalfile,notfrom thetransformedfile if the uploaded file went through any server transformation.

Supporting "".ext"", meaning ""file extension"", is required forservers. It is optional, although recommended, forclientsto append it to the path.
When present it may be used byserversto know whichContent-Typeheader to send (e.g.: ""Content-Type"": ""image/png"" for "".png"" extension).
The file extension may be absent because the hash is the only needed string to uniquely identify a file.

Example:$api_url/719171db19525d9d08dd69cb716a18158a249b7b3b3ec4bbdec5698dca104b7b.png"
What does Media Transformations mean?,"serversmay respond to some media transformation query parameters and ignore those they don't support by serving
the original media file without transformations."
What does Resizing mean?,"Upon upload,serversmay create resized image variants, such as thumbnails, respecting the original aspect ratio.clientsmay use thewquery parameter to request an image version with the desired pixel width.serverscan then serve the variant with the closest width to the parameter value
or an image variant generated on the fly.

Example:$api_url/<sha256-hash>.png?w=32"
What does Deletion mean?,"DELETE $api_url/<sha256-hash>(.ext)

AUTH required

Note that the/<sha256-hash>part is from theoriginalfile,notfrom thetransformedfile if the uploaded file went through any server transformation.

The extension is optional as the file hash is the only needed file identification.

Theservershould reject deletes from users other than the original uploader with the appropriate http response code (403 Forbidden).

It should be noted that more than one user may have uploaded the same file (with the same hash). In this case, a delete must not really delete the file but just remove the user'spubkeyfrom the file owners list (considering the server keeps just one copy of the same file, because multiple uploads of the same file results
in the same file hash).

The successful response is a 200 OK one with just basic JSON fields:

json
{
""status"": ""success"",
""message"": ""File deleted.""
}"
What does Listing files mean?,"GET $api_url?page=x&count=y

AUTH required

Returns a list of files linked to the authenticated users pubkey.

Example Response:

jsonc
{
""count"": 1, // server page size, eg. max(1, min(server_max_page_size, arg_count))
""total"": 1, // total number of files
""page"": 0, // the current page number
""files"": [
{
""tags"": [
[""ox"", ""719171db19525d9d08dd69cb716a18158a249b7b3b3ec4bbdec5698dca104b7b""],
[""x"", ""5d2899290e0e69bcd809949ee516a4a1597205390878f780c098707a7f18e3df""],
[""size"", ""123456""],
[""alt"", ""a meme that makes you laugh""],
[""expiration"",  ""1715691139""],
// ...other metadata
],
""content"": ""haha funny meme"", // caption
""created_at"": 1715691130 // upload timestamp
}
]
}

filescontains an array of NIP-94 events"
What does Query args mean?,"- pagepage number (offset=page*count)
- countnumber of items per page"
What does Selecting a Server mean?,"Note: HTTP File Storage Server developers may skip this section. This is meant for client developers.

A File Server Preference event is a kind 10096 replaceable event meant to select one or more servers the user wants
to upload files to. Servers are listed asservertags:

jsonc
{
""kind"": 10096,
""content"": """",
""tags"": [
[""server"", ""https://file.server.one""],
[""server"", ""https://file.server.two""]
],
// other fields...
}"
What does HTTP Auth mean?,"draftoptional

This NIP defines an ephemeral event used to authorize requests to HTTP servers using nostr events.

This is useful for HTTP services which are built for Nostr and deal with Nostr user accounts."
What does Request Flow mean?,"Using theAuthorizationHTTP header, thekind 27235event MUST bebase64encoded and use the Authorization schemeNostr

Example HTTP Authorization header:Authorization: Nostr
eyJpZCI6ImZlOTY0ZTc1ODkwMzM2MGYyOGQ4NDI0ZDA5MmRhODQ5NGVkMjA3Y2JhODIzMTEwYmUzYTU3ZGZlNGI1Nzg3MzQiLCJwdWJrZXkiOiI2M2ZlNjMxOGRjNTg1ODNjZmUxNjgxMGY4NmRkMDllMThiZmQ3NmFhYmMyNGEwMDgxY2UyODU2ZjMzMDUwNGVkIiwiY29udGVudCI6IiIsImtpbmQiOjI3MjM1LCJjcmVhdGVkX2F0IjoxNjgyMzI3ODUyLCJ0YWdzIjpbWyJ1IiwiaHR0cHM6Ly9hcGkuc25vcnQuc29jaWFsL2FwaS92MS9uNXNwL2xpc3QiXSxbIm1ldGhvZCIsIkdFVCJdXSwic2lnIjoiNWVkOWQ4ZWM5NThiYzg1NGY5OTdiZGMyNGFjMzM3ZDAwNWFmMzcyMzI0NzQ3ZWZlNGEwMGUyNGY0YzMwNDM3ZmY0ZGQ4MzA4Njg0YmVkNDY3ZDlkNmJlM2U1YTUxN2JiNDNiMTczMmNjN2QzMzk0OWEzYWFmODY3MDVjMjIxODQifQ"
What does Reference Implementations mean?,- C# ASP.NETAuthenticationHandlerNostrAuth.cs
What does Classified Listings mean?,"draftoptional

This NIP defineskind:30402: an addressable event to describe classified listings that list any arbitrary product, service, or other thing for sale or offer and includes enough structured metadata to make them useful.

The category of classifieds includes a very broad range of physical goods, services, work opportunities, rentals, free giveaways, personals, etc. and is distinct from the more strictly structured marketplaces defined inNIP-15that often sell many units of specific products through very specific channels.

The structure of these events is very similar toNIP-23long-form content events."
What does Draft / Inactive Listings mean?,kind:30403has the same structure askind:30402and is used to save draft or inactive classified listings.
What does Author mean?,The.pubkeyfield of these events are treated as the party creating the listing.
What does priceexamples mean?,"- $50 one-time payment[""price"", ""50"", ""USD""]
- €15 per month[""price"", ""15"", ""EUR"", ""month""]
- £50,000 per year[""price"", ""50000"", ""GBP"", ""year""]

Other standard tags that might be useful.

- ""g"", a geohash for more precise location"
What does Web Bookmarking mean?,"draftoptional

This NIP defineskind:39701(anaddressable event) for a URI as a web bookmark which uses the HTTP (Hypertext transfer protocol) scheme.
These web bookmark events areaddressableand deletable perNIP-09."
What does Example event mean?,"jsonc
{
""kind"": 39701,
""id"": ""d7a92714f81d0f712e715556aee69ea6da6bfb287e6baf794a095d301d603ec7"",
""pubkey"": ""2729620da105979b22acfdfe9585274a78c282869b493abfa4120d3af2061298"",
""created_at"": 1738869705,
""tags"": [
// Required tags
[""d"", ""alice.blog/post""],
// Optional tags
[""published_at"", ""1738863000""],
[""title"", ""Blog insights by Alice""],
[""t"", ""post""],
[""t"", ""insight""]
],
""content"": ""A marvelous insight by Alice about the nature of blogs and posts."",
""sig"": ""36d34e6448fe0223e9999361c39c492a208bc423d2fcdfc2a3404e04df7c22dc65bbbd62dbe8a4373c62e4d29aac285b5aa4bb9b4b8053bd6207a8b45fbd0c98""
}"
What does Blossom media mean?,"draftoptional

This NIP specifies how Nostr clients can useBlossomfor handling media.

Blossom is a set of standards (called BUDs) for dealing with servers that store files addressable by their SHA-256 sums. Nostr clients may make use of all the BUDs for allowing users to upload files, manage their own files and so on, but most importantly Nostr clients SHOULD make use ofBUD-03to fetchkind:10063lists of servers for each user:

json
{
""id"": ""e4bee088334cb5d38cff1616e964369c37b6081be997962ab289d6c671975d71"",
""pubkey"": ""781208004e09102d7da3b7345e64fd193cd1bc3fce8fdae6008d77f9cabcd036"",
""content"": """",
""kind"": 10063,
""created_at"": 1708774162,
""tags"": [
[""server"", ""https://blossom.self.hosted""],
[""server"", ""https://cdn.blossom.cloud""]
],
""sig"": ""cc5efa74f59e80622c77cacf4dd62076bcb7581b45e9acff471e7963a1f4d8b3406adab5ee1ac9673487480e57d20e523428e60ffcc7e7a904ac882cfccfc653""
}

Whenever a Nostr client finds a URL in an event published by a given user and that URL ends a 64-character hex string (with or without an ending file extension) and that URL is not available anymore, that means that string is likely a representation of a sha256 and that the user may have akind:10063list of Blossom servers published.

Given that, the client SHOULD look into thekind:10063list for other Blossom servers and lookup for the same 64-character hex string in them, by just using the hex string as a path (optionally with the file extension at the end), producing a URL likehttps://blossom.self.hosted/<hex-string>.png.

When downloading such files Nostr clients SHOULD verify that the sha256-hash of its contents matches the 64-character hex string.

More information can be found atBUD-03."
What does More complex interactions mean?,"Clients may use other facilities exposed by Blossom servers (for example, for checking if a file exists in a Blossom server, instead of actually downloading it) which are better documented in theBUDs."
What does Code Snippets mean?,draftoptional
What does Event Kind mean?,"This NIP defineskind:1337as a code snippet event.

The.contentfield contains the actual code snippet text."
What does Optional Tags mean?,"- l- Programming language name (lowercase). Examples: ""javascript"", ""python"", ""rust""
- name- Name of the code snippet, commonly a filename. Examples: ""hello-world.js"", ""quick-sort.py""
- extension- File extension (without the dot). Examples: ""js"", ""py"", ""rs""
- description- Brief description of what the code does
- runtime- Runtime or environment specification (e.g., ""node v18.15.0"", ""python 3.11"")
- license- License under which the code is shared (e.g., ""MIT"", ""GPL-3.0"", ""Apache-2.0"")
- dep- Dependency required for the code to run (can be repeated)
- repo- Reference to a repository where this code originates"
What does Chats mean?,"draftoptional

A chat message is akind 9event.

json
{
""kind"": 9,
""content"": ""GM"",
""tags"": []
}

A reply to akind 9is an additionalkind 9which quotes the parent using aqtag.

json
{
""kind"": 9,
""content"": ""nostr:nevent1...\nyes"",
""tags"": [
[""q"", <event-id>, <relay-url>, <pubkey>]
]
}"
